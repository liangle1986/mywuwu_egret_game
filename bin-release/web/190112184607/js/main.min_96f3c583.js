var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},BaseUIComponent=function(e){function t(){var t=e.call(this)||this;return t.initialized=!1,t.once(eui.UIEvent.COMPLETE,t.createComplete,t),t.allbindButton={},t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.createComplete=function(e){this.initialized=!0,this.setLanguage()},t.prototype.setLanguage=function(){},t.prototype.unbindButton=function(e,t){void 0===t&&(t=!0),e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),t&&this.allbindButton&&delete this.allbindButton[e.hashCode])},t.prototype.bindButton=function(e,t){void 0===t&&(t=!1),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.allbindButton[e.hashCode]=e},t.prototype.touchBindButtonHandler=function(e){e instanceof eui.Button&&SoundManager.instance.playSound("button_mp3")},t.prototype.removeFromParent=function(e){void 0===e&&(e=!1),this.parent&&this.parent.removeChild(this),e&&this.dispose()},t.prototype.touchHandler=function(e){var t=e.currentTarget;this.touchBindButtonHandler(t)},t.prototype.dispose=function(){for(var e in this.allbindButton)this.unbindButton(this.allbindButton[e],!1);this.allbindButton={},this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createComplete,this)},t}(eui.Component);__reflect(BaseUIComponent.prototype,"BaseUIComponent");var BasePlayerView=function(e){function t(){var t=e.call(this)||this;return t._position=0,t._isSelf=!1,t._status=1,t._isZhuang=!1,t._isFang=!1,t.initView(),t}return __extends(t,e),t.prototype.getStatus=function(){return this._status},t.prototype.setOffline=function(e){this._offlineFlagIcon.visible=e},t.prototype.isOffline=function(){return this._offlineFlagIcon.visible},t.prototype.setPosition=function(e){this._position=e},Object.defineProperty(t.prototype,"isZhuang",{get:function(){return this._isZhuang},set:function(e){this._isZhuang=e,this._zhuangFlag.visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFang",{set:function(e){this._isFang=e,this._zhuangFlag.visible=e},enumerable:!0,configurable:!0}),t.prototype.setData=function(e){this._data=e,this._nickNameTF.text=e.nickName,this._idTF&&(this._idTF.text=e.playerId),this._faceImg.load(this._data.headImgUrl)},t.prototype.getData=function(){return this._data},t.prototype.dispose=function(){},t.prototype.getChipBornPos=function(){return[this.x+this._faceImg.x+.5*this._faceImg.width,this.y+this._faceImg.y+.5*this._faceImg.height]},t.prototype.showRecord=function(e){this._recordIcon.visible=e},t.prototype.initView=function(){},t.TOP_LEFT=-2,t.TOP_RIGHT=2,t.LEFT=-1,t.RIGHT=1,t.DOWN=0,t.NOT_READY=1,t.READYED=2,t.NOT_QZ=3,t.QZ=4,t.WATCHER=0,t.BETED=5,t.SHOWCARDED=6,t.WAIT_TO_BET=7,t}(egret.Sprite);__reflect(BasePlayerView.prototype,"BasePlayerView");var DComponent=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.Sprite);__reflect(DComponent.prototype,"DComponent");var IFrameBase=function(e){function t(){var t=e.call(this)||this;return t.isFullScene=!1,t.uiOpenData=null,t.iframeWidth=-1,t.iframeHeight=-1,t.touchEnabled=!0,t.horizontalCenter=0,t.verticalCenter=0,t.closeDispose=!0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.showComplete()},t.prototype.close=function(){GameGlobal.iframeLayer.hideIFrame(this)},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this.maskBg&&this.maskBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.onTouchTapHandle=function(e){this.close()},t.prototype.addToParent=function(){null==this.parent&&GameGlobal.stage.addChild(this),this.tweenShow()},t.prototype.show=function(){},t.prototype.tweenShow=function(){var e=this;if(this.show(),this.alpha=1,this.mainView)this.mainView.scaleX=this.mainView.scaleY=0,egret.Tween.removeTweens(this),egret.Tween.get(this.mainView).to({scaleX:1,scaleY:1,alpha:1},t.TWEEN_DURATION,egret.Ease.backOut).call(function(){e.tweenShowComplete()},this);else{this.x=GameGlobal.stage.stageWidth>>1,this.y=GameGlobal.stage.stageHeight>>1,this.scaleX=0,this.scaleY=0;var i=GameGlobal.stage.stageWidth-this.iframeWidth>>1,n=GameGlobal.stage.stageHeight-this.iframeHeight>>1;egret.Tween.removeTweens(this),egret.Tween.get(this).to({x:i,y:n,scaleX:1,scaleY:1,alpha:1},t.TWEEN_DURATION,egret.Ease.backOut).call(function(){e.tweenShowComplete()},this)}},t.prototype.tweenShowComplete=function(){},t.prototype.removeParent=function(){this.tweenRemove()},t.prototype.tweenRemove=function(){this.alpha=1,egret.Tween.removeTweens(this),egret.Tween.get(this).to({alpha:0},200).call(this.tweenRemoveComp,this)},t.prototype.tweenRemoveComp=function(){this.removeFromParent(!0)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.init=function(){this.initialized=!0},t.prototype.showComplete=function(){this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("hall_json.panel_bg"),this.addChild(this._bg),this._bg.scale9Grid=new egret.Rectangle(20,66,120,70)},t.TWEEN_DURATION=300,t}(BaseUIComponent);__reflect(IFrameBase.prototype,"IFrameBase");var PlayerView=function(e){function t(){var t=e.call(this)||this;return t._betNum=0,t.isKanpai=!1,t}return __extends(t,e),t.prototype.updateBetNum=function(e){this._betNum+=e,console.log("this._betNum = "+e),this._goldTF.text=this._betNum.toString()},t.prototype.clearBetNum=function(){this._betNum=0,this._goldTF.text=this._betNum.toString()},t.prototype.updateScore=function(e){void 0==e&&(e=0),this._scoreTF.text=e.toString()},t.prototype.showChatMsg=function(e,t){var i=this;this._chatPaopao&&this.contains(this._chatPaopao)&&(egret.Tween.removeTweens(this._chatPaopao),this.removeChild(this._chatPaopao),this._chatPaopao=null),egret.Tween.removeTweens(this._emotionImg),this._emotionImg.visible=!1;var n=0;n=-1==this._position||-2==this._position||0==this._position?0:1,1==e||3==e?(this._chatPaopao=new ChatPaopao(n),this.addChild(this._chatPaopao),this._chatPaopao.show(t,e),1==this._position?(this._chatPaopao.x=0,this._chatPaopao.y=-57):2==this._position?(this._chatPaopao.x=0,this._chatPaopao.y=-57):3==this._position?(this._chatPaopao.x=0,this._chatPaopao.y=-36):4==this._position?(this._chatPaopao.x=0,this._chatPaopao.y=-57):5==this._position?(this._chatPaopao.x=0,this._chatPaopao.y=-71):(this._chatPaopao.x=0,this._chatPaopao.y=32),this._chatPaopao.alpha=1,egret.Tween.get(this._chatPaopao).wait(2e3).to({alpha:0},1e3).call(function(){i.removeChild(i._chatPaopao),i._chatPaopao=null},this)):6==e?this.showRecord(!0):(this._emotionImg.visible=!0,this._emotionImg.texture=RES.getRes("emotion_json."+t),this._emotionImg.alpha=1,egret.Tween.get(this._emotionImg).wait(2e3).to({alpha:0},800).call(function(){i._emotionImg.visible=!1},this))},t.prototype.updateStatus=function(e){this._status=e,this._readyFlag.visible=this._kanpaied.visible=this._giveuped.visible=!1,this._bipaiFail.visible=!1,this.isKanpai=!1,this._cardGroup.alpha=1,e==t.NOT_READY?(this._readyFlag.visible=!1,this._betNum=0,this._goldTF.text=this._betNum.toString()):e==t.READYED?(this._readyFlag.visible=!0,this._betNum=0,this._goldTF.text=this._betNum.toString()):e==t.NOT_LOOK?this._cardGroup.visible=!0:e==t.LOOKED?(this._kanpaied.visible=!0,this.isKanpai=!0,this._cardGroup.visible=!0):e==t.GIVEUP?(this._giveuped.visible=!0,this._cardGroup.visible=!0):e==t.GIVEUP2&&(this._bipaiFail.visible=!0,this._cardGroup.alpha=.5,this._cardGroup.visible=!0)},t.prototype.lookPoker=function(e,t){void 0===t&&(t=!0),void 0!=e&&null!=e&&(this._cardGroup.setPokerData(e),this._cardGroup.showPokerValue(!0,t),e.length>0&&(this.isKanpai=!0))},t.prototype.sayPoker=function(){this._readyFlag.visible=this._kanpaied.visible=this._giveuped.visible=!1,this._cardGroup.visible=!0,this._cardGroup.showPokerValue(!1,!1)},t.prototype.showMyTurn=function(e){this._selectImg.visible=e},t.prototype.reset=function(){this.isKanpai=!1,this._betNum=0,this.isFang=!1,this.isZhuang=!1,this._goldTF.text="0",this._nickNameTF.text="...",this._faceImg.clear(),this._faceImg.touchEnabled=!0,this._readyFlag.visible=this._kanpaied.visible=this._giveuped.visible=!1,this._bipaiFail.visible=!1,this._cardGroup.reset(),this._cardGroup.showPokerValue(!1,!1),this.updateScore(0),this._cardGroup.alpha=1,this.updateStatus(t.NOT_READY),this.showRecord(!1),this._isZhuang=!1,this._isFang=!1},t.prototype.setData=function(t){e.prototype.setData.call(this,t),this._betNum=0;t.order;this.updateStatus(t.status)},t.prototype.getData=function(){return this._data},t.prototype.onTouchTap=function(e){null!=this._data&&(this._data.playerId==MyUserInfo.getInstance().userId?GameGlobal.iframeLayer.showIFrame(PlayerInfoView,this._data):GameGlobal.iframeLayer.showIFrame(PlayerInfoView,this._data))},t.prototype.initView=function(){e.prototype.initView.call(this),this._faceBg=DUtils.createBitmapByName("nnGame2_json.nn_playerBg2"),this.addChild(this._faceBg),this._faceImg=new DImage(98,94,"game_json.testFace"),this._faceImg.y=100,this.addChild(this._faceImg),this._faceImg.touchEnabled=!0,this._faceImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._betImg=DUtils.createBitmapByName("nnGame2_json.n_goldBg"),this.addChild(this._betImg),this._betImg.x=280,this._betImg.y=93,this._goldTF=new egret.TextField,this._goldTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._goldTF.size=16,this._goldTF.textColor=16767830,this._goldTF.textAlign=egret.HorizontalAlign.CENTER,this._goldTF.width=68,this._goldTF.x=this._betImg.x+34,this._goldTF.y=this._betImg.y+10,this.addChild(this._goldTF),this._goldTF.text="0",this._emotionImg=new egret.Bitmap,this.addChild(this._emotionImg),this._emotionImg.anchorOffsetX=25,this._emotionImg.anchorOffsetY=26,this._emotionImg.x=this.x+this._faceImg.x+.5*this._faceImg.width,this._emotionImg.y=this.y+this._faceImg.y+.5*this._faceImg.height,this._emotionImg.touchEnabled=!1,this._zhuangFlag=new egret.Bitmap,this._zhuangFlag.texture=RES.getRes("nnGame2_json.n_zhuangKuang"),this.addChild(this._zhuangFlag),this._zhuangFlag.x=0,this._zhuangFlag.y=62,this._zhuangFlag.visible=!1,this._selectImg=new egret.Bitmap,this.addChild(this._selectImg),this._selectImg.texture=RES.getRes("nnGame2_json.n_arrow"),this._selectImg.x=6,this._selectImg.y=10,this._selectImg.visible=!1,egret.Tween.get(this._selectImg,{loop:!0}).to({y:30},800).to({y:-10},800),this._selectImg.touchEnabled=!1,this._cardGroup=new CardGroup,this.addChild(this._cardGroup),this._cardGroup.x=388,this._cardGroup.y=0,this._cardGroup.visible=!1,this._readyFlag=new egret.Bitmap,this._readyFlag.texture=RES.getRes("nnGame2_json.n_readyed"),this._readyFlag.x=518,this._readyFlag.y=54,this.addChild(this._readyFlag),this._readyFlag.visible=!1,this.addChild(this._faceImg),this.addChild(this._emotionImg),this.addChild(this._zhuangFlag),this.addChild(this._selectImg),this._kanpaied=new egret.Bitmap,this.addChild(this._kanpaied),this._kanpaied.texture=RES.getRes("zjhGame_json.kanpaied"),this._giveuped=new egret.Bitmap,this.addChild(this._giveuped),this._giveuped.texture=RES.getRes("zjhGame_json.giveuped"),this._bipaiFail=new egret.Bitmap,this.addChild(this._bipaiFail),this._bipaiFail.texture=RES.getRes("zjhGame_json.bipaiFail"),this._offlineFlagIcon=new egret.Bitmap,this.addChild(this._offlineFlagIcon),this._offlineFlagIcon.texture=RES.getRes("nnGame2_json.offline"),this._offlineFlagIcon.visible=!1,this._offlineFlagIcon.x=10,this._offlineFlagIcon.y=54,this._recordIcon=new egret.Bitmap,this._recordIcon.texture=RES.getRes("common_json.yuyinIcon"),this.addChild(this._recordIcon),this._recordIcon.x=this._faceImg.x+10+this._faceImg.width,this._recordIcon.y=this._faceImg.y+this._faceImg.height-10,this._recordIcon.visible=!1,this._kanpaied.x=this._cardGroup.x+(this._cardGroup.width-this._kanpaied.width>>1),this._kanpaied.y=53,this._giveuped.x=this._cardGroup.x+(this._cardGroup.width-this._giveuped.width>>1),this._giveuped.y=53,this._bipaiFail.x=this._cardGroup.x+(this._cardGroup.width-this._bipaiFail.width>>1),this._bipaiFail.y=53,this._kanpaied.visible=this._bipaiFail.visible=this._giveuped.visible=!1},t.WATCHER=0,t.NOT_READY=1,t.READYED=2,t.NOT_LOOK=3,t.LOOKED=4,t.GIVEUP=5,t.GIVEUP2=6,t}(BasePlayerView);__reflect(PlayerView.prototype,"PlayerView");var HashMap=function(){function e(){this._dict=null,this._keyList=null,this._dict={},this._keyList=[]}return e.prototype.put=function(e,t){null!=e?(-1==this._keyList.indexOf(e)&&this._keyList.push(e),this._dict[e]=t):console.log("HashMap::Cannot put a value with undefined or null key!")},e.prototype.remove=function(e){var t=this._keyList.indexOf(e);return this._dict[e]&&delete this._dict[e],this._keyList.splice(t,1)},e.prototype.clear=function(){this._keyList.length=0,this._keyList=[];for(var e in this._dict)delete this._dict[e]},e.prototype.get=function(e){return this._dict[e]},Object.defineProperty(e.prototype,"keys",{get:function(){return this._keyList},enumerable:!0,configurable:!0}),e.prototype.values=function(){for(var e=this.keys.length,t=[],i=0;e>i;i++)t=t.concat(this.get(this.keys[i]));return t},e.prototype.indexOf=function(e){var t=0;for(var i in this._dict){if(this._dict[this._dict[i]]==e)return t;t++}return-1},e.prototype.size=function(){return this._keyList.length},e.prototype.isEmpty=function(){return 0==this._keyList.length},e.prototype.clone=function(){var t=new e;for(var i in this._keyList)t.keys.push(this._keyList[i]),t.put(this._keyList[i],this._dict[this._keyList[i]]);return t},e.prototype.containsKey=function(e){for(var t in this._keyList)if(this._keyList[t]===e)return!0;return!1},e.prototype.containsValue=function(e){for(var t in this._dict)if(this._dict[t]===e)return!0;return!1},e.prototype.toString=function(){var e="HashMap Content:\n";for(var t in this._keyList)e+=t+" -> "+this._dict[this._keyList[t]]+"\n";return e},e}();__reflect(HashMap.prototype,"HashMap");var BaseBattleUIView=function(e){function t(){var t=e.call(this)||this;return t._curRound=1,t._totalRound=1,t.initView(),t}return __extends(t,e),t.prototype.initView=function(){},t}(egret.Sprite);__reflect(BaseBattleUIView.prototype,"BaseBattleUIView");var BaseGameView=function(e){function t(){var t=e.call(this)||this;return t._data=null,t._gameStatus=-1,t._isShowChat=!1,t._playerDataHash=new HashMap,t.initView(),t}return __extends(t,e),t.prototype.getView=function(){return this},Object.defineProperty(t.prototype,"isShowChat",{set:function(e){this._isShowChat=e},enumerable:!0,configurable:!0}),t.prototype.getData=function(){return this._data},t.prototype.initView=function(){this.touchEnabled=!0},t.prototype.dispose=function(){},t.prototype.getPlayerInfoById=function(e){return this._playerDataHash.get(e)},t.prototype.init=function(e){},t}(egret.Sprite);__reflect(BaseGameView.prototype,"BaseGameView",["IGame"]);var ShareView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShareSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t)},t.prototype.show=function(){this.bindButton(this.sharePublicBtn),this.bindButton(this.shareWechatBtn)},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t),t==this.shareWechatBtn?egret.ExternalInterface.call("shareToFriend",GameGlobal.shareTitle+"|"+GameGlobal.shareDesc):t==this.sharePublicBtn&&egret.ExternalInterface.call("share",GameGlobal.shareTitle+"|"+GameGlobal.shareDesc)},t}(IFrameBase);__reflect(ShareView.prototype,"ShareView");var DataLoading=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.show=function(){GameGlobal.stage.addChild(this)},t.prototype.hide=function(){this.stage&&GameGlobal.stage.removeChild(this)},t.prototype.initView=function(){this._bg=new egret.Shape,this._bg.graphics.beginFill(0,.1),this._bg.graphics.drawRect(0,0,GameGlobal.stage.stageWidth,GameGlobal.stage.stageHeight),this._bg.graphics.endFill(),this.addChild(this._bg),this.touchEnabled=!0,this._icon2=new egret.Bitmap,this._icon2.texture=RES.getRes("hall_json.dataLoading"),this.addChild(this._icon2),this._icon2.anchorOffsetX=.5*this._icon2.width,this._icon2.anchorOffsetY=.5*this._icon2.height,this._icon2.x=.5*GameGlobal.stage.stageWidth,this._icon2.y=.5*GameGlobal.stage.stageHeight,egret.Tween.get(this._icon2,{loop:!0}).to({rotation:360},800)},t._instance=null,t}(egret.Sprite);__reflect(DataLoading.prototype,"DataLoading");var DBitmapNumber=function(e){function t(t,i,n){void 0===i&&(i=10),void 0===n&&(n=1);var a=e.call(this)||this;return a._type=1,a._value=1,a._xspacing=10,a._value=t,a._xspacing=i,a._type=n,a.updateView(),a}return __extends(t,e),t.prototype.setValue=function(e){this._value=e,this.updateView()},t.prototype.updateView=function(){this.removeChildren();var e=this._value.toString();this._value>0&&(e="+"+e);for(var t,i=e.length,n=0;i>n;n++){var a=e.charAt(n);t=new NumImg,"-"==a||"+"==a?t.setNum(this._type,"f"):t.setNum(this._type,Number(a)),t.x=n*this._xspacing,this.addChild(t)}},t}(egret.Sprite);__reflect(DBitmapNumber.prototype,"DBitmapNumber");var DButton=function(e){function t(t,i){void 0===i&&(i="");var n=e.call(this)||this;return n._disableSkinName="",n._defaultSkinName="",n._isEnabled=!0,n._defaultSkinName=t,n._disableSkinName=i,n._skin=new egret.Bitmap(RES.getRes(t)),n.addChild(n._skin),n.touchEnabled=!0,n.touchChildren=!1,n.addEventListener(egret.TouchEvent.TOUCH_TAP,n.onTouchTap,n),n}return __extends(t,e),t.prototype.onTouchTap=function(e){SoundManager.instance.playSound("button_mp3")},t.prototype.setEnabled=function(e){this._isEnabled=e,this._isEnabled?this._skin.texture=RES.getRes(this._defaultSkinName):this._skin.texture=RES.getRes(this._disableSkinName),this.touchEnabled=this.touchChildren=e},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.setSkin=function(e,t){void 0===t&&(t=""),this._defaultSkinName=e,this._disableSkinName=t,this._skin.texture=RES.getRes(e),this.setEnabled(this._isEnabled)},t}(DComponent);__reflect(DButton.prototype,"DButton");var DCheckBox=function(e){function t(){var t=e.call(this)||this;return t._selected=!1,t._chkImgName="hall_json.checkbox_default",t._chkImgName2="hall_json.checkbox_select",t.initView(),t}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this._skin.texture=this._selected?RES.getRes(this._chkImgName2):RES.getRes(this._chkImgName)},enumerable:!0,configurable:!0}),t.prototype.setLabel=function(e,t,i,n){void 0===t&&(t=!0),void 0===i&&(i=1),void 0===n&&(n=-1),t?(this._label.texture=RES.getRes(e),this._label.x=i,this._label.y=n):(null==this._labelTF&&(this._labelTF=new egret.TextField),this._labelTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._labelTF.textColor=9063179,this._labelTF.size=21,this._labelTF.textAlign=egret.HorizontalAlign.LEFT,this._labelTF.x=i,this._labelTF.y=n,this._labelTF.text=e,this.addChild(this._labelTF),this._touchAreShape.graphics.clear(),this._touchAreShape.graphics.beginFill(0),this._touchAreShape.graphics.drawRect(0,0,this._labelTF.textWidth+this._label.x+this._skin.width,this._skin.height),this._touchAreShape.graphics.endFill(),this._touchAreShape.visible=!0,this.addChild(this._touchAreShape))},t.prototype.setSkin=function(e,t){this._chkImgName=e,this._chkImgName2=t,this._skin.texture=RES.getRes(e)},t.prototype.initView=function(){var e=this;this.touchEnabled=!0,this._skin=new egret.Bitmap,this._skin.texture=RES.getRes(this._chkImgName),this.addChild(this._skin),this._skin.touchEnabled=!0,this._label=new egret.Bitmap,this._label.x=34,this._label.y=0,this.addChild(this._label),this._label.touchEnabled=!0,this._label.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){XieyiView.getInstance().showView()},this),this._touchAreShape=new egret.Sprite,this._touchAreShape.graphics.beginFill(0),this._touchAreShape.graphics.drawRect(0,0,100,this._skin.height),this._touchAreShape.graphics.endFill(),this.addChild(this._touchAreShape),this._touchAreShape.alpha=0,this._touchAreShape.visible=!1,this._touchAreShape.touchEnabled=!0,this._skin.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.selected=!e.selected,e.dispatchEvent(new DEvent(GameEventManager.SELECTED))},this),this._touchAreShape.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.selected=!e.selected,e.dispatchEvent(new DEvent(GameEventManager.SELECTED))},this)},t}(DComponent);__reflect(DCheckBox.prototype,"DCheckBox");var GameGlobal=function(){function e(){}return e.getGameName=function(e){return 1==e?"牛牛":3==e?"扎金花":""},e.init=function(t,i,n){void 0===n&&(n=null),e.root=t,e.stage=i,n&&(e.debug=1==n.debug,e.version=n.version),e.stage.addEventListener(egret.Event.RESIZE,this.onStageSizeChanged,this,!1,Number.MAX_VALUE),this.onStageSizeChanged()},e.onStageSizeChanged=function(t){void 0===t&&(t=null),e.stageW=e.stage.stageWidth,e.stageH=e.stage.stageHeight,e.halfStageW=e.stageW/2,e.halfStageH=e.stageH/2},e.HTTP_API_URL="http://game.yl.worldwalker.cn/game/",e.UPDATE_VOICE_API="http://game.yl.worldwalker.cn/backend/uploadVoice",e.TUIGUANG_URL="http://game.yl.worldwalker.cn/tg/index.html",e.SOCKET_IP="119.23.57.236",e.SOCKET_PORT=9e3,e.HTTP_PORT=8080,e.CDN_URL="",e.platform="default",e.version="1.2",e.DEFAULT_FONT_NAME="微软雅黑",e.APPName="yule_qipai",e.debug=!1,e.stageW=1136,e.stageH=640,e.useWeixin=!1,e.designW=1136,e.designH=640,e.mapLayer=null,e.mapBGLayer=null,e.mapUILayer=null,e.iframeLayer=null,e.story_flag=!1,e.newbee_flag=!1,e.showVersion=!0,e.ZJH_TYPE=3,e.NIUNIU_TYPE=1,e.gameType=1,e.teahouse_ownerId="",e.isDianXiaoer=0,e.MAX_PLAYER_COUNT=6,e.shareTitle="楚风鱼乐棋牌",e.shareDesc="最地道的本地棋牌强制来袭，经典茶楼模式，和好友一起约局对战，享受...",e.xieyiText="《健康游戏忠告》\n抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。倡导理性消费 享受竞技快乐。 一、协议总则\n1. 本《用户协议》为玩家（即用户）与66电玩游戏中心科技有限公司（以下简称66电玩游戏中心公司）就66电玩游戏中心公司所提供的服务达成的用户协议。66电玩游戏中心公司在此特别提醒用户认真阅读、充分理解本《用户服务协议》（下称《用户协议》）--- 用户应认真阅读、充分理解本《用户协议》中各条款，特别涉及免除或者限制66电玩游戏中心公司责任的免责条款，对用户的权利限制的条款，法律适用、争议解决方式的条款。\n 2. 请用户审慎阅读并选择同意或不同意本《用户协议》，除非用户接受本《用户协议》所有条款，否则用户无权下载、安装、升级、登陆、显示、运行、截屏等方式使用本软件及其相关服务。用户的下载、安装、显示、帐号获取和登录、截屏等行为表明用户自愿接受本用户协议的全部内容并受其约束，不得以任何理由包括但不限于未能认真阅读本用户协议等作为纠纷抗辩理由。\n3. 本《用户协议》可由66电玩游戏中心公司随时更新，更新后的用户协议条款一旦公布即代替原来的用户协议条款，不再另行个别通知。用户可重新下载安装本软件或网站查阅最新版用户协议条款。在66电玩游戏中心公司修改《用户协议》条款后，如果用户不接受修改后的条款，请立即停止使用66电玩游戏中心公司提供的软件和服务，用户继续使用66电玩游戏中心公司提供的软件和服务将被视为已接受了修改后的用户协议。\n 4. 本《用户协议》内容包括但不限于本用户协议以下内容，针对某些具体服务所约定的管理办法、公告、重要提示、指引、说明等均为本用户协议的补充内容，为本用户协议不可分割之组成部分，具有本用户协议同等法律效力，接受本用户协议即视为用户自愿接受以上管理办法、公告、重要提示、指引、说明等并受其约束；否则请用户立即停止使用66电玩游戏中心公司提供的软件和服务。\n 5. 本公司只为用户提供本责任条款内声明的管理服务项目，并保留在非正常情况下有可能导致网站部分功能暂时中断的临时调整处理权，例如网络或服务器故障、计算 机程式错误、外来非法程序入侵、自然灾害、相关国家法律政策变动等，并对此类情况所造成的任何用户帐号资料损失不承担赔偿责任，用户游戏帐号资料将在数据 安全机制范围内受到尽可能完善的保护和备份，用户无权单方面要求帐号资料恢复到某状态。\n 二、特殊规定\n 1. 未满十八周岁的未成年人应经其监护人陪同阅读本服务条款并表示同意，方可接受本服务条款。监护人应加强对未成年人的监督和保护，因其未谨慎履行监护责任而损害未成年人利益或者影响66乐园公司利益的，应由监护人承担责任。\n 2. 青少年用户应遵守全国青少年网络文明公约：要善于网上学习，不浏览不良信息；要诚实友好交流，不侮辱欺诈他人；要增强自护意识，不随意约会网友；要维护网络安全，不破坏网络秩序；要有益身心健康，不沉溺虚拟时空。\n",e}();__reflect(GameGlobal.prototype,"GameGlobal");var DGoldValue=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.prototype.setValue=function(e){this._valueTF.text=e.toString()},t.prototype.setType=function(e){void 0===e&&(e=0),e==t.DIAMOND?this._iconImg.texture=RES.getRes("main_json.diamondIcon"):this._iconImg.texture=RES.getRes("main_json.moneyIcon")},t.prototype.initView=function(){this._bg=new egret.Bitmap,this.addChild(this._bg),this._bg.x=5,this._bg.y=1,this._bg.texture=RES.getRes("main_json.goldValueBg"),this._iconImg=new egret.Bitmap,this.addChild(this._iconImg),this._iconImg.texture=RES.getRes("main_json.moneyIcon"),this._iconImg.x=0,this._iconImg.y=1,this._valueTF=new egret.TextField,this._valueTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._valueTF.size=24,this._valueTF.textColor=16777215,this.addChild(this._valueTF),this._valueTF.textAlign=egret.HorizontalAlign.CENTER,this._valueTF.text="0",this._valueTF.width=126,this._valueTF.x=42,this._valueTF.y=7,this._addBtn=new egret.Bitmap,this._addBtn.touchEnabled=!0,this.addChild(this._addBtn),this._addBtn.x=162,this._addBtn.y=0,this._addBtn.texture=RES.getRes("main_json.main_addicon"),this._addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(e){AlertView.getInstance().show("开发中，敬请期待！")},t.GOLD=0,t.DIAMOND=1,t}(egret.Sprite);__reflect(DGoldValue.prototype,"DGoldValue");var DImage=function(e){function t(t,i,n){void 0===t&&(t=-1),void 0===i&&(i=-1),void 0===n&&(n="hall_json.testface");var a=e.call(this)||this;return a._width=-1,a._height=-1,a._defaultImgRes="",a._width=t,a._height=i,a._defaultImgRes=n,a._img=new egret.Bitmap,a._img.texture=RES.getRes(n),a.addChild(a._img),a._maskImg=new egret.Bitmap,a._maskImg.texture=RES.getRes(n),a.addChild(a._maskImg),a._img.mask=a._maskImg,-1!=t&&-1!=i&&(a._img.width=t,a._img.height=i),a}return __extends(t,e),Object.defineProperty(t.prototype,"defaultImg",{set:function(e){this._defaultImgRes=e,this._img.texture=RES.getRes(e),this._maskImg.texture=RES.getRes(e)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.defaultImg=this._defaultImgRes},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.setWidth=function(e){this._width=e,-1!=e&&(this._img.width=e)},t.prototype.setHeight=function(e){this._height=e,-1!=e&&(this._img.height=e)},t.prototype.load=function(e){this._url=null==e?"":e;var t=new egret.ImageLoader;t.addEventListener(egret.Event.COMPLETE,this.imageComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFaceError,this),t.load(this._url)},t.prototype.onLoadFaceError=function(e){console.log("load face ioerror")},t.prototype.imageComplete=function(e){console.log("load face complete"),this._img.texture=e.target.data,this._img.width=this._width,this._img.height=this._height},t}(egret.Sprite);__reflect(DImage.prototype,"DImage");var DProgressBar=function(e){function t(){var t=e.call(this)||this;return t._maxValue=100,t._value=0,t.initView(),t}return __extends(t,e),t.prototype.initView=function(){this._background=new egret.Bitmap,this._background.texture=RES.getRes("loadingbar_png"),this.addChild(this._background),this._foreground=new egret.Bitmap,this._foreground.texture=RES.getRes("loadingbar2_png"),this.addChild(this._foreground),this._maskImg=new egret.Shape,this._maskImg.graphics.beginFill(0,1),this._maskImg.graphics.drawRect(0,0,this._foreground.width,40),this._maskImg.graphics.endFill(),this.addChild(this._maskImg),this._maskImg.x=7,this._maskImg.y=5,this._foreground.x=7,this._foreground.y=5,this._foreground.mask=this._maskImg},t.prototype.setMaxValue=function(e){this._maxValue=e},t.prototype.setValue=function(e,t){void 0===t&&(t=100),this._value=e,this._maxValue=t;var i=this._value/this._maxValue;this._maskImg.scaleX=i},t}(DComponent);__reflect(DProgressBar.prototype,"DProgressBar");var DTextField=function(){function e(){}return e}();__reflect(DTextField.prototype,"DTextField");var DToggleButton=function(e){function t(){var t=e.call(this)||this;return t._selected=!0,t.initView(),t}return __extends(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),t.prototype.initView=function(){this._bg=new egret.Bitmap,this.addChild(this._bg),this._bg.texture=RES.getRes("ui_json.soundOn"),this._bg2=new egret.Bitmap,this.addChild(this._bg2),this._bg2.texture=RES.getRes("ui_json.soundOff"),this._bg2.visible=!1,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(e){this._selected=!this._selected,this._selected?(this._bg.visible=!0,this._bg2.visible=!1):(this._bg.visible=!1,this._bg2.visible=!0),this.dispatchEvent(new DEvent(DEvent.CHANGE))},t}(DComponent);__reflect(DToggleButton.prototype,"DToggleButton");var MessagePop=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.show=function(e){var i;i=t.pool.length>0?t.pool.pop():new t,i&&(i.show(e),GameGlobal.topLayer.addChild(i))},t.prototype.show=function(e){this.y=GameGlobal.stage.stageHeight-this.height>>1,this.alpha=1,egret.Tween.get(this).wait(1e3).to({y:this.y-100,alpha:0},1e3,egret.Ease.quadIn).call(this.tweenEnd,this)},t.prototype.tweenEnd=function(){this.parent&&(this.parent.removeChild(this),t.pool.push(this))},t.prototype.initView=function(){this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("messageBg_png"),this.addChild(this._bg),this._contentTF=new egret.TextField,this._contentTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._contentTF.textColor=0,this._contentTF.size=30,this._contentTF.text="message...",this.addChild(this._contentTF)},t.pool=[],t}(DComponent);__reflect(MessagePop.prototype,"MessagePop");var NumImg=function(e){function t(){var t=e.call(this)||this;return t._type=1,t.initView(),t}return __extends(t,e),t.prototype.initView=function(){this._img=new egret.Bitmap,this.addChild(this._img)},t.prototype.setNum=function(e,t){this._num=t,this._img.texture=RES.getRes("num"+e+"_json.num"+e+"_"+t)},t}(egret.Sprite);__reflect(NumImg.prototype,"NumImg");var DStrings=function(){function e(){}return e.FCM_TIP="抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",e}();__reflect(DStrings.prototype,"DStrings");var NNPlayerType=function(){function e(){}return e.getPokerTypeStrBySererNum=function(t){return e.POKER_TYPE_IMGS[t]},e.getPokerTypeName=function(t){return e.POKER_TYPE_NAMES[t]},e.getPokerType=function(t){var i={cards:t,type:0,power:0};if(null==t||5!=t.length)return i;var n=e.getMaxValue(t),a=e.getSameCount(t);if(1==a.length){var s=a[0];if(4==s.count)return i.type=e.BOMB_NIU,i.power=s.value,i}var o=e.getSum(t);if(t.every(function(e,t,i){return 5>e})&&10>=o)return i.type=e.FIVE_XIAONIU,i.power=n,i;if(t.every(function(e,t,i){return e>10}))return i.type=e.JIN_NIU,i.power=n,i;for(var r=e.makeBiggerToEqualTen(t),h=!1,l=0;3>l;l++)for(var c=l+1;4>c;c++)for(var d=c+1;5>d;d++)if(o=e.getSum([r[l],r[c],r[d]]),o%10==0){h=!0,r.splice(l,1),r.splice(c,1),r.splice(d,1);break}if(h){o=e.getSum(r);var u=o%10;0==u?(i.type=e.NIU10,i.power=10):(9==u?i.type=e.NIU9:8==u&&(i.type=e.NIU8),i.power=u)}return i},e.makeBiggerToEqualTen=function(e){for(var t=e.length,i=e.concat(),n=0;t>n;n++)i[n]=i[n]>10?10:i[n];return i},e.getMaxValue=function(e){for(var t=0,i=e.length,n=0;i>n;n++){var a=e[n];a>t&&(t=a)}return t},e.getSum=function(e){for(var t=0,i=e.length,n=0;i>n;n++)t+=e[n];return t},e.getSameCount=function(e){if(null==e)throw new Error("param is null!!!");var t=e.concat();t.sort(),console.log("copyCards = "+t);for(var i=1,n=e.length,a=[],s=0;n>s;){i=0;for(var o=s;n>o;o++)t[s]==t[o]&&i++;a.push({value:t[s],count:i}),s+=i}return a},e.BOMB_NIU=14,e.FIVE_XIAONIU=13,e.JIN_NIU=12,e.NIU10=11,e.NIU9=10,e.NIU8=9,e.NIU7=8,e.NIU6=7,e.NIU5=6,e.NIU4=5,e.NIU3=4,e.NIU2=3,e.NIU1=2,e.NIU0=1,e.ERROR=0,e.POKER_TYPE_IMGS=["niu0","niu1","niu2","niu3","niu4","niu5","niu6","niu7","niu8","niu9","niu10","jinniu","wuxiaoniu","zdn"],e.POKER_TYPE_NAMES=["没牛","牛一","牛二","牛三","牛四","牛五","牛六","牛七","牛八","牛九","牛牛","金牛","五小牛","炸弹牛"],e}();__reflect(NNPlayerType.prototype,"NNPlayerType");var PlayerType=function(){function e(){}return e.getPokerTypeName=function(t){var i="普通牌";switch(t){case e.NORMAL:i="普通牌";break;case e.DOUBLE:i="对子";break;case e.STRAIGHT:i="顺子";break;case e.FLUSH:i="金花";break;case e.STRAIGHT_FLUSH:i="同花顺";break;case e.BOMB:i="豹子"}return i},e.BOMB=7,e.BOMB_MAX_VALUE=7881,e.STRAIGHT_FLUSH=6,e.STRAIGHT_FLUSH_MAX_VALUE=7867,e.FLUSH=5,e.FLUSH_MAX_VALUE=7855,e.STRAIGHT=4,e.STRAIGHT_MAX_VALUE=4052,e.DOUBLE=3,e.DOUBLE_MAX_VALUE=4040,e.NORMAL=2,e.NORMAL_MAX_VALUE=3803,e}();__reflect(PlayerType.prototype,"PlayerType");
var Card=function(){function e(e,t){this._num=0,this._color=0,this._num=e,this._color=t}return e.prototype.setNum=function(e){this._num=e},e.prototype.getNum=function(){return this._num},e.prototype.setColor=function(e){this._color=e},e.prototype.getColor=function(){return this._color},e.HEITAO=4,e.HONGTAO=3,e.MEIHUA=2,e.FANGKUAI=1,e.NUM_A=14,e.NUM_K=13,e.NUM_Q=12,e.NUM_J=11,e.NUM_10=10,e.NUM_9=9,e.NUM_8=8,e.NUM_7=7,e.NUM_6=6,e.NUM_5=5,e.NUM_4=4,e.NUM_3=3,e.NUM_2=2,e}();__reflect(Card.prototype,"Card");var GameModel=function(e){function t(){var t=e.call(this)||this;return t.fromUserId="",t.fromRoomId="",t.token="",t.code="0116zWq81mjA1Q19fAr81nz8r816zWqx",t.deviceType="android",t.roomId=0,t.myOrder=1,t.teaHouseNum=0,t}return __extends(t,e),t.instance=function(){return t._instance||(t._instance=new t)},t._instance=null,t}(egret.EventDispatcher);__reflect(GameModel.prototype,"GameModel");var MyUserInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.longitude="",t.latitude="",t.city="",t.mySideId=0,t._userName="",t._gender=0,t._lv=1,t._exp=0,t._gold=0,t._diamond=0,t._userId="",t._ip="127.0.0.1",t._mobile="",t._faceUrl="",t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"userName",{get:function(){return this._userName},enumerable:!0,configurable:!0}),t.prototype.getFormatUserName=function(e){var t=StringUtils.getStringLen(this._userName);return t>e&&e>=3?this._userName.substr(0,e-3)+"...":this._userName},Object.defineProperty(t.prototype,"gender",{get:function(){return this._gender},set:function(e){this._gender=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._lv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gold",{get:function(){return this._gold},set:function(e){this._gold=e,GameEventManager.dispatchEvent(GameEventManager.UPDATE_USER_GOLD)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"diamond",{get:function(){return this._diamond},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ip",{get:function(){return this._ip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mobile",{get:function(){return this._mobile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"faceUrl",{get:function(){return this._faceUrl},set:function(e){this._faceUrl=e},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this._userId=e.playerId,this._userName=e.nickName,this._gold=e.roomCardNum,this._faceUrl=e.headImgUrl,this._lv=e.level},t}(egret.EventDispatcher);__reflect(MyUserInfo.prototype,"MyUserInfo");var DEvent=function(e){function t(t,i,n,a){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===a&&(a=!1);var s=e.call(this,t,n,a)||this;return s.data=i,s}return __extends(t,e),t.ACTION_CHANGE="action_change",t.CARD_ACTION_CHANGE="card_action_change",t.USER_SELECT_CARDS_UPDATE="user_select_cards_update",t.BET_ACTION="betAction",t}(egret.Event);__reflect(DEvent.prototype,"DEvent");var AbstractIFrame=function(e){function t(){var t=e.call(this)||this;return t._modal=!0,t.touchEnabled=!0,t}return __extends(t,e),t.prototype.getIframeName=function(){return this._iframeName},t.prototype.setIframeName=function(e){this._iframeName=e},t.prototype.setModal=function(e){this._modal=e,this._drawModalArea()},t.prototype.isModal=function(){return this._modal},t.prototype._drawModalArea=function(){},t.prototype.onShow=function(){},t.prototype.onShowComplete=function(){},t.prototype.onStop=function(){},t.prototype.onStopComplete=function(){},t.prototype.getSelf=function(){return this},t.prototype.getWidth=function(){return this._frameWidth},t.prototype.getHeight=function(){return this._frameHeight},t.prototype.showNewbeeGuide=function(){return!1},t}(egret.Sprite);__reflect(AbstractIFrame.prototype,"AbstractIFrame");var FullScreenIFrame=function(e){function t(){var t=e.call(this)||this;return t.showTweenEffect=!0,t.isFullScene=!0,t.percentHeight=100,t.percentWidth=100,t}return __extends(t,e),t.prototype.tweenShow=function(){this.alpha=1,this.x=GameGlobal.stageW,egret.Tween.removeTweens(this),egret.Tween.get(this).to({x:0},200)},t.prototype.tweenRemove=function(){this.alpha=1,egret.Tween.removeTweens(this),egret.Tween.get(this).to({alpha:0},200).call(this.tweenRemoveComp,this)},t}(IFrameBase);__reflect(FullScreenIFrame.prototype,"FullScreenIFrame");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.showLogin=function(){this._progressBar.visible=!1,this._wxLoginBtn=new DButton("hall_json.wxLoginBtn"),this.addChild(this._wxLoginBtn),this._wxLoginBtn.y=428,this._wxLoginBtn.x=GameGlobal.stageW-this._wxLoginBtn.width>>1,this._xieyiCB=new DCheckBox,this._xieyiCB.setLabel("hall_json.xieyiTextBtn",!0,50,4),this.addChild(this._xieyiCB),this._xieyiCB.x=GameGlobal.stageW-this._xieyiCB.width>>1,this._xieyiCB.y=505,this._xieyiCB.selected=!0,this._xieyiCB.addEventListener(GameEventManager.SELECTED,this.onSelected,this),this._wxLoginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onSelected=function(e){},t.prototype.onTouchTap=function(e){if(!this._xieyiCB.selected)return void AlertView.getInstance().show("请勾选阅读用户协议！");if(GameGlobal.debug)return void GameEventManager.dispatchEvent(GameEventManager.LOGIN_SUCCESS);if(DUtils.isNative())egret.ExternalInterface.call("login","微信登录啦！！！");else{var t=new CommandVo;t.action=HttpCommand.LOGIN,HttpCommand.send(t,this,this.loginResponse)}},t.prototype.loginResponse=function(e){var t=e.data;MyUserInfo.getInstance().init(t),GameGlobal.SOCKET_IP=t.serverIp,GameGlobal.SOCKET_PORT=t.port,GameModel.instance().token=t.token,egret.ExternalInterface.call("sendToken","http://"+GameGlobal.SOCKET_IP+":"+GameGlobal.SOCKET_PORT+"/game/upload|"+GameModel.instance().token),t.hasOwnProperty("roomId")&&null!=t.roomId&&(GameModel.instance().roomId=t.roomId),GameEventManager.dispatchEvent(GameEventManager.LOGIN_SUCCESS,e)},t.prototype.startLoad=function(){this._wxLoginBtn&&this._wxLoginBtn.stage||(this._progressBar.visible=!0)},t.prototype.resize=function(){this._progressBar&&(this._progressBar.x=GameGlobal.stageW-704)},t.prototype.createView=function(){var e=this;this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("login_bg_jpg"),this.addChild(this._bg),this._bg.width=GameGlobal.stage.stageWidth,this._bg.height=GameGlobal.stage.stageHeight,this._logo=new egret.Bitmap,this._logo.texture=RES.getRes("logo_png"),this._logo.y=31,this.addChild(this._logo),this._logo.x=GameGlobal.stageW-this._logo.width>>1;var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawRect(0,0,this._logo.width,this._logo.height),t.graphics.endFill(),this.addChild(t),t.x=this._logo.x-this._logo.width,t.y=this._logo.y,this._logo.mask=t,this._progressBar=new DProgressBar,this._progressBar.setValue(0),this.addChild(this._progressBar),this._progressBar.y=500,this._progressBar.visible=!1,egret.Tween.get(t).to({x:this._logo.x},500).call(function(){e.startLoad()},this),this._tipImg=DUtils.createBitmapByName("playerNotice_txt_png"),this.addChild(this._tipImg),this._tipImg.x=GameGlobal.stageW-this._tipImg.width>>1,this._tipImg.y=568,this.resize()},t.prototype.setProgress=function(e,t){this._progressBar.setValue(e,t)},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var IFrameLayer=function(e){function t(){var t=e.call(this)||this;return t.openList=[],t.fullSceneList=[],t.viewList=[],t}return __extends(t,e),t.prototype.showIFrame=function(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1);var a=this.getIFrame(e);if(a)return console.log("win = "+e+", aleady opened!!!"),a.uiOpenData=t,a;for(var s=0,o=this.viewList.length;o>s;s++)if(a=this.viewList[s],a instanceof e)return a.uiOpenData=t,this.addIFrame(a,i,n),a;return a=new e,a.UIClass=e,a.uiOpenData=t,a.groupNames&&a.groupNames.length>0?this.loadIFrameRes(a,i,n):this.addIFrame(a,i,n),a},t.prototype.loadIFrameRes=function(e,t,i){DataLoading.getInstance().show(),this.loadwin=e,this.loadwinparent=t,this.loadwinisback=i,this.groupNames=e.groupNames.concat(),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadErr,this);for(var n=this.groupNames.concat(),a=0;a<n.length;a++)RES.loadGroup(n[a])},t.prototype.onResourceLoadComplete=function(e){var t=this.groupNames.indexOf(e.groupName);-1!=t&&this.groupNames.splice(t,1),0==this.groupNames.length&&(this.clearListener(),this.loadwin&&(this.addIFrame(this.loadwin,this.loadwinparent,this.loadwinisback),this.loadwin=null,this.loadwinparent=null))},t.prototype.onResourceLoadErr=function(e){AlertView.getInstance().show("网络不稳定引响预置加载:"+e.groupName+"失败!");var t=this.groupNames.indexOf(e.groupName);-1!=t&&this.groupNames.splice(t,1),0==this.groupNames.length&&(this.clearListener(),this.loadwin&&(this.loadwin.dispose(),this.loadwin=null,this.loadwinparent=null))},t.prototype.clearListener=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadErr,this),DataLoading.getInstance().hide()},t.prototype.addIFrame=function(e,t,i){var n=e.initialized;t?t.addChild(e):this.addChild(e),n&&e.addToParent(),e.isFullScene&&(this.currentFullScene&&this.currentFullScene!=e&&(i||this.fullSceneList.push(this.currentFullScene.UIClass),this.hideIFrame(this.currentFullScene)),this.currentFullScene=e),this.openList.push(e)},t.prototype.backIframe=function(){var e=this.fullSceneList.pop();e&&this.showIFrame(e,null,null,!0)},t.prototype.hideIFrame=function(e){var t=this.openList.indexOf(e);-1!=t&&this.openList.splice(t,1),t=this.viewList.indexOf(e),-1==t&&this.viewList.push(e),e.tweenRemove()},t.prototype.hideIFrame2=function(e){var t=this.getIFrame(e);t&&this.hideIFrame(t)},t.prototype.closeAllIFrame=function(){for(var e=0,t=this.openList.length;t>e;e++){var i=this.openList[e];i.removeFromParent(!0)}this.openList=[]},t.prototype.getIFrame=function(e){for(var t=0,i=this.openList.length;i>t;t++){var n=this.openList[t];if(n instanceof e)return n}},t}(egret.DisplayObjectContainer);__reflect(IFrameLayer.prototype,"IFrameLayer");var MapBgLayer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.Sprite);__reflect(MapBgLayer.prototype,"MapBgLayer");var MapLayer=function(e){function t(){var t=e.call(this)||this;return t.nnBattleView=null,GameGlobal.mapBGLayer=new MapBgLayer,t.addChild(GameGlobal.mapBGLayer),GameEventManager.addEvent(NetAction.dissolveRoom.toString(),t.dissolveRoomResponse,t),GameEventManager.addEvent(NetAction.dissolveRoomSuccess.toString(),t.dissolveRoomSuccessResponse,t),GameEventManager.addEvent(GameEventManager.QUIT_ROOM,t.onQuitGame,t),t}return __extends(t,e),t.prototype.onQuitGame=function(e){this.hideBattle(),GameGlobal.mapUILayer.visible=!0,SoundManager.instance.playMusic("hall_mp3")},t.prototype.dissolveRoomResponse=function(e){var t=e.data,i=t.data,n=i.playerId;if(n!=MyUserInfo.getInstance().userId){var a=this.getBattle().getPlayerInfoById(n),s=a.nickName;AlertView.getInstance().setConfirmCallBack(this.agreeDissolveRoom,this),AlertView.getInstance().setCancelCallBack(this.disagreeDissolveRoom,this),AlertView.getInstance().show("玩家"+s+"请求解散房间，是否同意？",AlertView.CONFIRM_MODE)}},t.prototype.agreeDissolveRoom=function(){var e={};e.msgType=NetAction.agreeDissolveRoom,e.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(e)},t.prototype.disagreeDissolveRoom=function(){var e={};e.msgType=NetAction.disagreeDissolveRoom,e.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(e)},t.prototype.dissolveRoomSuccessResponse=function(e){e.data;this.hideBattle(),GameGlobal.mapUILayer.visible=!0,SoundManager.instance.playMusic("hall_mp3")},t.prototype.hideBattle=function(){this._gameView&&this._gameView.stage&&(this._gameView.dispose(),this.removeChild(this._gameView.getView()),this._gameView=null),this.nnBattleView&&this.nnBattleView.stage&&(this.nnBattleView.dispose(),this.removeChild(this.nnBattleView)),GameGlobal.iframeLayer.hideIFrame2(GameResult),GameGlobal.iframeLayer.hideIFrame2(JieSuanView),GameGlobal.iframeLayer.hideIFrame2(NNGameResult),BiPaiView.isShow&&BiPaiView.getInstance().hide()},t.prototype.getBattle=function(){return this._gameView&&this._gameView.stage?this._gameView:this.nnBattleView&&this.nnBattleView.stage?this.nnBattleView:null},t.prototype.showBattle=function(e){void 0===e&&(e=null),this.hideBattle(),3==GameGlobal.gameType?(this._gameView=new ZjhBattleView,this.addChild(this._gameView.getView()),this._gameView.init(e)):1==GameGlobal.gameType&&(null==this.nnBattleView&&(this.nnBattleView=new NNBattleView),this.addChild(this.nnBattleView),this.nnBattleView.init(e))},t}(eui.Component);__reflect(MapLayer.prototype,"MapLayer");var MapUILayer=function(e){function t(){var t=e.call(this)||this;return t._battleData=null,t.getCurrentLoadBattleRes="niuniu",t.battleCommonRes="common",t._callback=null,t.touchEnabled=!0,t.initView(),t}return __extends(t,e),t.prototype.resize=function(){this._hallView&&this._hallView.resize()},t.prototype.startBattle=function(e){GameGlobal.iframeLayer.closeAllIFrame(),this._battleData=e,null!=this._battleData&&(GameGlobal.gameType==GameGlobal.NIUNIU_TYPE?this.getCurrentLoadBattleRes="niuniu":this.getCurrentLoadBattleRes="zjh",this._callback=this.onEnterBattle,this.showLoading())},t.prototype.showLoading=function(){RES.isGroupLoaded(this.getCurrentLoadBattleRes)?this.onLoadResComplete2():(RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onLoadResProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onLoadResComplete,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onLoadResError,this),GameLoadingView.getInstance().show(),RES.loadGroup(this.battleCommonRes,1))},t.prototype.onLoadResProgress=function(e){GameLoadingView.getInstance().setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.onLoadResComplete=function(e){e.groupName==this.battleCommonRes?RES.loadGroup(this.getCurrentLoadBattleRes,1):this.onLoadResComplete2()},t.prototype.onLoadResComplete2=function(){GameLoadingView.getInstance().hide(),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onLoadResProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onLoadResComplete,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onLoadResError,this),this._callback&&this._callback.apply(this)},t.prototype.onLoadResError=function(e){LogUtils.log(e.groupName+"加载失败！")},t.prototype.onQuitTeahouse=function(e){},t.prototype.initView=function(){if(GameEventManager.addEvent(NetAction.createRoom.toString(),this.onCreateRoomResponse,this),GameEventManager.addEvent(NetAction.teahouse_create.toString(),this.onCreateTeahouseResponse,this),GameEventManager.addEvent(NetAction.teahouse_join.toString(),this.onJoinTeahouseResponse,this),GameEventManager.addEvent(NetAction.teahouse_quit.toString(),this.onQuitTeahouse,this),GameEventManager.addEvent(NetAction.enterRoom.toString(),this.onEnterRoomResponse,this),GameEventManager.addEvent(GameEventManager.SOCKET_CONNECTED,this.onSocketConnected,this),GameEventManager.addEvent(NetAction.refreshRoom.toString(),this.onRefreshRoomResponse,this),GameEventManager.addEvent(NetAction.enterHall.toString(),this.onEnterHallResponse,this),GameEventManager.addEvent(NetAction.updateFangKa.toString(),this.onUpdateFangKaResponse,this),GameEventManager.addEvent(NetAction.teahouse_backToHall.toString(),this.onQuitTeahouseToHall,this),GameEventManager.addEvent(NetAction.teahouse_enter.toString(),this.onTeahouseEnterResponse,this),0!=GameModel.instance().roomId)this.refreshRoom();else if(0!=GameModel.instance().teaHouseNum){var e={};e.msgType=NetAction.teahouse_enter,e.gameType=0,e.msg={teaHouseNum:GameModel.instance().teaHouseNum},SocketCommand.getInstance().send(e)}else this.showHallView()},t.prototype.onTeahouseEnterResponse=function(e){var t=e.data,i=t.data;GameModel.instance().teaHouseNum=i.teaHouseNum,this.showTeahouseView(i)},t.prototype.onQuitTeahouseToHall=function(e){var t=e.data;t.data;this.showHallView()},t.prototype.onJoinTeahouseResponse=function(e){var t=e.data;t.data;GameGlobal.iframeLayer.hideIFrame2(JoinTeahouseView),AlertView.getInstance().show("茶楼加入请求已发出，等待审核！",AlertView.ALERT_MODE)},t.prototype.showHallView=function(){null==this._hallView&&(this._hallView=new HallView),this.addChild(this._hallView),this._hallView.show(),SoundManager.instance.playMusic("hall_mp3"),this._teahouseView&&this._teahouseView.parent&&(this._teahouseView.dispose(),this._teahouseView.parent.removeChild(this._teahouseView),GameGlobal.iframeLayer.hideIFrame2(TeahouseManagerView))},t.prototype.showTeahouseView=function(e){GameGlobal.iframeLayer&&(GameGlobal.iframeLayer.hideIFrame2(CreateTeahouseView),GameGlobal.iframeLayer.hideIFrame2(JoinTeahouseView)),null==this._teahouseView&&(this._teahouseView=new TeahouseView),this.addChild(this._teahouseView),this._teahouseView.init(e),GameGlobal.mapUILayer.visible=!0,SoundManager.instance.playMusic("hall_mp3"),this._hallView&&this._hallView.parent&&this._hallView.parent.removeChild(this._hallView)},t.prototype.onUpdateFangKaResponse=function(e){var t=e.data,i=t.data,n=i.roomCardNum,a=i.playerId;a==MyUserInfo.getInstance().userId&&(MyUserInfo.getInstance().gold=n)},t.prototype.onEnterHallResponse=function(e){GameGlobal.mapLayer.hideBattle(),GameGlobal.mapUILayer.visible=!0},t.prototype.onSocketConnected=function(e){DataLoading.getInstance().hide(),this.refreshRoom()},t.prototype.refreshRoom=function(){var e={};e.msgType=NetAction.refreshRoom,e.msg={refreshType:1},e.gameType=0,SocketCommand.getInstance().send(e)},t.prototype.onRefreshRoomResponse=function(e){var t=e.data,i=t.data;i.status;this.startBattle(i)},t.prototype.onEnterRoomResponse=function(e){var t=e.data,i=t.data;this.startBattle(i)},t.prototype.onCreateRoomResponse=function(e){var t=e.data,i=t.data;this.startBattle(i)},t.prototype.onCreateTeahouseResponse=function(e){var t=e.data,i=t.data;GameModel.instance().teaHouseNum=i.teaHouseNum,this.showTeahouseView(i)},t.prototype.onEnterBattle=function(){GameGlobal.mapUILayer.visible=!1,GameGlobal.mapLayer.showBattle(this._battleData)},t}(egret.DisplayObjectContainer);__reflect(MapUILayer.prototype,"MapUILayer");var NewbeeGuideLayer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(NewbeeGuideLayer.prototype,"NewbeeGuideLayer");var TopLayer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(TopLayer.prototype,"TopLayer");var CookieManager=function(){function e(){}return e.write=function(t,i){var n=e.COOKIE_NAME+t.toString();egret.localStorage.setItem(n,i.toString())},e.read=function(t){var i=e.COOKIE_NAME+t.toString();egret.localStorage.getItem(i)},e.remove=function(t){var i=e.COOKIE_NAME+t.toString();egret.localStorage.removeItem(i)},e.clear=function(){egret.localStorage.clear()},e.COOKIE_NAME="zhongle-qipai",e}();__reflect(CookieManager.prototype,"CookieManager");var EnterFrameManager=function(){function e(){}return e.addEnterFrameHandler=function(e,t,i){void 0===i&&(i=null),0==this._handlers.length&&this._sprite.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this,!1,Number.MAX_VALUE),this._handlers.push(e),this._params.push(i),this._thisObjs.push(t)},e.enterFrameHandler=function(e){for(this._adjustFlag=!0,this._handlerCount=this._handlers.length,this._handlerIndex=0;this._handlerIndex<this._handlerCount;this._handlerIndex++){var t=this._handlers[this._handlerIndex],i=this._params[this._handlerIndex];i?t.apply(this._thisObjs[this._handlerIndex],i):t.apply(this._thisObjs[this._handlerIndex])}this._adjustFlag=!1},e.removeEnterFrameHandler=function(e){var t=this._handlers.indexOf(e);-1!=t&&(this._handlers.splice(t,1),this._params.splice(t,1),this._thisObjs.splice(t,1),this._adjustFlag&&(this._handlerCount--,t<=this._handlerIndex&&this._handlerIndex--),0==this._handlers.length&&this._sprite.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this))},e.hasEnterFrameHandler=function(e){return-1!=this._handlers.indexOf(e)},e._sprite=new egret.Sprite,e._handlers=new Array,e._params=new Array,e._handlerIndex=0,e._handlerCount=0,e._adjustFlag=!1,e._thisObjs=[],e}();__reflect(EnterFrameManager.prototype,"EnterFrameManager");var GameEventManager=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t)},t.addEvent=function(e,i,n){t.getInstance().addEventListener(e,i,n)},t.removeEvent=function(e,i,n){t.getInstance().removeEventListener(e,i,n)},t.dispatchEvent=function(e,i){void 0===i&&(i=null),t.getInstance().dispatchEvent(new DEvent(e,i))},t._instance=null,t.COMPLETE="complete",t.SELECTED="selected",t.CONTINUE_GAME="continue_game",t.START_BATTLE="start_battle",t.END_BATTLE="end_battle",t.UPDATE_RANK="update_rank",t.UPDATE_USER_GOLD="update_user_gold",t.UPDATE_USER_DIAMOND="update_user_diamond",t.UPDATE_USER_LEVEL="update_user_level",t.SOCKET_CONNECTED="socket_connected",t.LOGIN_SUCCESS="login_success",t.NEXT_ROUND="next_round",t.QUIT_ROOM="quit_room",t.SHOW_LAST_POKER="show_last_poker",t}(egret.EventDispatcher);__reflect(GameEventManager.prototype,"GameEventManager");var ObjectPool=function(){function e(){this._objTable=new HashMap}return e.prototype.getObject=function(e){var t=e.key;console.log(t);var i,n=this._objTable.get(t);return null==n||0==n.length?(i=new e,i.key=t,i):n.pop()},e.prototype.putObject=function(e){var t=e.key,i=this._objTable.get(t);null==i&&this._objTable.put(t,i=new Array),i.push(e)},e}();__reflect(ObjectPool.prototype,"ObjectPool");var SoundManager=function(e){function t(){var t=e.call(this)||this;return t._isMusicOn=!0,t._isSoundOn=!0,t._bgmVoice=.5,t._currentSoundChannel=null,t._currentSoundName="",t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.playMusic=function(e,t){void 0===t&&(t=.5),this.isMusicOn&&(this.stopMusic(),this._bgmVoice=t,this._bgSound=RES.getRes(e),this._bgSoundChannel=this._bgSound.play(0,0),this._bgSoundChannel.volume=this._bgmVoice)},Object.defineProperty(t.prototype,"isMusicOn",{get:function(){return this._isMusicOn},set:function(e){this._isMusicOn!=e&&(this._isMusicOn=e,this._isMusicOn?this._bgSoundChannel&&(this._bgSoundChannel.volume=this._bgmVoice):this._bgSoundChannel&&(this._bgSoundChannel.volume=0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSoundOn",{get:function(){return this._isSoundOn},set:function(e){this._isSoundOn=e},enumerable:!0,configurable:!0}),t.prototype.playSound=function(e,t,i){if(void 0===t&&(t=1),void 0===i&&(i=1),this._isSoundOn){var n=RES.getRes(e);null!=n&&void 0!=n&&(this._currentSoundName=e,this._currentSoundChannel=n.play(0,t),this._currentSoundChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onLoadSoundComplete,this))}},t.prototype.onLoadSoundComplete=function(e){this._currentSoundChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onLoadSoundComplete,this),this.dispatchEvent(new DEvent(DEvent.COMPLETE,this._currentSoundName))},t.prototype.stopSound=function(){null!=this._currentSoundChannel&&this._currentSoundChannel.stop()},t.prototype.stopMusic=function(){null!=this._bgSoundChannel&&this._bgSoundChannel.stop()},t}(egret.EventDispatcher);__reflect(SoundManager.prototype,"SoundManager");var TipsManager;!function(e){function t(e,t,n){void 0===t&&(t=""),void 0===n&&(n=0),i(e),null==this._dict&&(this._dict=[]),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showTips,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.removeTips,this),null==this._dict[e.hashCode]&&(this._dict[e.hashCode]=[]),this._dict[e.hashCode].descStr=t,this._dict[e.hashCode].effectType=n}function i(e){e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showTips,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this),e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.removeTips,this),a(null)}function n(e){var t=e.currentTarget,i="",n=0;if(null==this._tips){null!=this._dict[t.hashCode]&&(i=this._dict[t.hashCode].descStr,n=this._dict[t.hashCode].effectType),this._tips=new TipsPanel(this._dict[t.hashCode].descStr),GameGlobal.stage.contains(this._tips)||GameGlobal.stage.addChild(this._tips);var a=t.parent.localToGlobal(t.x,t.y);switch(a.x=a.x+t.width/2,a.y=a.y-this._tips.height,a.x+this._tips.width>GameGlobal.stage.stageWidth?a.x=GameGlobal.stage.stageWidth-this._tips.width:a.x<0&&(a.x=0),a.y+this._tips.height>GameGlobal.stage.stageHeight?a.y=GameGlobal.stage.stageHeight-this._tips.height:a.y<0&&(a.y=0),this._tips.x=a.x,this._tips.y=a.y,n){case 0:this._tips.alpha=0,egret.Tween.get(this._tips).to({alpha:1},300);break;case 1:this._tips.alpha=0,this._tips.y+=this._tips.height,egret.Tween.get(this._tips).to({alpha:1,y:this._tips.y-this._tips.height},500,egret.Ease.backOut);break;case 2:this._tips.alpha=0,this._tips.x-=this._tips.width,egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x+this._tips.width},500,egret.Ease.backOut);break;case 3:this._tips.alpha=0,this._tips.x+=this._tips.width,egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x-this._tips.width},500,egret.Ease.backOut)}}}function a(e){if(null!=this._tips){var t=function(){GameGlobal.stage.contains(this._tips)&&(GameGlobal.stage.removeChild(this._tips),this._tips=null)};egret.Tween.get(this._tips).to({alpha:0},300).call(t,this)}}e.registerTips=t,e.unRegisterTips=i,e.showTips=n,e.removeTips=a}(TipsManager||(TipsManager={}));var TipsPanel=function(e){function t(t){void 0===t&&(t="");var i=e.call(this)||this;return i.descStr="",i.descStr=t,i.initUI(),i}return __extends(t,e),t.prototype.initUI=function(){this.bg=new egret.Bitmap,this.bg.texture=RES.getRes("tipsBg"),this.addChild(this.bg),this.bg.touchEnabled=!0,this.descTF=new egret.TextField,this.addChild(this.descTF),this.descTF.textColor=16777215,this.descTF.size=20,this.descTF.x=20,this.descTF.y=10,this.descTF.lineSpacing=6,this.descTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this.descTF.text=this.descStr;var e=new egret.Rectangle(5,5,35,35);this.bg.scale9Grid=e,this.bg.width=this.descTF.width+40,this.bg.height=this.descTF.height+20},t}(egret.Sprite);__reflect(TipsPanel.prototype,"TipsPanel");var CreateRoomView2=function(e){function t(){var t=e.call(this)||this;return t._payWay=2,t._round=8,t._zuozhuang=1,t._beishu=1,t.difen=1,t._tabIndex=-1,t.skinName="CreateRoomSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.eightRoundChk.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.sixteenRoundChk.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.payWay1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.payWay2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.tenRoundChk.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.tweentyRoundChk.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.zuozhuang1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.zuozhuang2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.zuozhuang3.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.zuozhuang4.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.beishu1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.beishu2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.beishu3.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.difen1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.difen2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.difen3.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.pay1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.pay2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this)},t.prototype.CheckBoxChange=function(e){e.currentTarget==this.eightRoundChk?(this.eightRoundChk.selected=!0,this.sixteenRoundChk.selected=!1,this._round=8):e.currentTarget==this.sixteenRoundChk?(this.sixteenRoundChk.selected=!0,this.eightRoundChk.selected=!1,this._round=16):e.currentTarget==this.tenRoundChk?(this.tenRoundChk.selected=!0,this.tweentyRoundChk.selected=!1,this._round=10):e.currentTarget==this.tweentyRoundChk?(this.tweentyRoundChk.selected=!0,this.tenRoundChk.selected=!1,this._round=20):e.currentTarget==this.zuozhuang1?(this.zuozhuang1.selected=!0,this.zuozhuang2.selected=!1,this.zuozhuang3.selected=!1,this.zuozhuang4.selected=!1,this._zuozhuang=1):e.currentTarget==this.zuozhuang2?(this.zuozhuang2.selected=!0,this.zuozhuang1.selected=!1,this.zuozhuang3.selected=!1,this.zuozhuang4.selected=!1,this._zuozhuang=2):e.currentTarget==this.zuozhuang3?(this.zuozhuang3.selected=!0,this.zuozhuang2.selected=!1,this.zuozhuang1.selected=!1,this.zuozhuang4.selected=!1,this._zuozhuang=3):e.currentTarget==this.zuozhuang4?(this.zuozhuang4.selected=!0,this.zuozhuang2.selected=!1,this.zuozhuang1.selected=!1,this.zuozhuang3.selected=!1,this._zuozhuang=4):e.currentTarget==this.beishu1?(this.beishu1.selected=!0,this.beishu2.selected=!1,this.beishu3.selected=!1,this._beishu=1):e.currentTarget==this.beishu2?(this.beishu2.selected=!0,this.beishu1.selected=!1,this.beishu3.selected=!1,this._beishu=2):e.currentTarget==this.beishu3?(this.beishu3.selected=!0,this.beishu2.selected=!1,this.beishu1.selected=!1,this._beishu=3):e.currentTarget==this.difen1?(this.difen1.selected=!0,this.difen2.selected=!1,this.difen3.selected=!1,this.difen=1):e.currentTarget==this.difen2?(this.difen2.selected=!0,this.difen1.selected=!1,this.difen3.selected=!1,this.difen=2):e.currentTarget==this.difen3?(this.difen3.selected=!0,this.difen2.selected=!1,this.difen1.selected=!1,this.difen=3):e.currentTarget==this.pay1?(this.pay1.selected=!0,this.pay2.selected=!1,this._payWay=2,this.roomCardNumTF.text="（1张房卡）",this.roomCardNumTF2.text="（2张房卡）"):e.currentTarget==this.payWay1?(this.payWay1.selected=!0,this.payWay2.selected=!1,this._payWay=2,this.roomCardNumTF3.text="（1张房卡）",this.roomCardNumTF4.text="（2张房卡）"):e.currentTarget==this.pay2?(this.pay2.selected=!0,this.pay1.selected=!1,this._payWay=1,this.roomCardNumTF.text="（4张房卡）",this.roomCardNumTF2.text="（7张房卡）"):e.currentTarget==this.payWay2&&(this.payWay2.selected=!0,this.payWay1.selected=!1,this._payWay=1,this.roomCardNumTF3.text="（4张房卡）",this.roomCardNumTF4.text="（7张房卡）")},t.prototype.show=function(){this._tabIndex=-1,this.showTabView(1),this.bindButton(this.createBtn),this.bindButton(this.tab1),this.bindButton(this.tab2)},t.prototype.showTabView=function(e){e!=this._tabIndex&&(this._tabIndex=e,1==this._tabIndex?(this.zjhGroup.visible=!0,this.nnGroup.visible=!1,this.tab1.texture=RES.getRes("hall_json.gameTab1_select"),this.tab2.texture=RES.getRes("hall_json.gameTab2"),this.eightRoundChk.selected=!0,this.sixteenRoundChk.selected=!1,this._round=8,this.roomCardNumTF3.text="（1张房卡）",this.roomCardNumTF4.text="（2张房卡）"):(this.zjhGroup.visible=!1,this.nnGroup.visible=!0,this.tab1.texture=RES.getRes("hall_json.gameTab1"),this.tab2.texture=RES.getRes("hall_json.gameTab2_select"),this.tenRoundChk.selected=!0,this.tweentyRoundChk.selected=!1,this._round=10,this.roomCardNumTF.text="（1张房卡）",this.roomCardNumTF2.text="（2张房卡）"))
},t.prototype.touchBindButtonHandler=function(t){if(e.prototype.touchBindButtonHandler.call(this,t),t==this.createBtn){var i={};i.gameType=1==this._tabIndex?GameGlobal.ZJH_TYPE:GameGlobal.NIUNIU_TYPE,i.msgType=NetAction.createRoom,1==this._tabIndex?i.msg={payType:this._payWay,playerId:MyUserInfo.getInstance().userId,totalGames:this._round}:i.msg={payType:this._payWay,playerId:MyUserInfo.getInstance().userId,totalGames:this._round,roomBankerType:this._zuozhuang,multipleLimit:this._beishu,buttomScoreType:this.difen},SocketCommand.getInstance().send(i)}else t==this.tab1?this.showTabView(1):t==this.tab2&&this.showTabView(2)},t}(IFrameBase);__reflect(CreateRoomView2.prototype,"CreateRoomView2");var CreateTeahouseView=function(e){function t(){var t=e.call(this)||this;return t._payWay=2,t._round=8,t._zuozhuang=1,t._beishu=1,t.difen=1,t._tabIndex=-1,t.skinName="CreateTeahouseSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.eightRoundChk.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.sixteenRoundChk.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.payWay1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.payWay2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.tenRoundChk.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.tweentyRoundChk.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.zuozhuang1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.zuozhuang2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.zuozhuang3.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.zuozhuang4.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.beishu1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.beishu2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.beishu3.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.pay1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.pay2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.difen1.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.difen2.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this),this.difen3.addEventListener(egret.Event.CHANGE,this.CheckBoxChange,this)},t.prototype.CheckBoxChange=function(e){e.currentTarget==this.eightRoundChk?(this.eightRoundChk.selected=!0,this.sixteenRoundChk.selected=!1,this._round=8):e.currentTarget==this.sixteenRoundChk?(this.sixteenRoundChk.selected=!0,this.eightRoundChk.selected=!1,this._round=16):e.currentTarget==this.tenRoundChk?(this.tenRoundChk.selected=!0,this.tweentyRoundChk.selected=!1,this._round=10):e.currentTarget==this.tweentyRoundChk?(this.tweentyRoundChk.selected=!0,this.tenRoundChk.selected=!1,this._round=20):e.currentTarget==this.zuozhuang1?(this.zuozhuang1.selected=!0,this.zuozhuang2.selected=!1,this.zuozhuang3.selected=!1,this.zuozhuang4.selected=!1,this._zuozhuang=1):e.currentTarget==this.zuozhuang2?(this.zuozhuang2.selected=!0,this.zuozhuang1.selected=!1,this.zuozhuang3.selected=!1,this.zuozhuang4.selected=!1,this._zuozhuang=2):e.currentTarget==this.zuozhuang3?(this.zuozhuang3.selected=!0,this.zuozhuang2.selected=!1,this.zuozhuang1.selected=!1,this.zuozhuang4.selected=!1,this._zuozhuang=3):e.currentTarget==this.zuozhuang4?(this.zuozhuang4.selected=!0,this.zuozhuang2.selected=!1,this.zuozhuang1.selected=!1,this.zuozhuang3.selected=!1,this._zuozhuang=4):e.currentTarget==this.beishu1?(this.beishu1.selected=!0,this.beishu2.selected=!1,this.beishu3.selected=!1,this._beishu=1):e.currentTarget==this.beishu2?(this.beishu2.selected=!0,this.beishu1.selected=!1,this.beishu3.selected=!1,this._beishu=2):e.currentTarget==this.beishu3?(this.beishu3.selected=!0,this.beishu2.selected=!1,this.beishu1.selected=!1,this._beishu=3):e.currentTarget==this.difen1?(this.difen1.selected=!0,this.difen2.selected=!1,this.difen3.selected=!1,this.difen=1):e.currentTarget==this.difen2?(this.difen2.selected=!0,this.difen1.selected=!1,this.difen3.selected=!1,this.difen=2):e.currentTarget==this.difen3?(this.difen3.selected=!0,this.difen2.selected=!1,this.difen1.selected=!1,this.difen=3):e.currentTarget==this.pay1?(this.pay1.selected=!0,this.pay2.selected=!1,this._payWay=2,this.roomCardNumTF.text="（1张房卡）",this.roomCardNumTF2.text="（2张房卡）"):e.currentTarget==this.payWay1?(this.payWay1.selected=!0,this.payWay2.selected=!1,this._payWay=2,this.roomCardNumTF3.text="（1张房卡）",this.roomCardNumTF4.text="（2张房卡）"):e.currentTarget==this.pay2?(this.pay2.selected=!0,this.pay1.selected=!1,this._payWay=1,this.roomCardNumTF.text="（4张房卡）",this.roomCardNumTF2.text="（7张房卡）"):e.currentTarget==this.payWay2&&(this.payWay2.selected=!0,this.payWay1.selected=!1,this._payWay=1,this.roomCardNumTF3.text="（4张房卡）",this.roomCardNumTF4.text="（7张房卡）")},t.prototype.show=function(){this._tabIndex=-1,this.showTabView(1),this.bindButton(this.createBtn),this.bindButton(this.tab1),this.bindButton(this.tab2)},t.prototype.showTabView=function(e){e!=this._tabIndex&&(this._tabIndex=e,1==this._tabIndex?(this.zjhGroup.visible=!0,this.nnGroup.visible=!1,this.tab1.texture=RES.getRes("hall_json.gameTab1_select"),this.tab2.texture=RES.getRes("hall_json.gameTab2"),this.eightRoundChk.selected=!0,this.sixteenRoundChk.selected=!1,this._round=8,this.roomCardNumTF3.text="（1张房卡）",this.roomCardNumTF4.text="（2张房卡）"):(this.zjhGroup.visible=!1,this.nnGroup.visible=!0,this.tab1.texture=RES.getRes("hall_json.gameTab1"),this.tab2.texture=RES.getRes("hall_json.gameTab2_select"),this.tenRoundChk.selected=!0,this.tweentyRoundChk.selected=!1,this._round=10,this.roomCardNumTF.text="（1张房卡）",this.roomCardNumTF2.text="（2张房卡）"))},t.prototype.touchBindButtonHandler=function(t){if(e.prototype.touchBindButtonHandler.call(this,t),t==this.createBtn){var i={};i.gameType=1==this._tabIndex?GameGlobal.ZJH_TYPE:GameGlobal.NIUNIU_TYPE,i.msgType=NetAction.teahouse_create,1==this._tabIndex?i.msg={payType:this._payWay,playerId:MyUserInfo.getInstance().userId,totalGames:this._round}:i.msg={payType:this._payWay,playerId:MyUserInfo.getInstance().userId,totalGames:this._round,roomBankerType:this._zuozhuang,multipleLimit:this._beishu,buttomScoreType:this.difen},SocketCommand.getInstance().send(i)}else t==this.tab1?this.showTabView(1):t==this.tab2&&this.showTabView(2)},t}(IFrameBase);__reflect(CreateTeahouseView.prototype,"CreateTeahouseView");var HallBottomMenu=function(){function e(e){this._buttons=[],this._ui=e,this.initView()}return e.prototype.initView=function(){var e=["shareBtn","tuiguangBtn","choujiangBtn","activityBtn","mallBtn"],t=e.length;this._buttons=[];for(var i=0;t>i;i++){var n=this._ui[e[i]];n.name=e[i],n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)}},e.prototype.onTouchTapHandle=function(e){switch(SoundManager.instance.playSound("button_mp3"),e.currentTarget.name){case"shareBtn":GameGlobal.iframeLayer.showIFrame(ShareView);break;case"tuiguangBtn":GameGlobal.iframeLayer.showIFrame(TuiGuangView);break;case"choujiangBtn":AlertView.getInstance().show("功能暂未开放，敬请期待！");break;case"activityBtn":AlertView.getInstance().show("功能暂未开放，敬请期待！");break;case"mallBtn":GameGlobal.iframeLayer.showIFrame(MallView2)}},e}();__reflect(HallBottomMenu.prototype,"HallBottomMenu");var HallRightMenu=function(){function e(e){this._buttons=[],this._ui=e,this.initView()}return e.prototype.initView=function(){var e=["createTeahouseBtn","joinTeahouseBtn","createRoomBtn","joinRoomBtn"],t=e.length;this._buttons=[];for(var i=0;t>i;i++){var n=this._ui[e[i]];n.name=e[i],n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)}},e.prototype.onTouchTapHandle=function(e){switch(SoundManager.instance.playSound("button_mp3"),e.currentTarget.name){case"createTeahouseBtn":GameGlobal.iframeLayer.showIFrame(CreateTeahouseView);break;case"createRoomBtn":GameGlobal.iframeLayer.showIFrame(CreateRoomView2);break;case"joinTeahouseBtn":GameGlobal.iframeLayer.showIFrame(JoinTeahouseView);break;case"joinRoomBtn":GameGlobal.iframeLayer.showIFrame(JoinRoomView)}},e}();__reflect(HallRightMenu.prototype,"HallRightMenu");var HallTopMenu=function(){function e(e){this._ui=e,this.initView()}return e.prototype.initView=function(){this._setBtn=this._ui.setBtn,this._scoreBtn=this._ui.zhanjiBtn,this._quitBtn=this._ui.quitBtn,this._setBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this),this._scoreBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this),this._quitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},e.prototype.onTouchTapHandle=function(e){switch(SoundManager.instance.playSound("button_mp3"),e.currentTarget){case this._setBtn:GameGlobal.iframeLayer.showIFrame(SettingView);break;case this._scoreBtn:GameGlobal.iframeLayer.showIFrame(ZhanjiView);break;case this._quitBtn:AlertView.getInstance().setConfirmCallBack(this.quitConfirm,this),AlertView.getInstance().show("确定要离开游戏吗？",AlertView.CONFIRM_MODE)}},e.prototype.quitConfirm=function(){egret.ExternalInterface.call("exitGame","exitGame")},e}();__reflect(HallTopMenu.prototype,"HallTopMenu");var HallView=function(e){function t(){var t=e.call(this)||this;return t.skinName="HallSkin",t.name="HallView",t.percentWidth=100,t.percentHeight=100,t.touchEnabled=!0,t}return __extends(t,e),t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),GameGlobal.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStageHandle,this),GameEventManager.addEvent(NetAction.notice.toString(),this.onNoticeResponse,this),this.show()},t.prototype.onNoticeResponse=function(e){var t=e.data,i=t.data,n=i.noticeContent;this._noticeView.addNotice(n)},t.prototype.childrenCreated=function(){this._teahouseList=new MyTeahouseList(this.myTeahouseList),this._rightMenu=new HallRightMenu(this.rightMenu),this._topMenu=new HallTopMenu(this.topMenu),this._bottomMenu=new HallBottomMenu(this.bottomMenu),this._selfInfoView=new SelfInfoView(this.selfInfo),this._noticeView=new NoticeView,this._noticeView.x=0,this._noticeView.y=93,this.addChild(this._noticeView),this._rankView=new RankView,this.addChild(this._rankView),this._rankView.y=162,this._rankView.horizontalCenter=9},t.prototype.onTouchStageHandle=function(e){e.target!=this.myTeahouseList&&e.target!=this.myTeahouseList.btn&&e.target!=this._teahouseList&&e.target.parent!=this._teahouseList&&this._teahouseList.hide()},t.prototype.show=function(){this.initialized&&(this.roleImg.x=-350,egret.Tween.removeTweens(this.roleImg),egret.Tween.get(this.roleImg).to({x:0},300),this.rightMenu.x=GameGlobal.stageW+320,egret.Tween.removeTweens(this.rightMenu),egret.Tween.get(this.rightMenu).to({x:GameGlobal.stageW-322},300))},t.prototype.resize=function(){this.percentWidth=100,this.percentHeight=100,this.width=GameGlobal.stageW,this.height=GameGlobal.stageH},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t)},t}(BaseUIComponent);__reflect(HallView.prototype,"HallView");var JoinRoomView=function(e){function t(){var t=e.call(this)||this;return t.skinName="JoinRoomSkin",t}return __extends(t,e),t.prototype.show=function(){this.numTF.text=t.DEFAULT_TIP_STR},t.prototype.childrenCreated=function(){},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this.initButtons()},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t)},t.prototype.initButtons=function(){for(var e,t=12,i=0;t>i;i++)e=this["btn"+i],e.index=i,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(e){var i=e.currentTarget,n=i.index;10==n?this.clearNumTF():11==n?this.removeNum():this.addNum(n);var a=this.numTF.text.trim();if(a.length>=6){var s=this.getRoomId();if(this.numTF.text.trim()==t.DEFAULT_TIP_STR)return AlertView.getInstance().show(t.DEFAULT_TIP_STR),void(this.numTF.text="");LogUtils.log("roomId = "+s);var o={};o.msgType=NetAction.enterRoom,o.gameType=0,o.msg={roomId:s,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(o)}},t.prototype.getRoomId=function(){return this.numTF.text.trim()},t.prototype.addNum=function(e){this.numTF.text.trim()==t.DEFAULT_TIP_STR&&(this.numTF.text=""),this.numTF.appendText(e.toString())},t.prototype.clearNumTF=function(){this.numTF.text=t.DEFAULT_TIP_STR},t.prototype.removeNum=function(){var e=this.numTF.text.trim();""!=e&&e!=t.DEFAULT_TIP_STR&&(this.numTF.text=e.substr(0,e.length-1),""==this.numTF.text&&(this.numTF.text=t.DEFAULT_TIP_STR))},t.DEFAULT_TIP_STR="请输入房间ID",t}(IFrameBase);__reflect(JoinRoomView.prototype,"JoinRoomView");var JoinTeahouseView=function(e){function t(){var t=e.call(this)||this;return t.skinName="JoinRoomSkin",t}return __extends(t,e),t.prototype.show=function(){this.numTF.text=t.DEFAULT_TIP_STR},t.prototype.childrenCreated=function(){},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this.initButtons()},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t)},t.prototype.initButtons=function(){for(var e,t=12,i=0;t>i;i++)e=this["btn"+i],e.index=i,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(e){var t=e.currentTarget,i=t.index;10==i?this.clearNumTF():11==i?this.removeNum():this.addNum(i);var n=this.numTF.text.trim();if(n.length>=6){var a=this.getRoomId();LogUtils.log("roomId = "+a);var s={};s.msgType=NetAction.teahouse_join,s.gameType=0,s.msg={teaHouseNum:a},SocketCommand.getInstance().send(s)}},t.prototype.getRoomId=function(){return this.numTF.text.trim()},t.prototype.addNum=function(e){this.numTF.text.trim()==t.DEFAULT_TIP_STR&&(this.numTF.text=""),this.numTF.appendText(e.toString())},t.prototype.clearNumTF=function(){this.numTF.text=t.DEFAULT_TIP_STR},t.prototype.removeNum=function(){var e=this.numTF.text.trim();""!=e&&e!=t.DEFAULT_TIP_STR&&(this.numTF.text=e.substr(0,e.length-1),""==this.numTF.text&&(this.numTF.text=t.DEFAULT_TIP_STR))},t.DEFAULT_TIP_STR="请输入茶楼ID",t}(IFrameBase);__reflect(JoinTeahouseView.prototype,"JoinTeahouseView");var MyTeahouseList=function(){function e(e){this._isTweening=!1,this._isShow=!1,this._ui=e,this.initView()}return e.prototype.initView=function(){this._btn=this._ui.btn,this._list=this._ui.list,this._list.itemRenderer=MyTeahouseTile,this._btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap2,this)},e.prototype.onTouchTap2=function(e){this._isShow?this.hide():this.show()},e.prototype.show=function(){var e=this;if(!this._isTweening){this._ui.x=-270,egret.Tween.removeTweens(this._ui),this._isTweening=!0,this._isShow=!0,egret.Tween.get(this._ui).to({x:0},300).call(function(){e._isTweening=!1},this),GameEventManager.addEvent(NetAction.teahouse_list2.toString(),this.onTeahouseListResponse,this);var t={};t.msgType=NetAction.teahouse_list2,t.gameType=0,SocketCommand.getInstance().send(t)}},e.prototype.onTeahouseListResponse=function(e){GameEventManager.removeEvent(NetAction.teahouse_list.toString(),this.onTeahouseListResponse,this);var t=e.data,i=t.data;this.updateList(i)},e.prototype.updateList=function(e){this.dataList=new eui.ArrayCollection(e),this._list.dataProvider=this.dataList},e.prototype.onTouchTap=function(e){var t=e.currentTarget,i=t.data,n={};n.msgType=NetAction.teahouse_enter,n.gameType=0,n.msg={teaHouseNum:i.teaHouseNum},SocketCommand.getInstance().send(n)},e.prototype.hide=function(){var e=this;this._isTweening||(GameEventManager.removeEvent(NetAction.teahouse_list.toString(),this.onTeahouseListResponse,this),this._isShow=!1,egret.Tween.removeTweens(this._ui),this._isTweening=!0,egret.Tween.get(this._ui).to({x:-270},300).call(function(){e._isTweening=!1},this))},e}();__reflect(MyTeahouseList.prototype,"MyTeahouseList");var MyTeahouseTile=function(e){function t(){var t=e.call(this)||this;return t.skinName="MyTeahouseListItemSkin",t.name="MyTeahouseTile",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._faceImg=new DImage(66,66),this._faceImg.x=8,this._faceImg.y=7,this.addChild(this._faceImg),this.data&&this.updateView(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.onTouchTapHandle=function(e){var t=this.data,i={};i.msgType=NetAction.teahouse_enter,i.gameType=0,i.msg={teaHouseNum:t.teaHouseNum},SocketCommand.getInstance().send(i)},t.prototype.updateView=function(){var e=GameGlobal.getGameName(this.data.gameType)+"（"+this.data.teaHouseNum+"）";this.gameNameTF.text=e,this.bossTF.text="老板："+this.data.nickName,this._faceImg.load(this.data.headImgUrl)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.data&&this.gameNameTF&&this.updateView()},t}(eui.ItemRenderer);__reflect(MyTeahouseTile.prototype,"MyTeahouseTile");var RankView=function(e){function t(){var t=e.call(this)||this;return t._tabIndex=-1,t._tabSelectPos=[14,152,278],t.skinName="RankSkin",t.name="RankView",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=RankItem,this.tab1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.tab2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.tab3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._tabIndex=-1,this.showTabView(1)},t.prototype.show=function(){},t.prototype.updateList=function(e){this.dataList=new eui.ArrayCollection(e),this.list.dataProvider=this.dataList},t.prototype.initView=function(){},t.prototype.onTouchTap=function(e){var t=1;switch(e.currentTarget){case this.tab1:break;case this.tab2:t=2;break;case this.tab3:t=3}this.showTabView(t)},t.prototype.showTabView=function(e){if(this._tabIndex!=e)if(this._tabIndex=e,this.tabSelect.x=this._tabSelectPos[this._tabIndex-1],1==this._tabIndex){GameEventManager.addEvent(NetAction.rank_tuhao.toString(),this.onRankResponse,this);var t={};t.msgType=NetAction.rank_tuhao,SocketCommand.getInstance().send(t)}else if(2==this._tabIndex){GameEventManager.addEvent(NetAction.rank_paishen.toString(),this.onRankResponse,this);var t={};t.msgType=NetAction.rank_paishen,SocketCommand.getInstance().send(t)}else{GameEventManager.addEvent(NetAction.rank_opened.toString(),this.onRankResponse,this);var t={};t.msgType=NetAction.rank_opened,SocketCommand.getInstance().send(t)}},t.prototype.onRankResponse=function(e){var t=e.data,i=t.data;this.updateList(i)},t}(eui.Component);__reflect(RankView.prototype,"RankView");var RankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RankItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){},t}(eui.ItemRenderer);__reflect(RankItem.prototype,"RankItem");var SelfInfoView=function(){function e(e){this._ui=e,this.initView()}return e.prototype.initView=function(){this._nickNameTF=this._ui.nickNameTF,this._idTF=this._ui.idTF,this._roomCardBtn=this._ui.roomCardBtn,this._roomCardTF=this._ui.roomCardTF,this._nickNameTF.text="--",this._idTF.text="--",this._faceImg=new DImage(59,54),this._ui.addChild(this._faceImg),this._faceImg.y=2,this._faceImg.load(MyUserInfo.getInstance().faceUrl);var e=MyUserInfo.getInstance().userName;StringUtils.getStringLen(e)>11&&(e=e.substr(0,11)+"..."),this._nickNameTF.text=e,this._idTF.text=MyUserInfo.getInstance().userId.toString(),GameEventManager.addEvent(GameEventManager.UPDATE_USER_GOLD,this.onUpdateUserGold,this),this.onUpdateUserGold(null),this._faceImg.touchEnabled=!0,this._faceImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._roomCardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.onUpdateUserGold=function(e){this._roomCardTF.text=MyUserInfo.getInstance().gold.toString()},e.prototype.onTouchTap=function(e){e.currentTarget==this._roomCardBtn?GameGlobal.iframeLayer.showIFrame(MallView2):GameGlobal.iframeLayer.showIFrame(SelfDetailInfoView)},e}();__reflect(SelfInfoView.prototype,"SelfInfoView");var SettingView=function(e){function t(){var t=e.call(this)||this;return t._isMusicOn=!0,t._isSoundOn=!0,t.skinName="SettingSkin",t.name="SettingView",t}return __extends(t,e),t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t)},t.prototype.touchBindButtonHandler=function(t){switch(e.prototype.touchBindButtonHandler.call(this,t),t){case this.musicToggle:this._isMusicOn=!this._isMusicOn,this.musicToggle.texture=this._isMusicOn?RES.getRes("teahouse_json.t_toggleOn2"):RES.getRes("teahouse_json.t_toggleOff2"),SoundManager.instance.isMusicOn=this._isMusicOn;break;case this.soundToggle:this._isSoundOn=!this._isSoundOn,this.soundToggle.texture=this._isSoundOn?RES.getRes("teahouse_json.t_toggleOn2"):RES.getRes("teahouse_json.t_toggleOff2"),SoundManager.instance.isSoundOn=this._isSoundOn}},t.prototype.childrenCreated=function(){},t.prototype.show=function(){this.bindButton(this.musicToggle),this.bindButton(this.soundToggle)},t}(IFrameBase);__reflect(SettingView.prototype,"SettingView");var Game=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){GameGlobal.mapLayer=new MapLayer,this.addChild(GameGlobal.mapLayer),GameGlobal.mapUILayer=new MapUILayer,this.addChild(GameGlobal.mapUILayer),GameGlobal.iframeLayer=new IFrameLayer,this.addChild(GameGlobal.iframeLayer),GameGlobal.topLayer=new TopLayer,this.addChild(GameGlobal.topLayer),GameGlobal.newbeeGuideLayer=new NewbeeGuideLayer,this.addChild(GameGlobal.newbeeGuideLayer),MyUserInfo.getInstance(),GameGlobal.stage.addEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.onResize=function(e){GameGlobal.mapUILayer.resize()},t}(egret.Sprite);__reflect(Game.prototype,"Game");var TuiGuangView=function(e){function t(){var t=e.call(this)||this;return t.skinName="TuiGuangSkin",t}return __extends(t,e),t.prototype.createComplete=function(t){var i=this;e.prototype.createComplete.call(this,t),this.inputTF.type=egret.TextFieldType.INPUT,this.inputTF.addEventListener(egret.FocusEvent.FOCUS_IN,function(){"请输入推荐码"==i.inputTF.text&&(i.inputTF.text="")},this),this.inputTF.addEventListener(egret.FocusEvent.FOCUS_OUT,function(){""==i.inputTF.text&&(i.inputTF.text="请输入推荐码")},this)},t.prototype.show=function(){this.inputTF.text="请输入推荐码",this.bindButton(this.bindBtn)},t.prototype.touchBindButtonHandler=function(t){if(e.prototype.touchBindButtonHandler.call(this,t),t==this.bindBtn){var i=this.inputTF.text.trim();if(""==i)return void AlertView.getInstance().show("请输入推荐码！",AlertView.ALERT_MODE);GameEventManager.addEvent(NetAction.bind.toString(),this.onBindResponse,this);var n={};n.msgType=NetAction.bind,n.gameType=0,n.msg={proxyId:i},SocketCommand.getInstance().send(n)}},t.prototype.onBindResponse=function(e){AlertView.getInstance().show("恭喜，绑定成功！",AlertView.ALERT_MODE),this.close()},t}(IFrameBase);__reflect(TuiGuangView.prototype,"TuiGuangView");var XieyiView=function(e){function t(){var t=e.call(this)||this;return t.skinName="XieyiViewSkin",t.name="XieyiView",t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.showView=function(e){void 0===e&&(e=GameGlobal.xieyiText),this.xieyiText.text=e,GameGlobal.stage.addChild(this),this.xieyiButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},t.prototype.close=function(){this.stage&&GameGlobal.stage.removeChild(this),this.xieyiText.text=""},t._instance=null,t}(IFrameBase);__reflect(XieyiView.prototype,"XieyiView");var ZhanjiView=function(e){function t(){var t=e.call(this)||this;return t._tabIndex=-1,t.skinName="ZhanjiSkin",t.name="ZhanjiView",t}return __extends(t,e),t.prototype.show=function(){this._tabIndex=-1,this.showTabView(1),this.bindButton(this.tab1),this.bindButton(this.tab2)},t.prototype.childrenCreated=function(){this.list.itemRenderer=ZhanjiTile},t.prototype.showTabView=function(e){if(this._tabIndex!=e)if(this._tabIndex=e,1==e){this.tab1.texture=RES.getRes("hall_json.gameTab1_select"),this.tab2.texture=RES.getRes("hall_json.gameTab2"),GameEventManager.addEvent(NetAction.zhanji.toString(),this.onZhanjiResponse,this);var t={};t.msgType=NetAction.zhanji,t.gameType=GameGlobal.ZJH_TYPE,SocketCommand.getInstance().send(t)}else{this.tab1.texture=RES.getRes("hall_json.gameTab1"),this.tab2.texture=RES.getRes("hall_json.gameTab2_select"),GameEventManager.addEvent(NetAction.zhanji.toString(),this.onZhanjiResponse,this);var t={};t.msgType=NetAction.zhanji,t.gameType=GameGlobal.NIUNIU_TYPE,SocketCommand.getInstance().send(t)}},t.prototype.dispose=function(){e.prototype.dispose.call(this),GameEventManager.removeEvent(NetAction.zhanji.toString(),this.onZhanjiResponse,this)},t.prototype.onZhanjiResponse=function(e){GameEventManager.removeEvent(NetAction.zhanji.toString(),this.onZhanjiResponse,this);var t=e.data,i=t.data;this.updateList(i)},t.prototype.updateList=function(e){e.forEach(function(t,i){e[i].rank=i+1},this),this.dataList=new eui.ArrayCollection(e),this.list.dataProvider=this.dataList},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t),t==this.tab1?this.showTabView(1):t==this.tab2&&this.showTabView(2)},t}(IFrameBase);__reflect(ZhanjiView.prototype,"ZhanjiView");var ZhanjiTile=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZhanjiTileSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){if(null!=this.data){var e=this.data.roomId;this.roomNumTF.text="房间号："+e.toString();var t=this.data.createTime,i=new Date(t),n=[i.getFullYear(),i.getMonth()+1,i.getDate()].join("/");n+=" "+i.toTimeString().substr(0,8),this.timeTF.text=n,this.rankTF.text=this.data.rank;var a=this.data.recordList,s=a.length;this.detailTF.text="";for(var o="",r=0;s>r;r++){var h=a[r].score,l=h>0?"+"+h:h.toString();(r+1)%2==0?o=o+(a[r].nickName+"  "+l+"    ")+"\n":o+=a[r].nickName+"  "+l+"    "}this.detailTF.text=o.trim()}},t}(eui.ItemRenderer);__reflect(ZhanjiTile.prototype,"ZhanjiTile");var CuoPaiEffect=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.show=function(){GameGlobal.stage.addChild(this),t.isShow=!0;var e={};e.msgType=NetAction.cuopai,SocketCommand.getInstance().send(e)},t.prototype.hide=function(){this.stage&&GameGlobal.stage.removeChild(this),t.isShow=!1},t.prototype.initView=function(){this._bg=new egret.Shape,this._bg.graphics.beginFill(0,0),this._bg.graphics.drawRect(0,0,GameGlobal.stage.stageWidth,GameGlobal.stage.stageHeight),this._bg.graphics.endFill(),this.addChild(this._bg),this._gifPlayer=new GifPlayer,this._gifPlayer.play(-1),this.addChild(this._gifPlayer),this._gifPlayer.x=GameGlobal.stageW-619>>1,this._gifPlayer.y=GameGlobal.stageH-450>>1,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.onTouchTapHandle=function(e){this.hide()},t._instance=null,t.isShow=!1,t}(egret.Sprite);__reflect(CuoPaiEffect.prototype,"CuoPaiEffect");var NiuNiuHelpView=function(e){function t(){var t=e.call(this)||this;return t.skinName="NiuNiuHelpSkin",t.name="NiuNiuHelpView",t}return __extends(t,e),t.prototype.tweenShow=function(){if(e.prototype.tweenShow.call(this),null!=this.uiOpenData){var t=this.uiOpenData.roomBankerType;this.wanfaTF.text=this.getZhuangTypeStr(t);var i=this.uiOpenData.payType,n=this.uiOpenData.buttomScoreType;this.difenTF.text="1/2/3/4分",1==n?this.difenTF.text="1/2/3/4分":2==n?this.difenTF.text="2/4/6/8分":3==n&&(this.difenTF.text="3/9/9/12分"),this.fanbeiTF.text="牛牛X4牛九X3牛八X2牛七X2",2==i?10==this.uiOpenData.totalGames?this.fangjianTF.text="AA支付（房卡*1）":this.fangjianTF.text="AA支付（房卡*2）":10==this.uiOpenData.totalGames?this.fangjianTF.text="房主支付（房卡*4）":this.fangjianTF.text="房主支付（房卡*7）",this.teshuTF.text="五花牛x5五小牛X6炸弹牛X7"}},t.prototype.getZhuangTypeStr=function(e){var t="轮流坐庄";switch(e){case 1:break;case 2:t="霸王庄";break;case 3:t="看牌抢庄";break;case 4:t="赢家当庄"}return t},t}(IFrameBase);__reflect(NiuNiuHelpView.prototype,"NiuNiuHelpView");var NN_ChatView=function(e){function t(){var t=e.call(this)||this;return t._textConfig=[["chat_kjBtn",1],["chat_zsBtn",2],["chat_wnBtn",3],["chat_syBtn",4],["chat_ccBtn",5],["chat_hhBtn",6],["chat_dyBtn",7],["chat_jjBtn",8],["chat_zjBtn",9],["chat_tkBtn",10]],t._currentTab=-1,t.skinName="ChatSkin",t.name="ChatView",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.touchBindButtonHandler=function(t){if(e.prototype.touchBindButtonHandler.call(this,t),t==this.tab1)this.showTab(1);else if(t==this.tab2)this.showTab(2);else if(t==this.sendBtn){var i=this.inputTF.text.trim();if(""==i)return void AlertView.getInstance().show("请输入聊天内容！",AlertView.ALERT_MODE);var n={};n.msgType=NetAction.chatMsg,n.msg={chatType:1,chatMsg:i},SocketCommand.getInstance().send(n),this.close()}},t.prototype.createComplete=function(i){var n=this;e.prototype.createComplete.call(this,i),this.list.itemRenderer=NN_ChatEmotionItem,this.dataList=new eui.ArrayCollection(t.emotionConfig),this.list.dataProvider=this.dataList,this.list2.itemRenderer=NN_QuickChatItem,GameGlobal.gameType==GameGlobal.ZJH_TYPE?this.dataList2=new eui.ArrayCollection(t.WORDS2):this.dataList2=new eui.ArrayCollection(t.WORDS),this.list2.dataProvider=this.dataList2,this.inputTF.type=egret.TextFieldType.INPUT,this.inputTF.addEventListener(egret.TouchEvent.FOCUS_IN,function(){"请输入聊天内容..."==n.inputTF.text&&(n.inputTF.text="")},this),this.inputTF.addEventListener(egret.TouchEvent.FOCUS_OUT,function(){""==n.inputTF.text&&(n.inputTF.text="请输入聊天内容...")},this)},t.prototype.show=function(){this._currentTab=-1,this.showTab(1),this.bindButton(this.sendBtn),this.bindButton(this.tab1),this.bindButton(this.tab2)},t.prototype.showTab=function(e){this._currentTab!=e&&(this._currentTab=e,1==this._currentTab?(this.tab1.texture=RES.getRes("common_json.chatTab2_select"),this.tab2.texture=RES.getRes("common_json.chatTab1"),this.tabContainer1.visible=!0,this.tabContainer2.visible=!1):(this.tab1.texture=RES.getRes("common_json.chatTab2"),this.tab2.texture=RES.getRes("common_json.chatTab1_select"),this.tabContainer1.visible=!1,this.tabContainer2.visible=!0))},t.WORDS2=["别看牌，俺们闷到底","不要偷鸡，俺的牌很大","青山不改，绿水长流，后会有期","不要走，决战到天亮","冲动是魔鬼，冷静"],t.WORDS=["初来乍到，请大家手下留情","别拼啦，没牛就是没牛","快点吧，花开花谢好几回啦","底裤都要输光啦","我先走啦，后会有期"],t.emotionConfig=[["bq1",1],["bq2",2],["bq3",3],["bq4",4],["bq5",5],["bq6",6],["bq7",7],["bq8",8],["bq9",9],["bq10",10],["bq11",11],["bq12",12],["bq13",13],["bq14",14],["bq15",15]],t}(IFrameBase);__reflect(NN_ChatView.prototype,"NN_ChatView");var NN_ChatEmotionItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChatEmotionItemSkin",t.name="NN_ChatEmotionItem",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.onTouchTapHandle=function(e){var t=this.data[0],i={};i.msgType=NetAction.chatMsg,i.msg={chatType:2,chatMsg:t},SocketCommand.getInstance().send(i),GameGlobal.iframeLayer.hideIFrame2(NN_ChatView)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.updateView()},t.prototype.updateView=function(){null!=this.data&&(this.bq.texture=RES.getRes("emotion_json."+this.data[0]))},t}(eui.ItemRenderer);__reflect(NN_ChatEmotionItem.prototype,"NN_ChatEmotionItem");var NN_QuickChatItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChatTextItemSkin",t.name="NN_QuickChatItem",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.onTouchTapHandle=function(e){var t=this.data,i={};i.msgType=NetAction.chatMsg,i.msg={chatType:3,chatMsg:t},SocketCommand.getInstance().send(i),GameGlobal.iframeLayer.hideIFrame2(NN_ChatView)
},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){null!=this.data&&(this.titleTF.text=this.data)},t}(eui.ItemRenderer);__reflect(NN_QuickChatItem.prototype,"NN_QuickChatItem");var NNBattleView=function(e){function t(){var t=e.call(this)||this;return t._isLastPlayer=!1,t._countDownTime=10,t._curRound=1,t._totalRound=1,t._zhuangType=0,t._roomNum=0,t._playerOrderList=[],t._roomBankerId="",t._playerDataHash=new HashMap,t._pokerPos=[],t._isShowScore=!1,t._isWatcher=!1,t._gameStatus=-1,t._battleData=null,t._pokerOldPos=[[224,-180],[-263,-46],[-200,70],[136,127],[280,70],[340,-46]],t._jiesuanData=null,t._jiesuanData2=null,t._sayPokerTimeOutId=-1,t._sayPokerData=null,t._isRecording=!1,t.skinName="NiuNiuBattleSkin",t.name="NNBattleView",t.percentWidth=100,t.percentHeight=100,t}return __extends(t,e),t.prototype.getPlayerInfoById=function(e){return this._playerDataHash.get(e)},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this._emotionContainer=new egret.DisplayObjectContainer,this.addChild(this._emotionContainer),this._flyContianer=new egret.DisplayObjectContainer,this.addChild(this._flyContianer),this.arrow.visible=!1,egret.Tween.removeTweens(this.arrow),egret.Tween.get(this.arrow,{loop:!0}).to({y:44},300).to({y:4},300),this._countDownTimer=new egret.Timer(1e3),this._countDownTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandle,this);for(var i=GameGlobal.MAX_PLAYER_COUNT,n=0;i>n;n++){this._pokerPos[n]=[];for(var a=0;5>a;a++){var s=this["cardGroup"+n+"_"+a];this._pokerPos[n][a]={x:s.x,y:s.y}}}var o=this;egret.ExternalInterface.addCallback("recordEndPlay",function(e){LogUtils.log("recordEndPlay"),o.showPlayerRecord(0,!0),SoundManager.instance.isMusicOn=!1}),egret.ExternalInterface.addCallback("playMyRecordEnd",function(e){LogUtils.log("playMyRecordEnd"),o.showPlayerRecord(0,!1),SoundManager.instance.isMusicOn=!0}),egret.ExternalInterface.addCallback("uploadRecordComplete",function(e){LogUtils.log("uploadRecordComplete::send record chat message");var t={};t.msgType=NetAction.chatMsg,t.msg={chatType:6,chatMsg:e},SocketCommand.getInstance().send(t)}),this._timer=new egret.Timer(6e4)},t.prototype.onTimerHandle=function(e){this._countDownTime--,this._countDownTime=Math.max(this._countDownTime,0),this._countDownTime<=0&&(this._countDownTimer.stop(),this._countDownTimer.reset(),this.countDown.visible=!1),this.countDownTF.text=this._countDownTime.toString()},t.prototype.flyToWiners=function(e,t,i){if(0!=i){this._isShowScore=!1;var n=Math.abs(i),a=[this["player"+e].x+30,this["player"+e].y+30],s=[this["player"+t].x+30,this["player"+t].y+30],o=n;o>20&&(o=20);for(var r=0;o>r;r++){var h=new eui.Image("nnGame2_json.flyCoin");h.anchorOffsetX=16,h.anchorOffsetY=16,h.x=0>i?a[0]:s[0],h.y=0>i?a[1]:s[1],this._flyContianer.addChild(h);var l=0>i?s:a;egret.Tween.get(h).wait(50*r).to({x:l[0],y:l[1]},600).call(this.removeImg,this,[h,r,o])}}},t.prototype.showFloatScore=function(){if(!this._isShowScore){this._isShowScore=!0,this._flyContianer.removeChildren();for(var e=this._otherOrderList.length,i=0;e>i;i++){var n=this._otherOrderList[i],a=this._playerOrderHash2.get(n);if(a.status!=t.WATCHER){var s=Number(this["score"+n+"_1"].text.trim());if(0!=s){var o,r=this["player"+n].x+60,h=this["player"+n].y-20;o=s>0?new DBitmapNumber(s,30,2):new DBitmapNumber(s,30,1),o.x=r,o.y=h,this._flyContianer.addChild(o),egret.Tween.removeTweens(o),egret.Tween.get(o).to({y:h-40},600)}}}if(s=Number(this.score0_1.text.trim()),!this._isWatcher){r=this.player0.x+60,h=this.player0.y-20;var o;o=s>0?new DBitmapNumber(s,30,2):new DBitmapNumber(s,30,1),o.x=r,o.y=h,this._flyContianer.addChild(o),egret.Tween.removeTweens(o),egret.Tween.get(o).to({y:h-40},600)}}},t.prototype.removeImg=function(e,t,i){egret.Tween.removeTweens(e),e.parent&&e.parent.removeChild(e),e.source=null,e=null,t>=i-1&&this.showFloatScore()},t.prototype.init=function(e){if(void 0===e&&(e=null),!this.initialized)return void egret.callLater(this.init,this,e);if(this.clear(),null==e)throw new Error("battleData is null!!!");this._battleData=e,GameModel.instance().roomId=this._battleData.roomId,this.updateBattleInfo(),this._battleData.hasOwnProperty("status")&&(this._gameStatus=this._battleData.status);var i=this._battleData.roomOwnerId,n=this._battleData.playerList,a=n.length,s=1,o=1,r=1,h=this._battleData.roomBankerId,l=[];this._otherOrderList=[],this._playerOrderList=[],this._playerOrderHash2=new HashMap,this._playerDataHash=new HashMap,console.log("playerList.len = "+a);for(var c=0;a>c;c++){var d=n[c],u=d.playerId;if(s=d.order,o=d.status,u==MyUserInfo.getInstance().userId){GameModel.instance().myOrder=s,r=o,r==BasePlayerView.WATCHER&&(this._isWatcher=!0),this.readyBtn.visible=1==o&&1==this._gameStatus,this.setPlayerData(0,d),this.updatePlayerStatus(0,o),d.hasOwnProperty("onlineStatus")&&null!=d.onlineStatus&&this.setPlayerOffline(0,1!=d.onlineStatus),this._isWatcher||(this.showPlayerPoker(0,d.cardList,d.cardType),this.updatePlayerStakeScore(0,d.stakeScore));var p=d.stakeScoreList;if(void 0==p||null==p);else if(!this._isWatcher&&this._gameStatus==t.GAME_INSTAKESCORE&&h!=MyUserInfo.getInstance().userId){this.clearTable2(),this.hideBetButton(),this.betGroup.visible=!0;for(var _=p.length,g=0;_>g;g++){var m=new eui.Image;m.source="nnGame2_json.bei"+p[g],m.value=p[g],m.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBeiHandle,this),this.betGroup.addChild(m),m.x=161*g}}this._playerOrderHash2.put(0,d)}else l.push(d),console.log("otherPlayerList = "+l.length);this._playerDataHash.put(u.toString(),d),this._playerOrderList.push(d)}for(a=l.length,console.log("len = "+a),c=0;a>c;c++){var d=l[c];s=d.order,o=d.status;var y=GameModel.instance().myOrder,f=GameUtls.sitId2LR(y,s);this.setPlayerData(f,d),this.updatePlayerStatus(f,o),d.hasOwnProperty("onlineStatus")&&null!=d.onlineStatus&&this.setPlayerOffline(f,1!=d.onlineStatus),0!=o&&(4==this._gameStatus||2==this._gameStatus?this.showPlayerPoker(f,[],d.cardType):this.showPlayerPoker(f,d.cardList,d.cardType)),this.updatePlayerStakeScore(f,d.stakeScore),console.log("orderIndex = "+f),this["player"+f].visible=!0,this._otherOrderList.push(f),this._playerOrderHash2.put(f,d)}if(i==MyUserInfo.getInstance().userId,-1!=this._gameStatus){if(this.inviteBtn.visible=!1,this.updateRound(this._battleData.curGame),""!=h&&null!=h){var f=this.getOrderByPlayerId(h);f=GameUtls.sitId2LR(GameModel.instance().myOrder,f),this.updatePlayerZhuang(f),this._roomBankerId=h}this._gameStatus==t.GAME_READY?this.inviteBtn.visible=!0:this._gameStatus==t.GAME_INROB?(this.hideBetButton(),this.betGroup.visible=!1,this._isWatcher||(this.qiangzhuangGroup.visible=!0),this.countDown.visible=!0,this.countDownTF.text="5",this._countDownTime=5,this._countDownTimer.reset(),this._countDownTimer.start()):this._gameStatus==t.GAME_INSTAKESCORE||(this._gameStatus==t.GAME_INGAME?r==t.SHOWCARDED||this._isWatcher||(this.liangpaiBtn.visible=!0):this._gameStatus==t.GAME_CURGAMEOVER?(this._jiesuanData=this._battleData,this.jiesuanResponseTimeOut()):this._gameStatus==t.GAME_TOTALGAMEOVER&&(this._jiesuanData2=this._battleData,this.jiesuanResponseTimeOut2()))}this.initEvents(),SoundManager.instance.playMusic("table_mp3")},t.prototype.updateRound=function(e){(void 0==e||null==e||0==e)&&(e=1),this._curRound=e;var t=this.getZhuangTypeStr(this._zhuangType),i=this._battleData.teaHouseNum;null!=i&&0!=i?this.infoTF.text="茶楼号："+this._battleData.teaHouseNum+" 第"+this._battleData.tableNum+"桌 局数："+this._curRound+"/"+this._totalRound+" "+t:this.infoTF.text="房间号："+this._roomNum+" 局数："+this._curRound+"/"+this._totalRound+" "+t},t.prototype.setPlayerData=function(e,t){this["score"+e].text=t.totalScore;var i=t.nickName;StringUtils.getStringLen(i)>6&&(i=i.substr(0,6)+"..."),this["face"+e].source=t.headImgUrl,this["nickName"+e].text=i},t.prototype.setPlayerOffline=function(e,t){0!=e&&(this["offline"+e].visible=t)},t.prototype.updatePlayerStakeScore=function(e,t){void 0===t&&(t=0),null!=t&&0/0!=t&&0!=t&&(this["bet"+e].visible=!0,this["betScore"+e].text=t.toString())},t.prototype.getPokerResName=function(e,t){var i="poker1_json";return i=3>=e?"poker1_json":6>=e?"poker2_json":9>=e?"poker3_json":12>=e?"poker4_json":"poker5_json"},t.prototype.fapai=function(){for(var e,t=GameGlobal.MAX_PLAYER_COUNT,i=0;t>i;i++)if(e=this["cardGroup"+i],e.visible)for(var n=0;5>n;n++){var a=this._pokerPos[i][n],s=this["cardGroup"+i+"_"+n];egret.Tween.removeTweens(s),s.x=this._pokerOldPos[i][0],s.y=this._pokerOldPos[i][1],0==i?(s.scaleX=56/99,s.scaleY=75/131,egret.Tween.get(s).wait(100*n).to({x:a.x,y:a.y,scaleX:1,scaleY:1},100)):egret.Tween.get(s).wait(100*n).to({x:a.x,y:a.y},100)}},t.prototype.showPlayerPoker=function(e,t,i,n,a){if(void 0===i&&(i=-1),void 0===n&&(n=!1),void 0===a&&(a=[]),null!=t&&void 0!=t){this["cardGroup"+e].visible=!0;for(var s=t.length,o=[],r=0;s>r;r++){var h=new Card(t[r].cardValue,t[r].cardSuit);o.push(h)}s=5;for(var r=0;s>r;r++){var l=o[r],c=this["cardGroup"+e+"_"+r];if(c.texture=RES.getRes(0==e?"poker5_json.cardBg":"poker5_json.cardBg2"),c.scaleX=c.scaleY=1,c.data=null,r<o.length){var d=this.getPokerResName(l.getNum(),l.getColor());c.texture=RES.getRes(d+".card"+l.getNum()+"_"+l.getColor()),c.data=l,0!=e&&(c.scaleX=c.scaleY=56/99)}}if(-1!=i){var u=NNPlayerType.getPokerTypeStrBySererNum(i);n&&(0==e&&this.showMyPokerNiu(a,NNPlayerType.getPokerTypeName(i)),this["cardType"+e].visible=!0,this["cardType"+e].texture=RES.getRes("niuniu_json."+u),("niu10"==u||"jinniu"==u||"wuxiaoniu"==u||"zdn"==u)&&(this._nnEffect=DUtils.createMovieClipByName("nnEffect"),this._nnEffect.frameRate=12,this.addChild(this._nnEffect),this._nnEffect.x=558,this._nnEffect.y=496,MovieClipUtils.playOnce(this._nnEffect,null)),SoundManager.instance.playSound(u+"_mp3"))}}},t.prototype.showMyPokerNiu=function(e,t){void 0===t&&(t="");for(var i=[],n=5,a=e.length,s=0;n>s;s++)for(var o=this["cardGroup0_"+s],r=0;a>r;r++){var h=e[r].cardValue;if(o.data.getNum()==h){i.push(o);break}}if(i.length>=3){n=i.length;for(var s=0;n>s;s++){var o=i[s],l=o.y-40;egret.Tween.removeTweens(o),egret.Tween.get(o).to({y:l},200).wait(100).to({y:o.y},200)}var c=i[0].data.getNum(),d=i[1].data.getNum(),u=i[2].data.getNum();c>10&&(c=10),d>10&&(d=10),u>10&&(u=10),this.resultTF.text=c+"+"+d+"+"+u+"="+t}},t.prototype.updatePlayerStatus=function(e,i,n){void 0===n&&(n=-1),this["readyed"+e].visible=i==t.READYED,this["qiangFlag"+e].visible=i==t.QZ||i==t.NOT_QZ,(i==t.QZ||i==t.NOT_QZ)&&(0==n?this["qiangFlag"+e].texture=RES.getRes("nnGame2_json.n_buqiang"):this["qiangFlag"+e].texture=RES.getRes("nnGame2_json.n_qiangzhuang"+n))},t.prototype.updateBattleInfo=function(){var e=this._battleData.totalGames,t=this._battleData.roomBankerType,i=this._battleData.roomId,n=this._battleData.teaHouseNum;this._totalRound=e,this._curRound=1,this._zhuangType=t,this._roomNum=i;var a=this.getZhuangTypeStr(t);0!=n&&null!=n?this.infoTF.text="茶楼号："+this._battleData.teaHouseNum+" 第"+this._battleData.tableNum+"桌 局数：1/"+this._totalRound+" "+a:this.infoTF.text="房间号："+i+" 局数：1/"+this._totalRound+" "+a,this.timeTF.text=DateUtils.dateFormat(new Date,"hh:mm"),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimerHandle2,this),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandle2,this),this._timer.reset(),this._timer.start()},t.prototype.onTimerHandle2=function(e){this.timeTF.text=DateUtils.dateFormat(new Date,"hh:mm")},t.prototype.getZhuangTypeStr=function(e){var t="轮流坐庄";switch(e){case 1:break;case 2:t="霸王庄";break;case 3:t="看牌抢庄";break;case 4:t="赢家当庄"}return t},t.prototype.clear=function(){this.timeTF.text="--",this.infoTF.text="--",this.bankerIcon.visible=!1,this.countDown.visible=!1,this._isWatcher=!1;for(var e=GameGlobal.MAX_PLAYER_COUNT,t=0;e>t;t++)this["player"+(t+1)]&&(this["player"+(t+1)].visible=!1),this["readyed"+t].visible=!1,this["score"+t].text="",this["nickName"+t].text="",this["qiangFlag"+t].visible=!1,this["cardGroup"+t].visible=!1,this["zhuang"+t].visible=!1,this["zhuang"+t].touchEnabled=!1,this["bet"+t].visible=!1,this["cardType"+t].visible=!1,this["e"+t].visible=!1,this["chat"+t].visible=!1,this["chatTF"+t].text="--",this["yuyin"+t].visible=!1;this.readyBtn.visible=this.inviteBtn.visible=!0,this.liangpaiBtn.visible=!1,this.qiangzhuangGroup.visible=!1,this.betGroup.visible=!1,this._roomBankerId="",egret.clearTimeout(this._sayPokerTimeOutId),this._isLastPlayer=!1,this._sayPokerTimeOutId=-1,this._countDownTimer.stop(),this._countDownTimer.reset(),this.countDown.visible=!1,egret.Tween.removeTweens(this.bankerIcon),this._flyContianer.removeChildren(),this._emotionContainer.removeChildren()},t.prototype.initEvents=function(){this.bindButton(this.quitBtn),this.bindButton(this.helpBtn),this.bindButton(this.setBtn),this.bindButton(this.chatBtn),this.bindButton(this.inviteBtn),this.bindButton(this.readyBtn),this.bindButton(this.liangpaiBtn),this.bindButton(this.arrow),this.recordBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.recordBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.recordBtn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchRelease,this);for(var e=0;6>e;e++){var t=this["qiang"+e];t&&this.bindButton(t);var i=this["face"+e];this.bindButton(i)}this.addNetEvents()},t.prototype.addNetEvents=function(){GameEventManager.addEvent(NetAction.ready.toString(),this.onReadyResponse,this),GameEventManager.addEvent(NetAction.readyStake.toString(),this.onReadyStakeResponse,this),GameEventManager.addEvent(NetAction.readyRobBanker.toString(),this.onReadyRobBankerResponse,this),GameEventManager.addEvent(NetAction.sayPoker.toString(),this.onSayPokerResponse,this),GameEventManager.addEvent(NetAction.showCard.toString(),this.onShowCardResponse,this),GameEventManager.addEvent(NetAction.robBanker.toString(),this.onRobBankerResponse,this),GameEventManager.addEvent(NetAction.robBankerOverTime.toString(),this.onRobBankerResponse,this),GameEventManager.addEvent(NetAction.stake.toString(),this.onStakeResponse,this),GameEventManager.addEvent(NetAction.jiesuan.toString(),this.onJiesuanResponse,this),GameEventManager.addEvent(NetAction.jiesuan2.toString(),this.onJiesuanResponse2,this),GameEventManager.addEvent(NetAction.offline.toString(),this.onOfflineResponse,this),GameEventManager.addEvent(NetAction.online.toString(),this.onOnlineResponse,this),GameEventManager.addEvent(NetAction.autodissolveRoom.toString(),this.autodissolveRoomResponse,this),GameEventManager.addEvent(NetAction.chatMsg.toString(),this.onChatMsgResponse,this),GameEventManager.addEvent(NetAction.countDown.toString(),this.onCountDownResponse,this),GameEventManager.addEvent(NetAction.cuopai.toString(),this.onShowLastPoker,this)},t.prototype.onShowLastPoker=function(e){var t=e.data,i=t.data,n=i.playerId,a=i.cardType,s=i.cardList;n==MyUserInfo.getInstance().userId&&(this.showPlayerPoker(0,s,a,!1),this.arrow.visible=!1)},t.prototype.onChatMsgResponse=function(e){var t=e.data,i=t.data,n=i.playerId,a=i.chatType,s=i.chatMsg,o=i.otherPlayerId;if(5==a)return this.sendEmotionToPlayer(s,n,o),void SoundManager.instance.playSound(s+"_mp3");if(6==a){if(o==MyUserInfo.getInstance().userId)return;var r=this;egret.ExternalInterface.addCallback("playRecordEnd",function(e){var t=r.getOrderByPlayerId(o);t=GameUtls.sitId2LR(GameModel.instance().myOrder,t),r.showPlayerRecord(t,!0),SoundManager.instance.isMusicOn=!0}),SoundManager.instance.isMusicOn=!1;var h=this.getOrderByPlayerId(o);h=GameUtls.sitId2LR(GameModel.instance().myOrder,h),r.showPlayerRecord(h,!0),egret.ExternalInterface.call("playRecord",o+"|"+s)}n==MyUserInfo.getInstance().userId?this.showChatMsg(n,a,s):this.showChatMsg(n,a,s)},t.prototype.showChatMsg=function(e,t,i){var n=this.getOrderByPlayerId(e);if(n=GameUtls.sitId2LR(GameModel.instance().myOrder,n),1==t||3==t){var a=this["chat"+n];a.visible=!0,egret.Tween.removeTweens(a),this["chatTF"+n].text=i,a.alpha=1,egret.Tween.get(a).wait(2e3).to({alpha:0},1e3).call(function(){a.visible=!1},this)}else{var s=this["e"+n];s.visible=!0,s.alpha=1,s.source="emotion_json."+i,egret.Tween.get(s).wait(2e3).to({alpha:0},800).call(function(){s.visible=!1},this)}if(3==t){var o=NN_ChatView.WORDS.indexOf(i);0==MyUserInfo.getInstance().gender?SoundManager.instance.playSound("word-"+o+"_mp3"):SoundManager.instance.playSound("word-"+o+"2_mp3")}},t.prototype.sendEmotionToPlayer=function(e,t,i){var n=this,a=new egret.Bitmap;a.texture=RES.getRes("emotion_json."+e),a.anchorOffsetX=.5*a.width,a.anchorOffsetY=.5*a.height;var s=[],o=this.getOrderByPlayerId(t);o=GameUtls.sitId2LR(GameModel.instance().myOrder,o),s=[this["player"+o].x+30,this["player"+o].y+30],a.x=s[0],a.y=s[1],this._emotionContainer.addChild(a);var r=[0,0],o=this.getOrderByPlayerId(i);o=GameUtls.sitId2LR(GameModel.instance().myOrder,o),r=[this["player"+o].x+30,this["player"+o].y+30],egret.Tween.get(a).to({x:r[0],y:r[1]},800).call(function(t){egret.Tween.removeTweens(t),n._emotionContainer.contains(t)&&n._emotionContainer.removeChild(t);var i=DUtils.createMovieClipByName(e);i.frameRate=12,i.anchorOffsetX=.5*i.width,i.anchorOffsetY=.5*i.height,i.x=a.x,i.y=a.y,"jd"==e?(i.x=a.x-140,i.y=a.y-110):"dzh"==e?i.y=a.y-20:"pj"==e&&(i.x=a.x-10),n._emotionContainer.addChild(i),MovieClipUtils.playOnce(i,null)},this,[a])},t.prototype.autodissolveRoomResponse=function(e){var t=e.data;t.playerId;AlertView.getInstance().setConfirmCallBack(this.autodissolveRoomConfirm,this),AlertView.getInstance().show("由于玩家离开时间较长，房间自动解散，是否返回大厅？",AlertView.CONFIRM_MODE)},t.prototype.autodissolveRoomConfirm=function(){GameEventManager.dispatchEvent(GameEventManager.QUIT_ROOM)},t.prototype.onJiesuanResponse=function(e){var t=e.data,i=t.data;this._jiesuanData=i,this._isLastPlayer&&(egret.clearTimeout(this._sayPokerTimeOutId),this._sayPokerTimeOutId=egret.setTimeout(this.jiesuanResponseTimeOut,this,1e3))},t.prototype.jiesuanResponseTimeOut=function(){var e=(this._jiesuanData.roomOwnerId,this._jiesuanData.playerList);this._isWatcher=!1,this.readyBtn.visible=!0,this.liangpaiBtn.visible=!1;var i=e.length,n=this.getOrderByPlayerId(this._roomBankerId);n=GameUtls.sitId2LR(GameModel.instance().myOrder,n);for(var a=0;i>a;a++){var s=e[a],o=s.playerId,r=s.totalScore,h=this.getOrderByPlayerId(o),l=GameUtls.sitId2LR(GameModel.instance().myOrder,h),c=this._playerOrderHash2.get(l);c&&c.status==t.WATCHER?c.status=t.NOT_READY:(o==MyUserInfo.getInstance().userId&&(this._isWatcher=!1,s.curScore>0),this["score"+l].text=r.toString(),this["score"+l+"_1"].text=s.curScore.toString(),l!=n&&this.flyToWiners(l,n,s.curScore))}},t.prototype.onStakeResponse=function(e){var t=e.data,i=t.data,n=i.playerId,a=i.stakeScore,s=i.isLastStakeScore;n!=MyUserInfo.getInstance().userId||this._isWatcher||(this.betGroup.visible=!1);var o=this.getOrderByPlayerId(n),r=GameUtls.sitId2LR(GameModel.instance().myOrder,o);this["bet"+r].visible=!0,this.qiangzhuangGroup.visible=!1,this["betScore"+r].text=a,this._isLastPlayer=1==s,s&&(3!=this._zhuangType||this._isWatcher||(this.arrow.visible=!0,this.liangpaiBtn.visible=!0,this.countDown.visible=!0,this.countDownTF.text="10",this._countDownTime=10,this._countDownTimer.reset(),this._countDownTimer.start()))},t.prototype.removeNetEvents=function(){GameEventManager.removeEvent(NetAction.ready.toString(),this.onReadyResponse,this),GameEventManager.removeEvent(NetAction.readyStake.toString(),this.onReadyStakeResponse,this),GameEventManager.removeEvent(NetAction.readyRobBanker.toString(),this.onReadyRobBankerResponse,this),GameEventManager.removeEvent(NetAction.sayPoker.toString(),this.onSayPokerResponse,this),GameEventManager.removeEvent(NetAction.showCard.toString(),this.onShowCardResponse,this),GameEventManager.removeEvent(NetAction.robBanker.toString(),this.onRobBankerResponse,this),GameEventManager.removeEvent(NetAction.robBankerOverTime.toString(),this.onRobBankerResponse,this),GameEventManager.removeEvent(NetAction.stake.toString(),this.onStakeResponse,this),GameEventManager.removeEvent(NetAction.jiesuan.toString(),this.onJiesuanResponse,this),GameEventManager.removeEvent(NetAction.jiesuan2.toString(),this.onJiesuanResponse2,this),GameEventManager.removeEvent(NetAction.offline.toString(),this.onOfflineResponse,this),GameEventManager.removeEvent(NetAction.online.toString(),this.onOnlineResponse,this),GameEventManager.removeEvent(NetAction.autodissolveRoom.toString(),this.autodissolveRoomResponse,this),GameEventManager.removeEvent(NetAction.chatMsg.toString(),this.onChatMsgResponse,this),GameEventManager.removeEvent(NetAction.cuopai.toString(),this.onShowLastPoker,this),GameEventManager.removeEvent(NetAction.countDown.toString(),this.onCountDownResponse,this)},t.prototype.onCountDownResponse=function(e){var t=e.data;t.data;this.countDown.visible=!0,this.countDownTF.text="10",this._countDownTime=10,this._countDownTimer.reset(),this._countDownTimer.start()},t.prototype.onRobBankerResponse=function(e){var i=e.data,n=i.data,a=n.playerId,s=n.robMultiple;a==MyUserInfo.getInstance().userId&&(this.qiangzhuangGroup.visible=!1,this.countDown.visible=!1,this._countDownTimer.stop(),this._countDownTimer.reset());var o=this.getOrderByPlayerId(a);o=GameUtls.sitId2LR(GameModel.instance().myOrder,o),this.updatePlayerStatus(o,t.QZ,s)},t.prototype.onJiesuanResponse2=function(e){var t=e.data,i=t.data;this._jiesuanData2=i,this._isLastPlayer&&(egret.clearTimeout(this._sayPokerTimeOutId),this._sayPokerTimeOutId=egret.setTimeout(this.jiesuanResponseTimeOut2,this,1e3))},t.prototype.jiesuanResponseTimeOut2=function(){GameGlobal.iframeLayer.showIFrame(NNGameResult,this._jiesuanData2)},t.prototype.onShowCardResponse=function(e){var t=e.data,i=t.data,n=i.playerId,a=i.cardType,s=i.cardList,o=i.nnCardList,r=i.isLastShowCard;if(n==MyUserInfo.getInstance().userId)this.showPlayerPoker(0,s,a,!0,o),this.liangpaiBtn.visible=!1,this.arrow.visible=!1;else{var h=this.getOrderByPlayerId(n),l=GameUtls.sitId2LR(GameModel.instance().myOrder,h);this.showPlayerPoker(l,s,a,!0,o)}this._isLastPlayer=1==r,this.countDown.visible=!1,this._countDownTimer.reset(),this._countDownTimer.stop(),CuoPaiEffect.isShow&&CuoPaiEffect.getInstance().hide()},t.prototype.onSayPokerResponse=function(e){var t=e.data,i=t.data;3!=this._zhuangType&&(this._sayPokerData=i,this._isLastPlayer&&(egret.clearTimeout(this._sayPokerTimeOutId),this._sayPokerTimeOutId=egret.setTimeout(this.sayPokerResponseTimeOut,this,1e3)))},t.prototype.sayPokerResponseTimeOut=function(){egret.clearTimeout(this._sayPokerTimeOutId),this.betGroup.visible=!1;var e=this._sayPokerData.cardList,t=this._sayPokerData.cardType;this.showPlayerPoker(0,e,t,!1),this.liangpaiBtn.visible=!0;for(var i=this._otherOrderList.length,n=0;i>n;n++)this.resetPlayerPokers(this._otherOrderList[n]);this.countDown.visible=!0,this.countDownTF.text="5",this._countDownTime=5,this._countDownTimer.reset(),this._countDownTimer.start(),this.fapai()},t.prototype.resetPlayerPokers=function(e){var t=this._playerOrderHash2.get(e);t.status!=BasePlayerView.WATCHER&&(this["cardGroup"+e].visible=!0,this.showPlayerPoker(e,[],-1,!1))},t.prototype.onOfflineResponse=function(e){var t=e.data,i=t.data,n=i.playerId;if(n!=MyUserInfo.getInstance().userId){var a=this.getOrderByPlayerId(n),s=GameUtls.sitId2LR(GameModel.instance().myOrder,a);s>=0&&(this["offline"+s].visible=!0)}},t.prototype.onOnlineResponse=function(e){var t=e.data,i=t.data,n=i.playerId;if(n!=MyUserInfo.getInstance().userId){var a=this.getOrderByPlayerId(n),s=GameUtls.sitId2LR(GameModel.instance().myOrder,a);s>=0&&(this["offline"+s].visible=!1)}},t.prototype.onReadyRobBankerResponse=function(e){var t=e.data,i=t.data,n=i.curGame,a=i.cardList;if(this.clearTable2(),this.bankerIcon.visible=!0,this.bankerIcon.x=534,this.bankerIcon.y=311,this.readyBtn.visible=this.inviteBtn.visible=!1,this.updateRound(n),this.resetResult(0),!this._isWatcher){this.qiangzhuangGroup.visible=!0,this.showPlayerPoker(0,a,-1,!1);for(var s=this._otherOrderList.length,o=0;s>o;o++){var r=this._otherOrderList[o];this.resetResult(r),this.showPlayerPoker(r,[],-1)}this.fapai()}},t.prototype.resetResult=function(e){this["qiangFlag"+e].visible=!1,this["bet"+e].visible=!1},t.prototype.onReadyResponse=function(e){var i=e.data,n=i.data,a=n.playerId;this.clearTable(),a==MyUserInfo.getInstance().userId&&(this.readyBtn.visible=!1,this._isWatcher=!1);var s=this.getOrderByPlayerId(a),o=GameUtls.sitId2LR(GameModel.instance().myOrder,s),r=this._playerOrderHash2.get(o);r&&(r.status=t.READYED),this.updatePlayerStatus(o,t.READYED),this["bet"+o].visible=!1,this["cardType"+o].visible=!1},t.prototype.hideBetButton=function(){this.betGroup.removeChildren()},t.prototype.onReadyStakeResponse=function(e){var t=this,i=e.data,n=i.data,a=n.roomBankerId,s=n.curGame,o=n.stakeScoreList;if(this._roomBankerId=a,this.clearTable2(),3==this._zhuangType&&!this._isWatcher)for(var r=GameGlobal.MAX_PLAYER_COUNT,h=0;r>h;h++)this["cardGroup"+h].visible=!0;if(this.readyBtn.visible=this.inviteBtn.visible=!1,this.liangpaiBtn.visible=!1,this.updateRound(s),a==MyUserInfo.getInstance().userId)this.betGroup.visible=!1;else if(!this._isWatcher){this.betGroup.visible=!0,this.hideBetButton();for(var r=o.length,h=0;r>h;h++){var l=new eui.Image;l.source="nnGame2_json.bei"+o[h],l.value=o[h],l.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBeiHandle,this),this.betGroup.addChild(l),l.x=161*h}}var c=this.getOrderByPlayerId(a),d=GameUtls.sitId2LR(GameModel.instance().myOrder,c);this.updatePlayerZhuang(d),egret.Tween.removeTweens(this.bankerIcon);var u=this["player"+d].x+30,p=this["player"+d].y+30;egret.Tween.get(this.bankerIcon).to({x:u,y:p},300).call(function(){t.bankerIcon.visible=!1},this),this.countDown.visible=!0,this.countDownTF.text="5",this._countDownTime=5,this._countDownTimer.reset(),this._countDownTimer.start()},t.prototype.onTouchBeiHandle=function(e){var t=e.currentTarget,i=t.value,n={};n.msgType=NetAction.stake,n.msg={stakeScore:i},SocketCommand.getInstance().send(n)},t.prototype.updatePlayerZhuang=function(e){this["zhuang"+e].visible=!0},t.prototype.clearTable=function(){for(var e=GameGlobal.MAX_PLAYER_COUNT,t=0;e>t;t++)this["zhuang"+t].visible=!1,this["bet"+t].visible=!1,this["qiangFlag"+t].visible=!1,this["cardType"+t].visible=!1,this["cardGroup"+t].visible=!1;this._nnEffect&&this._nnEffect.parent&&this._nnEffect.parent.removeChild(this._nnEffect),this.qiangzhuangGroup.visible=!1,this.betGroup.visible=!1,this.arrow.visible=!1,this.countDown.visible=!1,this.countDownTF.text="0",this._countDownTime=10,this._countDownTimer.reset(),this._countDownTimer.stop()},t.prototype.clearTable2=function(){for(var e=GameGlobal.MAX_PLAYER_COUNT,t=0;e>t;t++)this["zhuang"+t].visible=!1,this["readyed"+t].visible=!1,this["bet"+t].visible=!1,this["qiangFlag"+t].visible=!1,this["cardType"+t].visible=!1,this["cardGroup"+t].visible=!1;this._nnEffect&&this._nnEffect.parent&&this._nnEffect.parent.removeChild(this._nnEffect),this._flyContianer.removeChildren(),this.qiangzhuangGroup.visible=!1,this.betGroup.visible=!1,this.arrow.visible=!1,this.countDown.visible=!1,this.countDownTF.text="0",this._countDownTime=10,this._countDownTimer.reset(),this._countDownTimer.stop()},t.prototype.getOrderByPlayerId=function(e){for(var t=this._playerOrderList.length,i=0;t>i;i++){var n=this._playerOrderList[i];if(n.playerId.toString()==e)return n.order}return null},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clear(),this.recordBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.recordBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.recordBtn.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchRelease,this),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimerHandle2,this),this._timer.stop(),this.removeNetEvents()},t.prototype.onTouchBegin=function(e){null==this._recordMc&&(this._recordMc=DUtils.createMovieClipByName("record")),this._recordMc.frameRate=12,this._recordMc.play(-1),this.addChild(this._recordMc),this._recordMc.x=GameGlobal.stageW-this._recordMc.width>>1,this._recordMc.y=GameGlobal.stageH-this._recordMc.height>>1,this._isRecording=!0,egret.ExternalInterface.call("recordBegin","recordBegin")},t.prototype.onTouchEnd=function(e){this._recordMc&&this.contains(this._recordMc)&&this.removeChild(this._recordMc),this._isRecording=!1,egret.ExternalInterface.call("recordEnd","recordEnd")},t.prototype.onTouchRelease=function(e){LogUtils.log("onTouchReleaseOutSize"),this._recordMc&&this.contains(this._recordMc)&&this.removeChild(this._recordMc),this._isRecording=!1,this.showPlayerRecord(0,!1),egret.ExternalInterface.call("recordCancel","recordCancel")},t.prototype.showPlayerRecord=function(e,t){this["yuyin"+e].visible=t},t.prototype.touchBindButtonHandler=function(t){if(e.prototype.touchBindButtonHandler.call(this,t),t==this.setBtn)GameGlobal.iframeLayer.showIFrame(SettingView);else if(t==this.chatBtn)GameGlobal.iframeLayer.showIFrame(NN_ChatView);else if(t==this.inviteBtn){var i=this._battleData.roomBankerType,n=this.getZhuangTypeStr(i),a="["+n+"]",s=this.getPayTypeStr(this._battleData.payType);a+=this._battleData.hasOwnProperty("teaHouseNum")&&null!=this._battleData.teaHouseNum?"茶楼编号:"+this._battleData.teaHouseNum+",第"+this._battleData.tableNum+"桌,"+this._battleData.totalGames+"局,"+s+",速度来玩吧!":"房间号："+this._battleData.roomId+","+this._battleData.totalGames+"局,"+s+",速度来玩吧!",egret.ExternalInterface.call("shareToFriend",GameGlobal.shareTitle+"|"+a)}else if(t==this.readyBtn){var o={};o.msgType=NetAction.ready,o.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(o)}else if(t==this.helpBtn)GameGlobal.iframeLayer.showIFrame(NiuNiuHelpView,this._battleData);else if(t==this.quitBtn)AlertView.getInstance().setConfirmCallBack(this.quitConfirm,this),AlertView.getInstance().show("是否确定解散房间？",AlertView.CONFIRM_MODE);else if(t==this.liangpaiBtn){var o={};o.msgType=NetAction.showCard,SocketCommand.getInstance().send(o)}else if(t==this.arrow)CuoPaiEffect.getInstance().show();else if(t==this.qiang0){var o={};o.msgType=NetAction.robBanker,o.msg={robMultiple:0,isRobBanker:3},SocketCommand.getInstance().send(o)}else if(t==this.qiang1){var o={};o.msgType=NetAction.robBanker,o.msg={robMultiple:1,isRobBanker:4},SocketCommand.getInstance().send(o)}else if(t==this.qiang2){var o={};o.msgType=NetAction.robBanker,o.msg={robMultiple:2,isRobBanker:4},SocketCommand.getInstance().send(o)}else if(t==this.qiang3){var o={};o.msgType=NetAction.robBanker,o.msg={robMultiple:3,isRobBanker:4},SocketCommand.getInstance().send(o)}else if(t==this.qiang4){var o={};o.msgType=NetAction.robBanker,o.msg={robMultiple:4,isRobBanker:4},SocketCommand.getInstance().send(o)}else if(t==this.face0){var r=this._playerOrderHash2.get(0);GameGlobal.iframeLayer.showIFrame(PlayerInfoView,r)}else if(t==this.face1){var r=this._playerOrderHash2.get(1);GameGlobal.iframeLayer.showIFrame(PlayerInfoView,r)}else if(t==this.face2){var r=this._playerOrderHash2.get(2);GameGlobal.iframeLayer.showIFrame(PlayerInfoView,r)}else if(t==this.face3){var r=this._playerOrderHash2.get(3);GameGlobal.iframeLayer.showIFrame(PlayerInfoView,r)}else if(t==this.face4){var r=this._playerOrderHash2.get(4);GameGlobal.iframeLayer.showIFrame(PlayerInfoView,r)}else if(t==this.face5){var r=this._playerOrderHash2.get(5);GameGlobal.iframeLayer.showIFrame(PlayerInfoView,r)}},t.prototype.getPayTypeStr=function(e){var t="房主支付";switch(e){case 1:t="房主支付";break;case 2:t="AA支付"}return t},t.prototype.quitConfirm=function(){var e={};e.msgType=NetAction.dissolveRoom,e.token=GameModel.instance().token,e.gameType=GameGlobal.gameType,e.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(e)},t.GAME_READY=1,t.GAME_INROB=2,t.GAME_INSTAKESCORE=3,t.GAME_INGAME=4,t.GAME_CURGAMEOVER=5,t.GAME_TOTALGAMEOVER=6,t.NOT_READY=1,t.READYED=2,t.NOT_QZ=3,t.QZ=4,t.WATCHER=0,t.BETED=5,t.SHOWCARDED=6,t.WAIT_TO_BET=7,t
}(BaseUIComponent);__reflect(NNBattleView.prototype,"NNBattleView");var NNGameResult=function(e){function t(){var t=e.call(this)||this;return t.skinName="NNGameResultSkin",t.name="NNGameResult",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=NNGameResultTile},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t)},t.prototype.show=function(){var e=this;if(null!=this.uiOpenData){var t=this.uiOpenData.playerList;t.forEach(function(i,n){t[n].playerId==e.uiOpenData.totalWinnerId&&(t[n].isWin=!0)},this),this.dataList=new eui.ArrayCollection(t),this.list.dataProvider=this.dataList}this.bindButton(this.closeBtn),this.bindButton(this.shareBtn)},t.prototype.touchBindButtonHandler=function(t){if(e.prototype.touchBindButtonHandler.call(this,t),t==this.closeBtn){GameEventManager.addEvent(NetAction.backToHall.toString(),this.backToHallResponse,this);var i={};i.msgType=NetAction.backToHall,i.msg={playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(i)}else if(t==this.shareBtn){var n=new egret.RenderTexture;n.drawToTexture(this,new egret.Rectangle(0,0,this.width,this.height));var a="";n.saveToFile("image/png","result.png"),egret.ExternalInterface.call("shareResult",a)}},t.prototype.backToHallResponse=function(e){GameEventManager.dispatchEvent(GameEventManager.QUIT_ROOM)},t}(IFrameBase);__reflect(NNGameResult.prototype,"NNGameResult");var NNGameResultTile=function(e){function t(){var t=e.call(this)||this;return t._allCardTypeArr=[{name:"庄",count:0},{name:"五小牛",count:0},{name:"炸弹牛",count:0},{name:"金牛",count:0},{name:"牛牛",count:0},{name:"有牛",count:0},{name:"无牛",count:0}],t.skinName="NNGameResultTileSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._faceImg=new DImage(52,54),this._faceImg.x=7,this._faceImg.y=7,this.addChild(this._faceImg),this.winnerIcon.visible=!1,this.updateView()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.updateView()},t.prototype.updateView=function(){if(null!=this.data){this.idTF.text="ID:"+this.data.playerId;for(var e=[this.data.bankerCount,this.data.fiveSmallNiuCount,this.data.bombNiuCount,this.data.goldNiuCount,this.data.niuNiuCount,this.data.youNiuCount,this.data.wuNiuCount],t=this._allCardTypeArr.length,i=0;t>i;i++)this["cardTypeTF"+i+"_0"].text=this._allCardTypeArr[i].name,this["cardTypeTF"+i+"_1"].text=+e[i];var n=GameGlobal.mapLayer.getBattle().getPlayerInfoById(this.data.playerId),a=n.nickName,t=StringUtils.getStringLen(a);t>6&&(a=a.substr(0,6)+"..."),this.nickNameTF.text=a,this._faceImg.load(n.headImgUrl);var s=this.data.totalScore,t=s.toString().length;this.data.isWin?this.winnerIcon.visible=!0:this.winnerIcon.visible=!1,this.bn&&this.contains(this.bn)&&this.removeChild(this.bn),s>0?this.bn=new DBitmapNumber(s,30,2):this.bn=new DBitmapNumber(s,30,1),this.addChild(this.bn),this.bn.x=155-30*t>>1,this.bn.y=366}},t}(eui.ItemRenderer);__reflect(NNGameResultTile.prototype,"NNGameResultTile");var ShareView2=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShareSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t)},t.prototype.show=function(){this.bindButton(this.sharePublicBtn),this.bindButton(this.shareWechatBtn)},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t);var i="我在楚风鱼乐棋牌,"+MyUserInfo.getInstance().userName+"[茶楼号:"+GameModel.instance().teaHouseNum+"],赶紧加...";t==this.shareWechatBtn?egret.ExternalInterface.call("shareToFriend",GameGlobal.shareTitle+"|"+i):t==this.sharePublicBtn&&egret.ExternalInterface.call("share",GameGlobal.shareTitle+"|"+i)},t}(IFrameBase);__reflect(ShareView2.prototype,"ShareView2");var TeahouseBottomMenu=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.prototype.init=function(){var e=MyUserInfo.getInstance().userName;StringUtils.getStringLen(e)>6&&(e=e.substr(0,6)+"..."),this._nameTF.text=e+"（"+MyUserInfo.getInstance().userId+"）",GameEventManager.addEvent(GameEventManager.UPDATE_USER_GOLD,this.onUpdateUserGold,this),this.onUpdateUserGold(null),this._faceImg.load(MyUserInfo.getInstance().faceUrl)},t.prototype.onUpdateUserGold=function(e){this._roomNumTF.text=MyUserInfo.getInstance().gold.toString()},t.prototype.initView=function(){var e=new egret.Bitmap;e.texture=RES.getRes("teahouse_json.t_selfInfoBg"),this.addChild(e),e.y=547;var t=DUtils.createBitmapByName("teahouse_json.t_fangkaBg");this.addChild(t),t.x=60,t.y=602,this._faceImg=new DImage(51,52),this.addChild(this._faceImg),this._faceImg.x=5,this._faceImg.y=577,this._nameTF=new egret.TextField,this._nameTF.textColor=7683873,this._nameTF.size=18,this._nameTF.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this._nameTF),this._nameTF.x=62,this._nameTF.y=581,this._roomNumTF=new egret.TextField,this._roomNumTF.textColor=7683873,this._roomNumTF.size=24,this._roomNumTF.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this._roomNumTF),this._roomNumTF.x=96,this._roomNumTF.y=605,this._nameTF.bold=this._roomNumTF.bold=!0,this._btnContainer=new egret.DisplayObjectContainer,this.addChild(this._btnContainer),this._btnContainer.x=294,this._btnContainer.y=575;for(var i=["t_managerBtn","t_memberBtn","t_winnerBtn","t_zhanjiBtn"],n=i.length,a=0;n>a;a++){var s=new DButton("teahouse_json."+i[a]);s.x=213*a,s.name=i[a],this._btnContainer.addChild(s),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)}this._faceImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.onTouchTapHandle=function(e){GameGlobal.iframeLayer.showIFrame(SelfDetailInfoView)},t.prototype.onTouchHandle=function(e){switch(e.currentTarget.name){case"t_memberBtn":GameGlobal.iframeLayer.showIFrame(TeamMemberListView);break;case"t_winnerBtn":GameGlobal.iframeLayer.showIFrame(WinnerView);break;case"t_managerBtn":GameGlobal.iframeLayer.showIFrame(TeahouseManagerView);break;case"t_zhanjiBtn":GameGlobal.iframeLayer.showIFrame(TeahouseScoreView)}},t}(egret.DisplayObjectContainer);__reflect(TeahouseBottomMenu.prototype,"TeahouseBottomMenu");var TeahouseManagerView=function(e){function t(){var t=e.call(this)||this;return t._tabIndex=-1,t.skinName="TeahouseManageSkin",t.name="TeahouseManagerView",t}return __extends(t,e),t.prototype.show=function(){this._tabIndex=-1,this.showTabView(1),this.bindButton(this.tab1),this.bindButton(this.tab2),this.bindButton(this.createBtn),GameEventManager.addEvent(NetAction.teahouse_del.toString(),this.onDelTeahouseResponse,this)},t.prototype.dispose=function(){e.prototype.dispose.call(this),GameEventManager.removeEvent(NetAction.teahouse_del.toString(),this.onDelTeahouseResponse,this)},t.prototype.onDelTeahouseResponse=function(e){1==this._tabIndex?(this._tabIndex=-1,this.showTabView(1)):(this._tabIndex=-1,this.showTabView(2))},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this.list.itemRenderer=TeahouseManagerTile},t.prototype.childrenCreated=function(){},t.prototype.showTabView=function(e){if(this._tabIndex!=e)if(this._tabIndex=e,1==e){this.tab1.texture=RES.getRes("teahouse_json.t_ruzhuTab1_select"),this.tab2.texture=RES.getRes("teahouse_json.t_ruzhuTab2_default"),GameEventManager.addEvent(NetAction.teahouse_joinList.toString(),this.onTeahouseJoinListResponse,this);var t={};t.msgType=NetAction.teahouse_joinList,t.gameType=0,SocketCommand.getInstance().send(t)}else{this.tab1.texture=RES.getRes("teahouse_json.t_ruzhuTab1_default"),this.tab2.texture=RES.getRes("teahouse_json.t_ruzhuTab2_select"),GameEventManager.addEvent(NetAction.teahouse_list.toString(),this.onTeahouseListResponse,this);var t={};t.msgType=NetAction.teahouse_list,t.gameType=0,SocketCommand.getInstance().send(t)}},t.prototype.onTeahouseJoinListResponse=function(e){GameEventManager.removeEvent(NetAction.teahouse_joinList.toString(),this.onTeahouseJoinListResponse,this);for(var t=e.data,i=t.data,n=[],a=i.length,s=0;a>s;s++){var o=i[s].playerId;o.toString()!=MyUserInfo.getInstance().userId&&n.push(i[s])}n.forEach(function(e,t){n[t].isMy=!1},this),this.dataList=new eui.ArrayCollection(n),this.list.dataProvider=this.dataList},t.prototype.onTeahouseListResponse=function(e){GameEventManager.removeEvent(NetAction.teahouse_list.toString(),this.onTeahouseListResponse,this);var t=e.data,i=t.data;i.forEach(function(e,t){i[t].isMy=!0},this),this.dataList=new eui.ArrayCollection(i),this.list.dataProvider=this.dataList},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t),t==this.tab1?this.showTabView(1):t==this.tab2?this.showTabView(2):t==this.createBtn&&GameGlobal.iframeLayer.showIFrame(CreateTeahouseView)},t}(IFrameBase);__reflect(TeahouseManagerView.prototype,"TeahouseManagerView");var TeahouseManagerTile=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeahouseManageItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.delBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.quitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){this.nickNameTF.text="老板："+MyUserInfo.getInstance().userName;var e=GameGlobal.getGameName(this.data.gameType)+"("+this.data.teaHouseNum+")";this.gameNameTF.text=e;this.data.payType;this.teahouseInfoTF.text="只扣老板放卡，"+this.data.totalGame+"局 5人",this.data.isMy?(this.delBtn.visible=!0,this.quitBtn.visible=!1):(this.delBtn.visible=!1,this.quitBtn.visible=!0)},t.prototype.onTouchTap=function(e){if(e.currentTarget==this.delBtn){var t={};t.msgType=NetAction.teahouse_del,t.gameType=0,t.msg={teaHouseNum:this.data.teaHouseNum},SocketCommand.getInstance().send(t)}else if(e.currentTarget==this.enterBtn){var t={};t.msgType=NetAction.teahouse_enter,t.gameType=0,t.msg={teaHouseNum:this.data.teaHouseNum},SocketCommand.getInstance().send(t)}else if(e.currentTarget==this.quitBtn){var t={};t.msgType=NetAction.teahouse_quit,t.gameType=0,t.msg={teaHouseNum:this.data.teaHouseNum},SocketCommand.getInstance().send(t)}},t}(eui.ItemRenderer);__reflect(TeahouseManagerTile.prototype,"TeahouseManagerTile");var TeahouseScoreView=function(e){function t(){var t=e.call(this)||this;return t._tabIndex=-1,t.skinName="TeahouseZhanjiSkin",t}return __extends(t,e),t.prototype.show=function(){this.bindButton(this.tab1),this.bindButton(this.tab2),this._tabIndex=-1,this.showTabView(1)},t.prototype.childrenCreated=function(){this.list.itemRenderer=TeahouseScoreTile},t.prototype.showTabView=function(e){if(e!=this._tabIndex)if(this._tabIndex=e,1==this._tabIndex){this.tab1.texture=RES.getRes("teahouse_json.t_zhanjiTab1_select"),this.tab2.texture=RES.getRes("teahouse_json.t_zhanjiTab2_default"),GameEventManager.addEvent(NetAction.teahouse_myScoreList.toString(),this.onTeahouseMyScoreListResponse,this);var t={};t.msgType=NetAction.teahouse_myScoreList,t.gameType=0,SocketCommand.getInstance().send(t)}else{this.tab1.texture=RES.getRes("teahouse_json.t_zhanjiTab1_default"),this.tab2.texture=RES.getRes("teahouse_json.t_zhanjiTab2_select"),GameEventManager.addEvent(NetAction.teahouse_scoreList.toString(),this.onTeahouseScoreListResponse,this);var t={};t.msgType=NetAction.teahouse_scoreList,t.gameType=0,SocketCommand.getInstance().send(t)}},t.prototype.onTeahouseMyScoreListResponse=function(e){GameEventManager.removeEvent(NetAction.teahouse_myScoreList.toString(),this.onTeahouseMyScoreListResponse,this);var t=e.data,i=t.data;i.forEach(function(e,t){i[t].rank=t+1},this),this.dataList=new eui.ArrayCollection(i),this.list.dataProvider=this.dataList},t.prototype.onTeahouseScoreListResponse=function(e){GameEventManager.removeEvent(NetAction.teahouse_scoreList.toString(),this.onTeahouseScoreListResponse,this);var t=e.data,i=t.data;i.forEach(function(e,t){i[t].rank=t+1},this),this.dataList=new eui.ArrayCollection(i),this.list.dataProvider=this.dataList},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t),t==this.tab1?this.showTabView(1):t==this.tab2&&this.showTabView(2)},t}(IFrameBase);__reflect(TeahouseScoreView.prototype,"TeahouseScoreView");var TeahouseScoreTile=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeahouseZhanjiTileSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){var e=this.data.roomId;this.roomNumTF.text="房间号："+e.toString();var t=this.data.createTime,i=new Date(t),n=[i.getFullYear(),i.getMonth()+1,i.getDate()].join("/");n+=" "+i.toTimeString().substr(0,8),this.timeTF.text=n,this.rankTF.text=this.data.rank;var a=this.data.recordList,a=this.data.recordList,s=a.length;this.detailTF.text="";for(var o="",r=0;s>r;r++){var h=a[r].score,l=h>0?"+"+h:h.toString();(r+1)%2==0?o=o+(a[r].nickName+"  "+l+"    ")+"\n":o+=a[r].nickName+"  "+l+"    "}this.detailTF.text=o},t}(eui.ItemRenderer);__reflect(TeahouseScoreTile.prototype,"TeahouseScoreTile");var TeahouseSetView=function(e){function t(){var t=e.call(this)||this;return t._isNeedAudit=!1,t.skinName="TeahouseSetSkin",t.name="TeahouseSetView",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=this;this.inputTF.type=egret.TextFieldType.INPUT,this.inputTF.addEventListener(egret.TouchEvent.FOCUS_IN,function(){"请输入公告，例如：您邀请玩家加入您的微信群消息..."==e.inputTF.text&&(e.inputTF.text="")},this),this.inputTF.addEventListener(egret.TouchEvent.FOCUS_OUT,function(){""==e.inputTF.text&&(e.inputTF.text="请输入公告，例如：您邀请玩家加入您的微信群消息...")},this)},t.prototype.show=function(){this.inputTF.text="请输入公告，例如：您邀请玩家加入您的微信群消息...",this.bindButton(this.toggle),this.bindButton(this.confirmBtn)},t.prototype.touchBindButtonHandler=function(t){if(e.prototype.touchBindButtonHandler.call(this,t),t==this.confirmBtn){var i=this.inputTF.text.trim();if("请输入公告，例如：您邀请玩家加入您的微信群消息..."==i&&(i=""),""==i)this.close();else{var n={};n.msgType=NetAction.teahouse_set,n.gameType=0;var a=this._isNeedAudit?1:0;n.msg={teaHouseNum:GameModel.instance().teaHouseNum,teaHouseOwnerWord:i,isNeedAudit:a},SocketCommand.getInstance().send(n)}}else t==this.toggle&&(this._isNeedAudit=!this._isNeedAudit,this.toggle.texture=this._isNeedAudit?RES.getRes("teahouse_json.t_toggleOn"):RES.getRes("teahouse_json.t_toggleOff"))},t}(IFrameBase);__reflect(TeahouseSetView.prototype,"TeahouseSetView");var TeahouseTableDetailView=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeahouseTableDetailSkin",t.name="TeahouseTableDetailView",t}return __extends(t,e),t.prototype.setData=function(e){},t.prototype.childrenCreated=function(){},t.prototype.dispose=function(){e.prototype.dispose.call(this),GameEventManager.removeEvent(NetAction.teahouse_table_memberList2.toString(),this.onTableMemberList2,this)},t.prototype.onTableMemberList2=function(e){GameEventManager.removeEvent(NetAction.teahouse_table_memberList2.toString(),this.onTableMemberList2,this);var t=e.data,i=t.data;this.dataList=new eui.ArrayCollection(i),this.list.dataProvider=this.dataList},t.prototype.tweenShow=function(){e.prototype.tweenShow.call(this),null!=this.uiOpenData&&this.setData(this.uiOpenData),GameEventManager.addEvent(NetAction.teahouse_table_memberList2.toString(),this.onTableMemberList2,this);var t={};t.msgType=NetAction.teahouse_table_memberList2,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum,tableNum:this.uiOpenData},SocketCommand.getInstance().send(t)},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this.list.itemRenderer=TeahouseTableDetailItem},t}(IFrameBase);__reflect(TeahouseTableDetailView.prototype,"TeahouseTableDetailView");var TeahouseTableDetailItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeahouseTableDetailItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){null!=this.data&&(this.nickNameTF.text=this.data.nickName,this.idTF.text=this.data.playerId,this.ipTF.text=this.data.ip)},t}(eui.ItemRenderer);__reflect(TeahouseTableDetailItem.prototype,"TeahouseTableDetailItem");var TeahouseTableView=function(e){function t(){var t=e.call(this)||this;return t._tableCount=8,t.initView(),t}return __extends(t,e),t.prototype.initView=function(){this._tableItemHash=new HashMap;for(var e=0;e<this._tableCount;e++){var t=new TableItem;this.addChild(t),t.setIndex(e+1),t.x=e%4*276,t.y=167*Math.floor(e/4),t.touchEnabled=!0,this._tableItemHash.put(e+1,t)}},t.prototype.updatePlayerList=function(e){for(var t=e.length,i=0;t>i;i++){var n=this._tableItemHash.get(i+1);n.updatePlayerList(e[i])}},t.prototype.onTouchTable=function(e){var t=e.currentTarget,i=t.getIndex(),n={};n.msgType=NetAction.teahouse_enterTable,n.gameType=0,n.msg={teaHouseNum:GameModel.instance().teaHouseNum,tableNum:i},SocketCommand.getInstance().send(n)},t.prototype.init=function(){var e={};e.msgType=NetAction.teahouse_table_memberList,e.gameType=0,e.msg={teaHouseNum:GameModel.instance().teaHouseNum},SocketCommand.getInstance().send(e)},t}(egret.DisplayObjectContainer);__reflect(TeahouseTableView.prototype,"TeahouseTableView");var TableItem=function(e){function t(){var t=e.call(this)||this;return t._list=[],t._index=0,t._seatImgs=[],t.initView(),t}return __extends(t,e),t.prototype.updatePlayerList=function(e){this._tableImg.texture=RES.getRes("teahouse_json.t_table_bg"+e)},t.prototype.getIndex=function(){return this._index},t.prototype.setIndex=function(e){this._index=e,this._titleTF.text=e.toString()},t.prototype.initView=function(){this._detailBtn=new DButton("teahouse_json.t_tableDetailBtn"),this.addChild(this._detailBtn),this._detailBtn.x=60,this._titleTF=new egret.TextField,this._titleTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._titleTF.textColor=16777215,this._titleTF.size=21,this._titleTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this._titleTF),this._titleTF.x=114,this._titleTF.y=8,this._titleTF.text="1",this._titleTF.bold=!0,this._titleTF.width=42,this._tableImg=new egret.Bitmap,this._tableImg.texture=RES.getRes("teahouse_json.t_table_bg0"),this.addChild(this._tableImg),this._tableImg.y=60,this._tableImg.touchEnabled=!0,this._detailBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this),this._tableImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.onTouchTapHandle=function(e){if(e.currentTarget==this._detailBtn)GameGlobal.iframeLayer.showIFrame(TeahouseTableDetailView,this._index);else{var t={};t.msgType=NetAction.teahouse_enterTable,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum,tableNum:this._index},SocketCommand.getInstance().send(t)}},t}(egret.Sprite);__reflect(TableItem.prototype,"TableItem");var TeahouseTopMenu=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.prototype.init=function(e){if(this._data=e,this._shenchaBtn.visible=!0,e.hasOwnProperty("playerId")){var t=e.playerId;t!=MyUserInfo.getInstance().userId&&(this._shenchaBtn.visible=!1)}this._nameTF.text=GameGlobal.getGameName(GameGlobal.gameType),this._idTF.text="茶楼号："+GameModel.instance().teaHouseNum.toString()},t.prototype.initView=function(){this._quitBtn=new DButton("teahouse_json.t_quitBtn"),this.addChild(this._quitBtn),this._quitBtn.x=48,this._quitBtn.y=15,this._refreshBtn=new DButton("teahouse_json.t_refreshBtn"),this.addChild(this._refreshBtn),this._refreshBtn.x=125,this._refreshBtn.y=15,this._shenchaBtn=new DButton("teahouse_json.t_editBtn"),this.addChild(this._shenchaBtn),this._shenchaBtn.x=211,this._shenchaBtn.y=15,this._shareBtn=new DButton("teahouse_json.t_shareBtn"),this.addChild(this._shareBtn),this._shareBtn.x=GameGlobal.stageW-194,this._shareBtn.y=15,this._setBtn=new DButton("teahouse_json.t_setBtn"),this.addChild(this._setBtn),this._setBtn.x=GameGlobal.stageW-87,this._setBtn.y=15,this._nameBg=new egret.Bitmap,this._nameBg.texture=RES.getRes("teahouse_json.t_titleBg"),this.addChild(this._nameBg),this._nameBg.x=GameGlobal.stageW-this._nameBg.width>>1,this._nameTF=new egret.TextField,this._nameTF.textColor=16777215,this._nameTF.size=30,this._nameTF.textAlign=egret.HorizontalAlign.CENTER,this._nameTF.width=346,this._nameTF.x=395,this._nameTF.y=16,this.addChild(this._nameTF),this._nameTF.text="--",this._idTF=new egret.TextField,this._idTF.textColor=16777215,this._idTF.size=20,this._idTF.textAlign=egret.HorizontalAlign.CENTER,this._idTF.width=346,this._idTF.x=395,this._idTF.y=54,this.addChild(this._idTF),this._quitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this),this._shenchaBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this),this._setBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this),this._shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this),this._refreshBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.onTouchTapHandle=function(e){switch(e.currentTarget){case this._quitBtn:var t={};t.msgType=NetAction.teahouse_backToHall,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum},SocketCommand.getInstance().send(t);break;case this._shenchaBtn:GameGlobal.iframeLayer.showIFrame(TeahouseSetView);break;case this._setBtn:GameGlobal.iframeLayer.showIFrame(SettingView);break;case this._shareBtn:GameGlobal.iframeLayer.showIFrame(ShareView2);break;case this._refreshBtn:var t={};t.msgType=NetAction.teahouse_table_memberList,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum},SocketCommand.getInstance().send(t)}},t}(egret.DisplayObjectContainer);__reflect(TeahouseTopMenu.prototype,"TeahouseTopMenu");var TeahouseView=function(e){function t(){var t=e.call(this)||this;return t._isDianXiaoer=0,t.initView(),t}return __extends(t,e),t.prototype.dispose=function(){},t.prototype.init=function(e){this._data=e,this._isDianXiaoer=e.isDianXiaoer;var t=(e.teaHouseNum,GameGlobal.gameType,e.totalGame),i=(e.payType,e.teaHouseOwnerWord);if(GameGlobal.teahouse_ownerId=e.playerId,GameGlobal.isDianXiaoer=this._isDianXiaoer,this._noticeView.init(),this._noticeView.addNotice("房间信息：只扣老板房卡，每轮"+t+"局，老板留言："+(null==i?"":i)),this._tableView.init(),this._topMenu.init(e),1==this._isDianXiaoer)GameGlobal.iframeLayer.showIFrame(TeahouseSetView);else if(e.hasOwnProperty("playerId")){var n=e.playerId;n==MyUserInfo.getInstance().userId&&GameGlobal.iframeLayer.showIFrame(TeahouseSetView)}GameGlobal.iframeLayer.hideIFrame2(TeahouseManagerView)},t.prototype.initView=function(){this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("t_bg_png"),this.addChild(this._bg),this._tableView=new TeahouseTableView,this.addChild(this._tableView),this._tableView.x=11,this._tableView.y=154,this._topMenu=new TeahouseTopMenu,this.addChild(this._topMenu),this._bottomMenu=new TeahouseBottomMenu,this.addChild(this._bottomMenu),this._bottomMenu.init(),this._noticeView=new NoticeView,this._noticeView.x=0,this._noticeView.y=90,this.addChild(this._noticeView),GameEventManager.addEvent(NetAction.teahouse_table_memberList.toString(),this.onTableMemberListResponse,this),GameEventManager.addEvent(NetAction.teahouse_set.toString(),this.onTeahouseSetResponse,this)},t.prototype.onTeahouseSetResponse=function(e){var t=e.data;t.data;GameGlobal.iframeLayer.hideIFrame2(TeahouseSetView)},t.prototype.onTableMemberListResponse=function(e){var t=e.data,i=t.data;this._tableView.updatePlayerList(i)},t.prototype.resize=function(){},t}(egret.DisplayObjectContainer);__reflect(TeahouseView.prototype,"TeahouseView");var TeamMemberListView=function(e){function t(){var t=e.call(this)||this;return t._tabIndex=-1,t._memberList=[],t.skinName="TeamMemberListSkin",t.name="TeamMemberListView",t}return __extends(t,e),t.prototype.createComplete=function(t){var i=this;e.prototype.createComplete.call(this,t),this.list.itemRenderer=TeamMemberTile,this.searchTF.type=egret.TextFieldType.INPUT,this.searchTF.addEventListener(egret.TextEvent.FOCUS_IN,function(){"输入查询的昵称"==i.searchTF.text&&(i.searchTF.text="")},this),this.searchTF.addEventListener(egret.TextEvent.FOCUS_OUT,function(){""==i.searchTF.text&&(i.searchTF.text="输入查询的昵称")},this)},t.prototype.childrenCreated=function(){},t.prototype.dispose=function(){e.prototype.dispose.call(this),GameEventManager.removeEvent(NetAction.teahouse_playerList.toString(),this.onTeahousePlayerListResponse,this),GameEventManager.removeEvent(NetAction.teahouse_applyList.toString(),this.onTeahouseApplyListResponse,this),GameEventManager.removeEvent(NetAction.teahouse_agreeMember.toString(),this.onTeahouseMemberChange,this),GameEventManager.removeEvent(NetAction.teahouse_disagreeMember.toString(),this.onTeahouseMemberChange,this),GameEventManager.removeEvent(NetAction.teahouse_removeMember.toString(),this.onTeahouseMemberChange,this),GameEventManager.removeEvent(NetAction.teahouse_setMember.toString(),this.onTeahouseMemberChange,this)},t.prototype.show=function(){this.searchTF.text="输入查询的昵称",this._tabIndex=-1,GameEventManager.addEvent(NetAction.teahouse_agreeMember.toString(),this.onTeahouseMemberChange,this),GameEventManager.addEvent(NetAction.teahouse_disagreeMember.toString(),this.onTeahouseMemberChange,this),GameEventManager.addEvent(NetAction.teahouse_removeMember.toString(),this.onTeahouseMemberChange,this),GameEventManager.addEvent(NetAction.teahouse_setMember.toString(),this.onTeahouseMemberChange,this),this.showTabView(1),this.bindButton(this.searchBtn),this.bindButton(this.tab1),this.bindButton(this.tab2)},t.prototype.onTeahouseMemberChange=function(e){var t=e.data;t.data;1==this._tabIndex?this.requestPlayerList():this.requestApplyList()},t.prototype.requestPlayerList=function(){var e={};e.msgType=NetAction.teahouse_playerList,e.gameType=0,e.msg={teaHouseNum:GameModel.instance().teaHouseNum},SocketCommand.getInstance().send(e)},t.prototype.requestApplyList=function(){var e={};e.msgType=NetAction.teahouse_applyList,e.gameType=0,e.msg={teaHouseNum:GameModel.instance().teaHouseNum},SocketCommand.getInstance().send(e)},t.prototype.showTabView=function(e){this._tabIndex!=e&&(this._tabIndex=e,1==e?(this.tab1.source="teahouse_json.t_memberTab1_select",this.tab2.source="teahouse_json.t_memberTab2_default",GameEventManager.addEvent(NetAction.teahouse_playerList.toString(),this.onTeahousePlayerListResponse,this),this.requestPlayerList()):(this.tab1.source="teahouse_json.t_memberTab1_default",this.tab2.source="teahouse_json.t_memberTab2_select",GameEventManager.addEvent(NetAction.teahouse_applyList.toString(),this.onTeahouseApplyListResponse,this),this.requestApplyList()))},t.prototype.onTeahousePlayerListResponse=function(e){var t=e.data,i=t.data;i.forEach(function(e,t){i[t].rank=t+1,i[t].isMember=!0},this),this._memberList=i,this.dataList=new eui.ArrayCollection(i),this.list.dataProvider=this.dataList},t.prototype.onTeahouseApplyListResponse=function(e){var t=e.data,i=t.data;i.forEach(function(e,t){i[t].rank=t+1,i[t].isMember=!1},this),this.dataList=new eui.ArrayCollection(i),this.list.dataProvider=this.dataList},t.prototype.touchBindButtonHandler=function(t){switch(e.prototype.touchBindButtonHandler.call(this,t),t){case this.tab1:this.showTabView(1);break;case this.tab2:this.showTabView(2);break;case this.searchBtn:this.search()}},t.prototype.search=function(){var e=this.searchTF.text.trim();if(""!=e){for(var t=0,i=[],n=0;t=this._memberList.length,t>n;n++)this._memberList[n].nickName==e&&i.push(this._memberList[n]);this.dataList=new eui.ArrayCollection(i),this.list.dataProvider=this.dataList}},t.prototype.onSetMember=function(e){},t}(IFrameBase);__reflect(TeamMemberListView.prototype,"TeamMemberListView");var TeamMemberTile=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeamMemberListItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._face=new DImage(52,52),this.addChild(this._face),this._face.x=72,this._face.y=7,this.setManagerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this),this.cancelManagerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this),this.removeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this),this.agreeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this),this.refuseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){this.rankTF.text=this.data.rank.toString(),this.nickNameTF.text=this.data.nickName,this.idTF.text=this.data.playerId,this._face.load(this.data.headImgUrl);var e=this.data.isMember,t=this.data.isDianXiaoer;e?(this.cancelManagerBtn.visible=this.removeBtn.visible=!0,this.agreeBtn.visible=this.refuseBtn.visible=!1,1==t?(this.cancelManagerBtn.visible=!0,this.setManagerBtn.visible=!1):(this.cancelManagerBtn.visible=!1,this.setManagerBtn.visible=!0),this.data.playerId==MyUserInfo.getInstance().userId?(this.cancelManagerBtn.visible=this.removeBtn.visible=!1,this.setManagerBtn.visible=!1):MyUserInfo.getInstance().userId!=GameGlobal.teahouse_ownerId&&(this.data.playerId==GameGlobal.teahouse_ownerId?(this.cancelManagerBtn.visible=this.removeBtn.visible=!1,this.setManagerBtn.visible=!1):0==GameGlobal.isDianXiaoer&&(this.cancelManagerBtn.visible=this.removeBtn.visible=!1,this.setManagerBtn.visible=!1))):(this.cancelManagerBtn.visible=this.removeBtn.visible=!1,this.agreeBtn.visible=this.refuseBtn.visible=!0)},t.prototype.onTouchHandle=function(e){switch(e.currentTarget){case this.setManagerBtn:var t={};t.msgType=NetAction.teahouse_setMember,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum,otherPlayerId:this.data.playerId,isDianXiaoer:1},SocketCommand.getInstance().send(t);break;case this.cancelManagerBtn:var t={};t.msgType=NetAction.teahouse_setMember,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum,otherPlayerId:this.data.playerId,isDianXiaoer:0},SocketCommand.getInstance().send(t);break;case this.removeBtn:var t={};t.msgType=NetAction.teahouse_removeMember,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum,otherPlayerId:this.data.playerId},SocketCommand.getInstance().send(t);break;case this.agreeBtn:var t={};t.msgType=NetAction.teahouse_agreeMember,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum,otherPlayerId:this.data.playerId,status:1},SocketCommand.getInstance().send(t);break;case this.refuseBtn:var t={};t.msgType=NetAction.teahouse_agreeMember,t.gameType=0,t.msg={teaHouseNum:GameModel.instance().teaHouseNum,otherPlayerId:this.data.playerId,status:2},SocketCommand.getInstance().send(t)}},t}(eui.ItemRenderer);__reflect(TeamMemberTile.prototype,"TeamMemberTile");var WinnerView=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeahouseWinnerSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this.list.itemRenderer=WinnerTile},t.prototype.onWinListResponse=function(e){var t=e.data,i=t.data;this.dataList=new eui.ArrayCollection(i),this.list.dataProvider=this.dataList},t.prototype.dispose=function(){GameEventManager.removeEvent(NetAction.teahouse_winList.toString(),this.onWinListResponse,this)},t.prototype.show=function(){GameEventManager.addEvent(NetAction.teahouse_winList.toString(),this.onWinListResponse,this);var e={};e.msgType=NetAction.teahouse_winList,e.gameType=0,e.msg={teaHouseNum:GameModel.instance().teaHouseNum},SocketCommand.getInstance().send(e)},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t),t==this.clearAllBtn&&(this.dataList=new eui.ArrayCollection([]),this.list.dataProvider=this.dataList)
},t}(IFrameBase);__reflect(WinnerView.prototype,"WinnerView");var WinnerTile=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeahouseWinnerItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._faceImg=new DImage(52,52),this._faceImg.x=11,this._faceImg.y=2,this.addChild(this._faceImg)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){this.winCountTF.text=this.data.winCount,this.nickNameTF.text=this.data.nickName,this.idTF.text=this.data.playerId,this._faceImg.load(this.data.headImgUrl)},t}(eui.ItemRenderer);__reflect(WinnerTile.prototype,"WinnerTile");var BetInfoView=function(e){function t(){var t=e.call(this)||this;return t._teahouseNum=0,t._tableNum=0,t._dizhu=10,t._danzhuLimit=10,t._roomId=1,t._chip=0,t}return __extends(t,e),t.prototype.updateRound=function(e,t){this._curRound=e,this._curRound=Math.max(1,this._curRound),this._totalRound=t,null!=this._teahouseNum&&0!=this._teahouseNum?this._roomNumTF.text="茶楼号："+this._teahouseNum+" 第"+this._tableNum+"桌 局数："+this._curRound+"/"+this._totalRound:this._roomNumTF.text="房号："+this._roomId+"  局数："+this._curRound+"/"+this._totalRound,this._chip=0,this._chipTF.text=this._chip.toString()},t.prototype.init=function(e){var t=e.roomId,i=e.totalGames;this._roomId=t,this._curRound=1,this._totalRound=i,this._chip=0,this._chipTF.text=this._chip.toString(),this._teahouseNum=0,this._tableNum=0;var n=e.teaHouseNum;this._teahouseNum=n,null!=n&&0!=n?(this._teahouseNum=n,this._tableNum=e.tableNum,this._roomNumTF.text="茶楼号："+e.teaHouseNum+" 第"+this._tableNum+"桌 局数："+this._curRound+"/"+this._totalRound):this._roomNumTF.text="房号："+this._roomId+"  局数："+this._curRound+"/"+this._totalRound,this.updateCurrentRound(1)},t.prototype.updateCurrentRound=function(e){this._dizhuTF.text="当局押注轮次 "+e+"/"+t.MAXROUND},t.prototype.addChip=function(e){this._chip+=e,console.log("current chip = "+this._chip),this._chipTF.text=this._chip.toString()},t.prototype.initView=function(){this._roomNumTF=new egret.TextField,this._roomNumTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._roomNumTF.textColor=16777215,this._roomNumTF.size=25,this._roomNumTF.bold=!0,this._roomNumTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this._roomNumTF),this._roomNumTF.x=376,this._roomNumTF.text="房号：0  第1/1局",this._dizhuTF=new egret.TextField,this._dizhuTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._dizhuTF.textColor=16777215,this._dizhuTF.bold=!0,this._dizhuTF.size=25,this._dizhuTF.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this._dizhuTF),this._dizhuTF.text="当局押注轮次 1/"+t.MAXROUND;var e=new egret.Bitmap;e.texture=RES.getRes("game_json.xiazhujineBg"),this.addChild(e),e.x=340,e.y=149,this._chipTF=new egret.TextField,this._chipTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._chipTF.textColor=16777215,this._chipTF.size=17,this._chipTF.textAlign=egret.HorizontalAlign.LEFT,this._chipTF.x=390,this._chipTF.y=155,this.addChild(this._chipTF),this._chipTF.text="0"},t.MAXROUND=30,t}(BaseBattleUIView);__reflect(BetInfoView.prototype,"BetInfoView");var BiPaiView=function(e){function t(){var t=e.call(this)||this;return t._timeoutId=-1,t.initView(),t}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.show=function(e){var i=this;this._data=e,t.isShow=!0,GameGlobal.stage.addChild(this);var n={nickName:MyUserInfo.getInstance().userName,headImgUrl:MyUserInfo.getInstance().faceUrl};this._leftPlayerView.setPlayerInfo(n);var a=e.loserId,s=e.winnerId,o={};o=this._data.winnerId==MyUserInfo.getInstance().userId?GameGlobal.mapLayer.getBattle().getPlayerInfoById(a):GameGlobal.mapLayer.getBattle().getPlayerInfoById(s),this._rightPlayerView.setPlayerInfo(o),SoundManager.instance.playSound("vs3_mp3"),egret.clearTimeout(this._timeoutId),this._timeoutId=egret.setTimeout(this.timeoutHandle,this,3e3),this._vsImg.y=-100,egret.Tween.get(this._vsImg).to({y:49},100,egret.Ease.backIn).call(function(){null==i._zhadanMc&&(i._zhadanMc=DUtils.createMovieClipByName("zhadan")),i._zhadanMc.frameRate=12,i._zhadanMc.gotoAndStop(1),SoundManager.instance.playSound("bomb_mp3"),i._data.winnerId==MyUserInfo.getInstance().userId?(i._zhadanMc.x=215,i._zhadanMc.y=-64):(i._zhadanMc.x=675,i._zhadanMc.y=-64),i.addChild(i._zhadanMc),MovieClipUtils.playOnce(i._zhadanMc,function(){GameEventManager.dispatchEvent("compareComplete",i._data)})},this)},t.prototype.timeoutHandle=function(){egret.clearTimeout(this._timeoutId),this.hide()},t.prototype.hide=function(){t.isShow=!1,GameGlobal.stage.contains(this)&&GameGlobal.stage.removeChild(this)},t.prototype.initView=function(){this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("bipaiBg_png"),this.addChild(this._bg),this._leftPlayerView=new PlayerBaseInfoView,this.addChild(this._leftPlayerView),this._leftPlayerView.x=55,this._leftPlayerView.y=20,this._rightCardGoup=new CardGroup,this._rightCardGoup.x=676,this._rightCardGoup.y=40,this.addChild(this._rightCardGoup),this._leftCardGoup=new CardGroup,this._leftCardGoup.x=216,this._leftCardGoup.y=40,this.addChild(this._leftCardGoup),this._rightPlayerView=new PlayerBaseInfoView,this.addChild(this._rightPlayerView),this._rightPlayerView.x=966,this._rightPlayerView.y=20,this._vsImg=new egret.Bitmap,this._vsImg.texture=RES.getRes("game_json.vs"),this.addChild(this._vsImg),this._vsImg.x=485,this._vsImg.y=49,this.touchEnabled=!0,this.y=168},t.isShow=!1,t}(egret.Sprite);__reflect(BiPaiView.prototype,"BiPaiView");var CardGroup=function(e){function t(){var t=e.call(this)||this;return t._isMySelf=!0,t._cardViews=[],t.initView(),t}return __extends(t,e),Object.defineProperty(t.prototype,"isMySelf",{set:function(e){this._isMySelf=e,e||this.setPokerSize(56/99,20)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e=this._cardViews.length,t=0;e>t;t++){var i=this._cardViews[t];i.showValue(!1),i.data=null}},t.prototype.setPokerSize=function(e,t){void 0===t&&(t=82);for(var i=this._cardViews.length,n=0;i>n;n++){var a=this._cardViews[n];a.scaleX=a.scaleY=e,a.x=n*t}},t.prototype.setPokerData=function(e){for(var t=e.length,i=[],n=0;t>n;n++){var a=new Card(e[n].cardValue,e[n].cardSuit);i.push(a)}for(var t=i.length,n=0;t>n;n++){var s=this._cardViews[n];s.data=i[n]}},t.prototype.showPokerValue=function(e,t){void 0===t&&(t=!1);for(var i=this._cardViews.length,n=0;i>n;n++){var a=this._cardViews[n];a.showValue(e,t),this._isMySelf?a.x=108*n:(a.scaleX=56/99,a.scaleY=56/99,a.x=20*n)}},t.prototype.initView=function(){this.resetCards()},t.prototype.resetCards=function(){for(;this.numChildren>0;)this.removeChildAt(0);this._cardViews=[];for(var e,t=3,i=0;t>i;i++)e=new CardView,e.x=108*i,this.addChild(e),this._cardViews.push(e)},t}(egret.Sprite);__reflect(CardGroup.prototype,"CardGroup");var ChatPaopao=function(e){function t(t){void 0===t&&(t=0);var i=e.call(this)||this;return i._direction=0,i._direction=t,i.initView(),i}return __extends(t,e),t.prototype.show=function(e,t){if(void 0===t&&(t=1),this._contentTF.text=e,3==t){var i=NN_ChatView.WORDS2.indexOf(e);0==MyUserInfo.getInstance().gender?SoundManager.instance.playSound("word1-"+i+"_mp3"):SoundManager.instance.playSound("word1-"+i+"2_mp3")}},t.prototype.initView=function(){this._bg=new egret.Bitmap,this.addChild(this._bg),this._contentTF=new egret.TextField,this._contentTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._contentTF.size=18,this._contentTF.textColor=16777215,this._contentTF.textAlign=egret.HorizontalAlign.LEFT,this._contentTF.multiline=!0,this._contentTF.wordWrap=!0,this._contentTF.width=184,this._contentTF.height=60,this._contentTF.text="",this._contentTF.x=5,this._contentTF.y=0,this.addChild(this._contentTF),0==this._direction?(this._bg.texture=RES.getRes("common_json.chatpaopao"),this._contentTF.x=15,this._contentTF.y=10):(this._bg.texture=RES.getRes("common_json.chatpaopao"),this._contentTF.x=15,this._contentTF.y=10)},t}(egret.Sprite);__reflect(ChatPaopao.prototype,"ChatPaopao");var ChipView=function(e){function t(){var t=e.call(this)||this;return t._chipImg=new egret.Bitmap,t._chipImg.texture=RES.getRes("game_json.chip1"),t.addChild(t._chipImg),t._chipImg.anchorOffsetX=.5*t._chipImg.width,t._chipImg.anchorOffsetY=.5*t._chipImg.height,t._chipImg.x=.5*t._chipImg.width,t._chipImg.y=.5*t._chipImg.height,t}return __extends(t,e),t.prototype.setValue=function(e){this._chipImg.texture=RES.getRes("game_json.chip"+e)},t}(egret.Sprite);__reflect(ChipView.prototype,"ChipView");var GameResult=function(e){function t(){var t=e.call(this)||this;return t._showJiesuan=!1,t.init(),t}return __extends(t,e),t.prototype.updateBtn=function(e){1==e?this._showJiesuan=!0:this._showJiesuan=!1},t.prototype.setData=function(e){this._data=e;var t=e.curWinnerId;t==MyUserInfo.getInstance().userId?(this._resultImg.texture=RES.getRes("game_json.winText"),SoundManager.instance.playSound("win_mp3")):(this._resultImg.texture=RES.getRes("game_json.failText"),SoundManager.instance.playSound("fail_mp3"));for(var i=e.playerList,n=0;n<i.length;n++){var a=i[n];if(a.playerId==MyUserInfo.getInstance().userId){var s=a.cardList;null!=s&&3==s.length}}for(;this._listContainer.numChildren>0;)this._listContainer.removeChildAt(0);for(var o,r=i.length,n=0;r>n;n++)o=new PlayerResultTile,o.setData(i[n]),this._listContainer.addChild(o),o.y=85*n},t.prototype.showComplete=function(){this._bg=new egret.Bitmap,this.addChild(this._bg),this._bg.texture=RES.getRes("jiesuanBg_png"),this._resultImg=new egret.Bitmap,this._resultImg.texture=RES.getRes("game_json.winText"),this.addChild(this._resultImg),this._resultImg.x=173,this._resultImg.y=-23;var e=new egret.TextField;e.fontFamily=GameGlobal.DEFAULT_FONT_NAME,e.textColor=15644463,e.size=25,e.bold=!0,e.textAlign=egret.HorizontalAlign.LEFT,e.x=38,e.y=80,e.text="玩家信息",this.addChild(e);var t=new egret.TextField;t.fontFamily=GameGlobal.DEFAULT_FONT_NAME,t.textColor=15644463,t.size=25,t.bold=!0,t.textAlign=egret.HorizontalAlign.LEFT,t.x=280,t.y=80,t.text="总成绩",this.addChild(t);var i=new egret.TextField;i.fontFamily=GameGlobal.DEFAULT_FONT_NAME,i.textColor=15644463,i.size=25,i.bold=!0,i.textAlign=egret.HorizontalAlign.LEFT,i.x=487,i.y=80,i.text="牌型",this.addChild(i),this._listContainer=new egret.DisplayObjectContainer,this.addChild(this._listContainer),this._listContainer.x=43,this._listContainer.y=153,this._closeBtn=new DButton("game_json.closeBtn3"),this.addChild(this._closeBtn),this._closeBtn.x=522,this._closeBtn.y=-18,this.iframeWidth=this._bg.width,this.iframeHeight=this._bg.height;var n=new egret.Shape;n.graphics.beginFill(0,.5),n.graphics.drawRect(0,0,GameGlobal.stage.stageWidth,GameGlobal.stage.stageHeight),n.graphics.endFill(),this.addChildAt(n,0),n.x=-(GameGlobal.stage.stageWidth-this.iframeWidth)>>1,n.y=-(GameGlobal.stage.stageHeight-this.iframeHeight)>>1,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(e){this._showJiesuan?(GameGlobal.iframeLayer.showIFrame(JieSuanView,this._data),GameGlobal.iframeLayer.hideIFrame2(t)):GameEventManager.dispatchEvent(GameEventManager.NEXT_ROUND)},t}(IFrameBase);__reflect(GameResult.prototype,"GameResult");var PlayerResultTile=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.prototype.setData=function(e){this._data=e,this._winTF.text=e.curScore;var t=GameGlobal.mapLayer.getBattle().getPlayerInfoById(e.playerId);if(null!=t){var i=t.nickName;i.length>10&&(i=i.substr(0,10)+"..."),this._nickNameTF.text=i;var n=t.headImgUrl;null!=n&&this.loadFace(n)}var a=e.cardList;null!=a&&3==a.length&&(this._cardGroup.setPokerData(a),this._cardGroup.showPokerValue(!0))},t.prototype.loadFace=function(e){var t=new egret.ImageLoader;t.addEventListener(egret.Event.COMPLETE,this.imageComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFaceError,this),t.load(e)},t.prototype.onLoadFaceError=function(e){console.log("load face ioerror")},t.prototype.imageComplete=function(e){console.log("load face complete"),this._faceImg.texture=e.target.data,this._faceImg.width=34,this._faceImg.height=35},t.prototype.initView=function(){this._faceImg=new egret.Bitmap,this.addChild(this._faceImg),this._nickNameTF=new egret.TextField,this._nickNameTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._nickNameTF.textColor=16777215,this._nickNameTF.size=20,this._nickNameTF.bold=!0,this._nickNameTF.textAlign=egret.HorizontalAlign.LEFT,this._nickNameTF.x=51,this._nickNameTF.y=5,this._nickNameTF.text="--",this.addChild(this._nickNameTF),this._cardGroup=new CardGroup,this._cardGroup.x=408,this._cardGroup.y=-18,this.addChild(this._cardGroup),this._cardGroup.isMySelf=!1,this._cardGroup.setPokerSize(.61,25);var e=new egret.Bitmap;this.addChild(e),e.texture=RES.getRes("game_json.chipDefault"),e.x=242,e.y=4,this._winTF=new egret.TextField,this._winTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._winTF.textColor=16777215,this._winTF.size=25,this._winTF.bold=!0,this._winTF.textAlign=egret.HorizontalAlign.LEFT,this._winTF.x=285,this._winTF.y=2,this._winTF.text="--",this.addChild(this._winTF)},t}(egret.Sprite);__reflect(PlayerResultTile.prototype,"PlayerResultTile");var GameSettingView=function(e){function t(){var t=e.call(this)||this;return t._buttons=[],t._buttonNames=["setBtn2","helpBtn","quitBtn2"],t.initView(),t}return __extends(t,e),t.prototype.initView=function(){for(var e,t=this._buttonNames.length,i=0;t>i;i++)e=new DButton("game_json."+this._buttonNames[i]),this.addChild(e),e.y=69*i,e.name=this._buttonNames[i],e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(e){var t=e.currentTarget.name;"setBtn2"==t?GameGlobal.iframeLayer.showIFrame(SettingView):"helpBtn"==t||(AlertView.getInstance().setConfirmCallBack(this.quitConfirm,this),AlertView.getInstance().show("是否确定解散房间？",AlertView.CONFIRM_MODE))},t.prototype.quitConfirm=function(){var e={};e.msgType=NetAction.dissolveRoom,e.token=GameModel.instance().token,e.gameType=GameGlobal.gameType,e.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(e)},t}(egret.Sprite);__reflect(GameSettingView.prototype,"GameSettingView");var JieSuanView=function(e){function t(){var t=e.call(this)||this;return t.skinName="NNGameResultSkin",t.name="NNGameResult",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=JieSuanTile},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t)},t.prototype.show=function(){var e=this;if(null!=this.uiOpenData){var t=this.uiOpenData.playerList;t.forEach(function(i,n){t[n].playerId==e.uiOpenData.totalWinnerId&&(t[n].isWin=!0)},this),this.dataList=new eui.ArrayCollection(t),this.list.dataProvider=this.dataList}this.bindButton(this.closeBtn),this.bindButton(this.shareBtn)},t.prototype.touchBindButtonHandler=function(t){if(e.prototype.touchBindButtonHandler.call(this,t),t==this.closeBtn){GameEventManager.addEvent(NetAction.backToHall.toString(),this.backToHallResponse,this);var i={};i.msgType=NetAction.backToHall,i.msg={playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(i)}else if(t==this.shareBtn){var n=new egret.RenderTexture;n.drawToTexture(this,new egret.Rectangle(0,0,this.width,this.height));var a="";n.saveToFile("image/png","result.png"),egret.ExternalInterface.call("shareResult",a)}},t.prototype.backToHallResponse=function(e){GameEventManager.dispatchEvent(GameEventManager.QUIT_ROOM)},t}(IFrameBase);__reflect(JieSuanView.prototype,"JieSuanView");var JieSuanTile=function(e){function t(){var t=e.call(this)||this;return t.skinName="NNGameResultTileSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._faceImg=new DImage(52,54),this._faceImg.x=7,this._faceImg.y=7,this.addChild(this._faceImg),this.winnerIcon.visible=!1,this.updateView()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),LogUtils.log("this.data = "+this.data),this.updateView()},t.prototype.updateView=function(){if(null!=this.data){this.idTF.text="ID:"+this.data.playerId;for(var e=0;7>e;e++)this["cardTypeTF"+e+"_0"].text="",this["cardTypeTF"+e+"_1"].text="";this.cardTypeTF0_0.text="胜",this.cardTypeTF0_1.text=+this.data.winTimes,this.cardTypeTF1_0.text="负",this.cardTypeTF1_1.text=+this.data.loseTimes,this.cardTypeTF2_0.text="最大牌",this.cardTypeTF2_1.text=PlayerType.getPokerTypeName(this.data.maxCardType);var t=GameGlobal.mapLayer.getBattle().getPlayerInfoById(this.data.playerId),i=t.nickName,n=StringUtils.getStringLen(i);n>6&&(i=i.substr(0,6)+"..."),this.nickNameTF.text=i,this._faceImg.load(t.headImgUrl);var a=this.data.totalScore,n=a.toString().length;this.data.isWin&&(this.winnerIcon.visible=!0),this.bn&&this.contains(this.bn)&&this.removeChild(this.bn),a>0?this.bn=new DBitmapNumber(a,30,2):this.bn=new DBitmapNumber(a,30,1),this.addChild(this.bn),this.bn.x=155-30*n>>1,this.bn.y=366}},t}(eui.ItemRenderer);__reflect(JieSuanTile.prototype,"JieSuanTile");var MyPlayerView=function(e){function t(){var t=e.call(this)||this;t._faceBg.visible=!1;var i=DUtils.createBitmapByName("nnGame2_json.nameBg");i.x=154,i.y=151,t.addChild(i),t._nickNameTF=new egret.TextField,t._nickNameTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,t._nickNameTF.size=30,t._nickNameTF.textColor=16777215,t._nickNameTF.textAlign=egret.HorizontalAlign.CENTER,t._nickNameTF.width=154,t._nickNameTF.x=146,t._nickNameTF.y=157,t.addChild(t._nickNameTF),t._nickNameTF.text="...";var n=DUtils.createBitmapByName("nnGame2_json.nameBg");return n.x=389,n.y=151,t.addChild(n),t._scoreTF=new egret.TextField,t._scoreTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,t._scoreTF.size=30,t._scoreTF.textColor=16767830,t._scoreTF.textAlign=egret.HorizontalAlign.CENTER,t._scoreTF.width=154,t._scoreTF.x=380,t._scoreTF.y=157,t.addChild(t._scoreTF),t._scoreTF.text="",t._kanpaiTip=new egret.Bitmap,t._kanpaiTip.texture=RES.getRes("zjhGame_json.kanpaiTip"),t.addChild(t._kanpaiTip),t._kanpaiTip.x=444,t._kanpaiTip.y=43,t._kanpaiTip.visible=!1,t._cardGroup.touchChildren=!1,t._cardGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTouchCard,t),t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._cardGroup.showPokerValue(!1),this._cardGroup.visible=!1,this._kanpaiTip.visible=!1},t.prototype.hidePoker=function(){this._kanpaiTip.visible=!1,this._cardGroup.showPokerValue(!1),this._cardGroup.visible=!1,this._giveuped.visible=!1},t.prototype.lookPoker=function(t,i){void 0===i&&(i=!0),e.prototype.lookPoker.call(this,t,i),null!=t&&t.length>0&&(this._kanpaiTip.visible=!1)},t.prototype.updateStatus=function(t){e.prototype.updateStatus.call(this,t),this._kanpaiTip.visible=t==PlayerView.NOT_LOOK&&this._cardGroup.visible},Object.defineProperty(t.prototype,"canLook",{set:function(e){e?(this._kanpaiTip.visible=!0,this._cardGroup.touchEnabled=!0):(this._kanpaiTip.visible=!1,this._cardGroup.touchEnabled=!1)},enumerable:!0,configurable:!0}),t.prototype.onTouchCard=function(e){var t={};t.msgType=NetAction.look,t.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(t)},t}(PlayerView);__reflect(MyPlayerView.prototype,"MyPlayerView");var OtherPlayerView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setCompareFlag=function(e){this._compareFlag.visible=e,this._compareFlag.visible?this._faceImg.touchEnabled=!1:this._faceImg.touchEnabled=!0},t.prototype.setPosition=function(e){this._position=e,5==e?(this._cardGroup.x=216,this._cardGroup.y=0,this._readyFlag.x=222,this._readyFlag.y=30,this._betImg.x=-1,this._betImg.y=83):1==e?(this._cardGroup.x=-124,this._cardGroup.y=0,this._betImg.x=78,this._betImg.y=88,this._readyFlag.x=-38,this._readyFlag.y=115):2==e?(this._cardGroup.x=-54,this._cardGroup.y=83,this._betImg.x=77,this._betImg.y=88,this._readyFlag.x=-38,this._readyFlag.y=115):3==e?(this._cardGroup.x=46,this._cardGroup.y=84,this._betImg.x=-116,this._betImg.y=29,this._readyFlag.x=65,this._readyFlag.y=114):(this._cardGroup.x=162,this._cardGroup.y=84,this._betImg.x=-2,this._betImg.y=86,this._readyFlag.x=222,this._readyFlag.y=30),this._goldTF.x=this._betImg.x+34,this._goldTF.y=this._betImg.y+10,this._kanpaied.x=this._cardGroup.x-12,this._kanpaied.y=this._cardGroup.y+23,this._giveuped.x=this._cardGroup.x-12,this._giveuped.y=this._cardGroup.y+23,this._bipaiFail.x=this._cardGroup.x-12,this._bipaiFail.y=this._cardGroup.y+23},t.prototype.setData=function(t){e.prototype.setData.call(this,t)},t.prototype.reset=function(){e.prototype.reset.call(this)},t.prototype.initView=function(){e.prototype.initView.call(this),this._faceImg.setWidth(54),this._faceImg.setHeight(54),this._faceImg.x=12,this._faceImg.y=12,this._selectImg.y=-90,egret.Tween.removeTweens(this._selectImg),egret.Tween.get(this._selectImg,{loop:!0}).to({y:-70},800).to({y:-110},800),this._zhuangFlag.texture=RES.getRes("nnGame2_json.n_zhuangKuang2"),this._zhuangFlag.x=12,this._zhuangFlag.y=-8,this._nickNameTF=new egret.TextField,this._nickNameTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._nickNameTF.size=16,this._nickNameTF.textColor=16777215,this._nickNameTF.textAlign=egret.HorizontalAlign.CENTER,this._nickNameTF.width=100,this._nickNameTF.x=78,this._nickNameTF.y=12,this.addChild(this._nickNameTF),this._nickNameTF.text="...",this._scoreTF=new egret.TextField,this._scoreTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._scoreTF.size=16,this._scoreTF.textColor=16767830,this._scoreTF.textAlign=egret.HorizontalAlign.CENTER,this._scoreTF.width=62,this._scoreTF.x=91,this._scoreTF.y=45,this.addChild(this._scoreTF),this._scoreTF.text="0",this._cardGroup.isMySelf=!1,this._kanpaied.x=this._cardGroup.x+6,this._kanpaied.y=this._cardGroup.y+50,this._giveuped.x=this._cardGroup.x+6,this._giveuped.y=this._cardGroup.y+50,this._bipaiFail.x=this._cardGroup.x+6,this._bipaiFail.y=this._cardGroup.y+50,this._compareFlag=new egret.Bitmap,this._compareFlag.texture=RES.getRes("zjhGame_json.bipaiFlag"),this.addChild(this._compareFlag),this._compareFlag.anchorOffsetX=.5*this._compareFlag.width,this._compareFlag.anchorOffsetY=.5*this._compareFlag.height,this._compareFlag.x=this._faceImg.x+27,this._compareFlag.y=this._faceImg.y+27,this._compareFlag.visible=!1},t}(PlayerView);__reflect(OtherPlayerView.prototype,"OtherPlayerView");var PlayerBaseInfoView=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.prototype.setPlayerInfo=function(e){if(null!=e){this._data=e,this._nickNameTF.text=e.nickName;var t=e.headImgUrl;null!=t&&this._faceImg.load(e.headImgUrl)}},t.prototype.initView=function(){this._faceBg=new egret.Bitmap,this._faceBg.texture=RES.getRes("game_json.faceBg"),this.addChild(this._faceBg),this._faceImg=new DImage(101,96),this._faceImg.x=7,this._faceImg.y=28,this.addChild(this._faceImg),this._nickNameTF=new egret.TextField,this._nickNameTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._nickNameTF.size=16,this._nickNameTF.textColor=16777215,this._nickNameTF.textAlign=egret.HorizontalAlign.CENTER,this._nickNameTF.width=104,this._nickNameTF.x=6,this._nickNameTF.y=4,this.addChild(this._nickNameTF),this._nickNameTF.text="...",this._goldTF=new egret.TextField,this._goldTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._goldTF.size=20,this._goldTF.textColor=16767830,this._goldTF.textAlign=egret.HorizontalAlign.CENTER,this._goldTF.width=104,this._goldTF.x=6,this._goldTF.y=131,this.addChild(this._goldTF),this._goldTF.text="0"},t}(egret.Sprite);__reflect(PlayerBaseInfoView.prototype,"PlayerBaseInfoView");var PlayerInfoView=function(e){function t(){var t=e.call(this)||this;return t.skinName="PlayerDetailInfoSkin2",t}return __extends(t,e),t.prototype.tweenShow=function(){e.prototype.tweenShow.call(this);var t="";this.ipTF.text="",this.distanceTF.text="";var i="";if(null!=this.uiOpenData){var n=this.uiOpenData.playerId;if(n==MyUserInfo.getInstance().userId)i=MyUserInfo.getInstance().userName,this.idTF.text="ID："+MyUserInfo.getInstance().userId,this.ipTF.text=MyUserInfo.getInstance().city,t=MyUserInfo.getInstance().faceUrl,this.distanceTF.text="",this.bq1.visible=this.bq2.visible=this.bq3.visible=this.bq4.visible=this.bq5.visible=!1;else{this.bq1.visible=this.bq2.visible=this.bq3.visible=this.bq4.visible=this.bq5.visible=!0,i=this.uiOpenData.nickName,this.idTF.text="ID："+this.uiOpenData.playerId,t=this.uiOpenData.headImgUrl,GameEventManager.removeEvent(NetAction.playerInfo.toString(),this.onPlayerInfoResponse,this),GameEventManager.addEvent(NetAction.playerInfo.toString(),this.onPlayerInfoResponse,this);var a={};a.msgType=NetAction.playerInfo,a.token=GameModel.instance().token,a.msg={otherPlayerId:this.uiOpenData.playerId},SocketCommand.getInstance().send(a)}}i.length>8&&(i=i.substr(0,8)+"..."),this.nickNameTF.text=i,this._faceImg.load(t),this.bindButton(this.bq1),this.bindButton(this.bq2),this.bindButton(this.bq3),this.bindButton(this.bq4),this.bindButton(this.bq5)},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this._faceImg=new DImage(124,124,"hall_json.testface2"),this.mainView.addChild(this._faceImg),this._faceImg.x=45,this._faceImg.y=88},t.prototype.setData=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1)},t.prototype.onPlayerInfoResponse=function(e){var t=e.data,i=t.data;this.ipTF.text=i.address,this.distanceTF.text=i.distance},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t);var i="xh";t==this.bq1?i="dzh":t==this.bq2?i="hc":t==this.bq3?i="pj":t==this.bq4?i="jd":t==this.bq5;var n={};n.msgType=NetAction.chatMsg,n.msg={chatType:5,chatMsg:i,otherPlayerId:this.uiOpenData.playerId},SocketCommand.getInstance().send(n),this.close()},t}(IFrameBase);__reflect(PlayerInfoView.prototype,"PlayerInfoView");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t._game=null,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),egret.Capabilities.isMobile||(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,this.stage.orientation="auto"),GameGlobal.init(this,this.stage),egret.TextField.default_fontFamily=eui.Label.default_fontFamily=GameGlobal.DEFAULT_FONT_NAME,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),this.showVersion()},t.prototype.showVersion=function(){GameGlobal.showVersion&&(GameGlobal.versionTF=new egret.TextField,GameGlobal.versionTF.textAlign=egret.HorizontalAlign.LEFT,GameGlobal.versionTF.textColor=16777215,GameGlobal.versionTF.size=14,GameGlobal.versionTF.text="V"+GameGlobal.version,GameGlobal.stage.addChild(GameGlobal.versionTF),GameGlobal.versionTF.x=GameGlobal.stageW-GameGlobal.versionTF.textWidth-10,GameGlobal.versionTF.y=GameGlobal.stageH-GameGlobal.versionTF.textHeight-10,GameGlobal.versionTF.touchEnabled=!0,GameGlobal.versionTF.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchVersion,this))},t.prototype.onTouchVersion=function(e){},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading"),RES.loadGroup("sound",2)},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName?(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene()):"loading"==e.groupName?(egret.ExternalInterface.call("egret_init_complete","egret_init_complete"),this.loadingView=new LoadingUI,this.addChild(this.loadingView),RES.loadGroup("preload")):"sound"==e.groupName&&SoundManager.instance.playMusic("preloadMusic_mp3")},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.startCreateScene=function(){GameEventManager.addEvent(GameEventManager.LOGIN_SUCCESS,this.onLoginSuccess,this);var e=this;egret.ExternalInterface.addCallback("loginCallBack",function(t){GameModel.instance().code=t;var i=new CommandVo;i.action=HttpCommand.LOGIN,HttpCommand.send(i,e,e.loginResponse)}),this.loadingView&&this.loadingView.showLogin(),egret.ExternalInterface.addCallback("exitGame",function(t){AlertView.getInstance().setConfirmCallBack(e.quitConfirm,e),AlertView.getInstance().show("确定要离开游戏吗？",AlertView.CONFIRM_MODE)})},t.prototype.onLoginSuccess=function(e){void 0===e&&(e=null),GameEventManager.addEvent(GameEventManager.SOCKET_CONNECTED,this.onSocketConnected,this),SocketCommand.getInstance().connect(),DataLoading.getInstance().show()},t.prototype.onSocketConnected=function(e){if(GameEventManager.removeEvent(GameEventManager.SOCKET_CONNECTED,this.onSocketConnected,this),0!=GameModel.instance().roomId)this.startGame();else{GameEventManager.addEvent(NetAction.enterHall.toString(),this.onEnterHallResponse,this);var t={};t.msgType=NetAction.enterHall,t.gameType=0,t.token=GameModel.instance().token,t.msg={playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(t)}},t.prototype.onEnterHallResponse=function(e){void 0===e&&(e=null),GameEventManager.removeEvent(NetAction.enterHall.toString(),this.onEnterHallResponse,this),DataLoading.getInstance().hide(),alert("大厅"),this.startGame()},t.prototype.startGame=function(){DataLoading.getInstance().hide(),this.loadingView&&this.contains(this.loadingView)&&this.removeChild(this.loadingView),this._game=new Game,this.addChild(this._game),this._game.init(),egret.ExternalInterface.addCallback("getPositionCallBack",function(e){var t=e.split("|"),i=t[0],n=t[1],a=t[2];MyUserInfo.getInstance().longitude=i,MyUserInfo.getInstance().latitude=n,MyUserInfo.getInstance().city=a;var s={};s.msgType=NetAction.updatePosition,s.token=GameModel.instance().token,s.gameType=0,s.msg={address:MyUserInfo.getInstance().city,x:i,y:n},SocketCommand.getInstance().send(s)}),egret.ExternalInterface.call("getPosition","getPosition")},t.prototype.quitConfirm=function(){egret.ExternalInterface.call("exitGame","exitGame")},t.prototype.loginResponse=function(e){var t=e.data;MyUserInfo.getInstance().init(t),GameGlobal.SOCKET_IP=t.serverIp,GameGlobal.SOCKET_PORT=t.port,GameModel.instance().token=t.token,egret.ExternalInterface.call("sendToken",GameGlobal.UPDATE_VOICE_API+"|"+GameModel.instance().token),t.hasOwnProperty("roomId")&&null!=t.roomId&&(GameModel.instance().roomId=t.roomId),t.hasOwnProperty("teaHouseNum")&&null!=t.teaHouseNum&&(GameModel.instance().teaHouseNum=t.teaHouseNum),this.onLoginSuccess()
},t}(eui.UILayer);__reflect(Main.prototype,"Main");var RuleView2=function(e){function t(){var t=e.call(this)||this;return t.skinName="RuleSkin2",t.name="RuleView2",t}return __extends(t,e),t.prototype.show=function(){this.bindButton(this.closeBtn)},t.prototype.childrenCreated=function(){},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t)},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t),t==this.closeBtn&&this.close()},t}(IFrameBase);__reflect(RuleView2.prototype,"RuleView2");var ZjhBattleView=function(e){function t(){var t=e.call(this)||this;return t._otherPlayerViews=[],t._countDownTime=10,t._isRecording=!1,t._lastStakeScore=1,t._lastPlayerId="",t._currentPlayerId="",t._fapaiTimerId=-1,t._isTweening=!1,t}return __extends(t,e),t.prototype.init=function(e){if(void 0===e&&(e=null),this.dispose(),this._data=e,null==this._data)throw new Error("battle data is null!!!");GameModel.instance().roomId=this._data.roomId;var i=this._data.roomOwnerId,n=this._data.roomBankerId,a=this._data.stakeButtom,s=-1;this._data.hasOwnProperty("status")&&(s=this._data.status),this._betInfoView.init(this._data),this._data.hasOwnProperty("curGame")&&this._betInfoView.updateRound(this._data.curGame,this._data.totalGames),this._playerDataHash=new HashMap;for(var o=this._data.playerList,r=o.length,h=1,l=PlayerView.NOT_READY,c=[],d=0;r>d;d++){var u=o[d],p=u.playerId;if(this._playerDataHash.put(p,u),p==MyUserInfo.getInstance().userId){if(this._myPlayerView.setData(u),this._myPlayerView.updateScore(u.totalScore),h=u.order,l=u.status,this._readyBtn.visible=!1,this._myPlayerView.updateStatus(l),l==PlayerView.READYED?this._readyBtn.visible=!1:l==PlayerView.NOT_READY?this._readyBtn.visible=!0:l==PlayerView.WATCHER?(this._myPlayerView.canLook=!1,this._myPlayerView.lookPoker([],!1)):l==PlayerView.LOOKED?(this._myPlayerView.lookPoker(u.cardList,!1),this._myPlayerView.canLook=!1,this._1fenBtn.setSkin("game_json.2fenBtn","game_json.2fenBtn2"),this._1fenBtn.value=2,this._2fenBtn.setSkin("game_json.4fenBtn","game_json.4fenBtn2"),this._2fenBtn.value=4,this._3fenBtn.setSkin("game_json.6fenBtn","game_json.6fenBtn2"),this._3fenBtn.value=6):(this._myPlayerView.canLook=!0,this._myPlayerView.lookPoker([],!1)),u.hasOwnProperty("onlineStatus")&&null!=u.onlineStatus&&this._myPlayerView.setOffline(1!=u.onlineStatus),s==t.GAMEING){0!=l&&this.betChip(MyUserInfo.getInstance().userId,a);var _=u.stakeScoreList;if(null!=_&&_.length>0)for(var g=_.length,m=0;g>m;m++)this.betChip(MyUserInfo.getInstance().userId,_[m])}}else c.push(o[d])}GameModel.instance().myOrder=h,this._otherPlayerViews=[],r=c.length;for(var y,d=0;r>d;d++){y=new OtherPlayerView;var f=c[d],T=f.order,v=f.status,b=GameUtls.sitId2LR(h,T);if(y.x=GameUtls.PLAYER_SEAT_POS[b-1][0],y.y=GameUtls.PLAYER_SEAT_POS[b-1][1],y.setPosition(b),y.setData(f),this.addChild(y),y.updateScore(f.totalScore),this._otherPlayerViews.push(y),y.updateStatus(f.status),4==f.status?y.lookPoker(f.cardList,!1):y.lookPoker([],!1),f.hasOwnProperty("onlineStatus")&&null!=f.onlineStatus&&y.setOffline(1!=f.onlineStatus),s==t.GAMEING){GameGlobal.iframeLayer.hideIFrame2(GameResult),0!=v&&this.betChip(f.playerId,a);var _=f.stakeScoreList;if(null!=_&&_.length>0){this._lastPlayerId=f.playerId;for(var g=_.length,m=0;g>m;m++)this.betChip(f.playerId,_[m])}SoundManager.instance.playSound("send-chip_mp3")}}if(this.addChild(this._emotionContainer),i==MyUserInfo.getInstance().userId?this._myPlayerView.isFang=!0:(y=this.getPlayerView(i),y&&(y.isFang=!0)),null!=n&&""!=n&&(n==MyUserInfo.getInstance().userId?this._myPlayerView.isZhuang=!0:(y=this.getPlayerView(n),y.isZhuang=!0)),s==t.ROUND_END){this._inviteBtn.visible=!1,GameGlobal.iframeLayer.showIFrame(GameResult);var w=GameGlobal.iframeLayer.getIFrame(GameResult);w.setData(this._data),w.updateBtn(0)}else if(s==t.GAME_END){this._inviteBtn.visible=!1,GameGlobal.iframeLayer.showIFrame(GameResult);var w=GameGlobal.iframeLayer.getIFrame(GameResult);w.setData(this._data),w.updateBtn(1)}else if(s==t.GAMEING&&(this._inviteBtn.visible=!1,this._data.hasOwnProperty("curPlayerId"))){var E=this._data.curPlayerId;this.updatePlayerTurn(E)}this.addNetEvents(),SoundManager.instance.playMusic("table_mp3")},t.prototype.clearTable=function(){egret.clearTimeout(this._fapaiTimerId),this._giveUpBtn.setEnabled(!1),this._compareBtn.setEnabled(!1),this._1fenBtn.setEnabled(!1),this._2fenBtn.setEnabled(!1),this._3fenBtn.setEnabled(!1),this._cancelCompareBtn.visible=!1,this._compareBtn.visible=!0,this._inviteBtn.visible=!0,this._readyBtn.visible=!0,this._myPlayerView.showMyTurn(!1);for(var e=this._otherPlayerViews.length,t=0;e>t;t++){var i=this._otherPlayerViews[t];i.reset(),i.visible=!1,i.stage&&this.removeChild(i)}for(this._otherPlayerViews=[],this._playerDataHash=new HashMap,this._myPlayerView.reset(),this._myPlayerView.visible=!0,this._lastPlayerId="",this._currentPlayerId="";this._chipContainer.numChildren>0;)this._chipContainer.removeChildAt(0);for(;this._emotionContainer.numChildren>0;){var n=this._emotionContainer.removeChildAt(0);n instanceof egret.Bitmap&&egret.Tween.removeTweens(n)}},t.prototype.dispose=function(){this.removeEvents(),this.clearTable(),GameGlobal.iframeLayer.hideIFrame2(NN_ChatView),GameModel.instance().roomId=0,this._countDownTimer.stop(),this._countDownTimer.reset(),this.countDown.visible=!1},t.prototype.initView=function(){this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("bg4_png"),this._bg.width=GameGlobal.stageW,this._bg.height=GameGlobal.stageH,this.addChild(this._bg),this._bottomBg=DUtils.createBitmapByName("n_bottomeBg_png"),this._bottomBg.y=586,this.addChild(this._bottomBg),this._betInfoView=new BetInfoView,this.addChild(this._betInfoView),this._betInfoView.x=177,this._betInfoView.y=12,this._recordBtn=new DButton("nnGame2_json.n_recordBtn"),this.addChild(this._recordBtn),this._recordBtn.x=1068,this._recordBtn.y=595,this._chatBtn=new DButton("nnGame2_json.n_chatBtn"),this.addChild(this._chatBtn),this._chatBtn.x=962,this._chatBtn.y=596,this._giveUpBtn=new DButton("zjhGame_json.giveUpBtn","zjhGame_json.giveUpBtn2"),this._giveUpBtn.x=925,this._giveUpBtn.y=510,this.addChild(this._giveUpBtn),this._compareBtn=new DButton("zjhGame_json.bipaiBtn","zjhGame_json.bipaiBtn2"),this._compareBtn.x=738,this._compareBtn.y=510,this.addChild(this._compareBtn),this._compareBtn.setEnabled(!1),this._cancelCompareBtn=new DButton("zjhGame_json.cancelBipaiBtn"),this._cancelCompareBtn.x=738,this._cancelCompareBtn.y=510,this.addChild(this._cancelCompareBtn),this._cancelCompareBtn.visible=!1,this._setBtn=new DButton("nnGame2_json.n_setBtn"),this.addChild(this._setBtn),this._setBtn.x=866,this._setBtn.y=596,this._quitBtn=new DButton("nnGame2_json.n_quitBtn"),this.addChild(this._quitBtn),this._quitBtn.x=1049,this._quitBtn.y=25,this._helpBtn=new DButton("nnGame2_json.n_helpBtn"),this.addChild(this._helpBtn),this._helpBtn.x=1048,this._helpBtn.y=108,this._readyBtn=new DButton("nnGame2_json.n_readyBtn"),this._readyBtn.x=484,this._readyBtn.y=324,this.addChild(this._readyBtn),this._inviteBtn=new DButton("nnGame2_json.n_inviteBtn"),this._inviteBtn.x=472,this._inviteBtn.y=241,this.addChild(this._inviteBtn),this.initFenBtns(),this._chipContainer=new egret.DisplayObjectContainer,this.addChild(this._chipContainer),this._myPlayerView=new MyPlayerView,this._myPlayerView.x=37,this._myPlayerView.y=444,this.addChild(this._myPlayerView),this._emotionContainer=new egret.DisplayObjectContainer,this.addChild(this._emotionContainer),this.countDown=new egret.DisplayObjectContainer,this.addChild(this.countDown),this.countDown.x=176,this.countDown.y=60,this.countDown.visible=!1;var e=DUtils.createBitmapByName("nnGame2_json.clockBg");this.countDown.addChild(e),this.countDownTF=new egret.TextField,this.countDownTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this.countDownTF.textColor=16777215,this.countDownTF.size=30,this.countDown.addChild(this.countDownTF),this.countDownTF.x=10,this.countDownTF.y=32,this.countDownTF.text="0",this.countDownTF.width=59,this.countDownTF.textAlign=egret.HorizontalAlign.CENTER,this._countDownTimer=new egret.Timer(1e3),this._countDownTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandle,this),this.addEvents(),this.resize()},t.prototype.onTimerHandle=function(e){this._countDownTime--,this._countDownTime=Math.max(this._countDownTime,0),this._countDownTime<=0&&(this._countDownTimer.stop(),this._countDownTimer.reset(),this.countDown.visible=!1),this.countDownTF.text=this._countDownTime.toString()},t.prototype.removeEvents=function(){GameEventManager.removeEvent(NetAction.ready.toString(),this.onReadyResponse,this),GameEventManager.removeEvent(NetAction.sayPoker.toString(),this.onSayPokerResponse,this),GameEventManager.removeEvent(NetAction.look.toString(),this.onLookPokerResponse,this),GameEventManager.removeEvent(NetAction.giveup.toString(),this.onGiveupPokerResponse,this),GameEventManager.removeEvent(NetAction.follow.toString(),this.onFollowResponse,this),GameEventManager.removeEvent(NetAction.compare.toString(),this.onCompareResponse,this),GameEventManager.removeEvent(NetAction.autoCompare.toString(),this.onAutoCompareResponse,this),GameEventManager.removeEvent(NetAction.chatMsg.toString(),this.onChatMsgResponse,this),GameEventManager.removeEvent(NetAction.offline.toString(),this.onOfflineResponse,this),GameEventManager.removeEvent(NetAction.online.toString(),this.onOnlineResponse,this),GameEventManager.removeEvent(NetAction.autodissolveRoom.toString(),this.autodissolveRoomResponse,this),GameEventManager.removeEvent(NetAction.countDown.toString(),this.onCountDownResponse,this)},t.prototype.onCountDownResponse=function(e){var t=e.data;t.data;this.countDown.visible=!0,this.countDownTF.text="10",this._countDownTimer.reset(),this._countDownTimer.start()},t.prototype.addNetEvents=function(){GameEventManager.addEvent(NetAction.ready.toString(),this.onReadyResponse,this),GameEventManager.addEvent(NetAction.sayPoker.toString(),this.onSayPokerResponse,this),GameEventManager.addEvent(NetAction.look.toString(),this.onLookPokerResponse,this),GameEventManager.addEvent(NetAction.giveup.toString(),this.onGiveupPokerResponse,this),GameEventManager.addEvent(NetAction.follow.toString(),this.onFollowResponse,this),GameEventManager.addEvent(NetAction.compare.toString(),this.onCompareResponse,this),GameEventManager.addEvent(NetAction.autoCompare.toString(),this.onAutoCompareResponse,this),GameEventManager.addEvent(NetAction.chatMsg.toString(),this.onChatMsgResponse,this),GameEventManager.addEvent(NetAction.offline.toString(),this.onOfflineResponse,this),GameEventManager.addEvent(NetAction.online.toString(),this.onOnlineResponse,this),GameEventManager.addEvent(NetAction.autodissolveRoom.toString(),this.autodissolveRoomResponse,this),GameEventManager.addEvent(NetAction.countDown.toString(),this.onCountDownResponse,this)},t.prototype.addEvents=function(){this._quitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._setBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._readyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._inviteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._giveUpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._compareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._cancelCompareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._chatBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._recordBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._1fenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._2fenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._3fenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._recordBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this._recordBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._recordBtn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchRelease,this),GameEventManager.addEvent("compareComplete",this.onCompareComplete,this),GameEventManager.addEvent(GameEventManager.NEXT_ROUND,this.onNextRound,this);var e=this;egret.ExternalInterface.addCallback("recordEndPlay",function(t){LogUtils.log("recordEndPlay"),e._myPlayerView.showRecord(!0),SoundManager.instance.isMusicOn=!1}),egret.ExternalInterface.addCallback("playMyRecordEnd",function(t){LogUtils.log("playMyRecordEnd"),e._myPlayerView.showRecord(!1),SoundManager.instance.isMusicOn=!0}),egret.ExternalInterface.addCallback("uploadRecordComplete",function(e){LogUtils.log("uploadRecordComplete::send record chat message");var t={};t.msgType=NetAction.chatMsg,t.msg={chatType:6,chatMsg:e},SocketCommand.getInstance().send(t)})},t.prototype.onTouchBegin=function(e){null==this._recordMc&&(this._recordMc=DUtils.createMovieClipByName("record")),this._recordMc.frameRate=12,this._recordMc.play(-1),this.addChild(this._recordMc),this._recordMc.x=GameGlobal.stageW-this._recordMc.width>>1,this._recordMc.y=GameGlobal.stageH-this._recordMc.height>>1,this._isRecording=!0,egret.ExternalInterface.call("recordBegin","recordBegin")},t.prototype.onTouchEnd=function(e){this._recordMc&&this.contains(this._recordMc)&&this.removeChild(this._recordMc),this._isRecording=!1,egret.ExternalInterface.call("recordEnd","recordEnd")},t.prototype.onTouchRelease=function(e){LogUtils.log("onTouchReleaseOutSize"),this._recordMc&&this.contains(this._recordMc)&&this.removeChild(this._recordMc),this._isRecording=!1,this._myPlayerView.showRecord(!1),egret.ExternalInterface.call("recordCancel","recordCancel")},t.prototype.onOfflineResponse=function(e){var t=e.data,i=t.data,n=i.playerId;if(n!=MyUserInfo.getInstance().userId){var a=this.getPlayerView(n);a&&a.setOffline(!0)}},t.prototype.onOnlineResponse=function(e){var t=e.data,i=t.data,n=i.playerId;if(n!=MyUserInfo.getInstance().userId){var a=this.getPlayerView(n);a.setOffline(!1)}},t.prototype.sendEmotionToPlayer=function(e,t,i){var n=this,a=new egret.Bitmap;a.texture=RES.getRes("emotion_json."+e),a.anchorOffsetX=.5*a.width,a.anchorOffsetY=.5*a.height;var s=this._myPlayerView.getChipBornPos();if(t!=MyUserInfo.getInstance().userId){var o=this.getPlayerView(t);s=o.getChipBornPos()}a.x=s[0],a.y=s[1],this._emotionContainer.addChild(a);var r=[0,0];if(i!=MyUserInfo.getInstance().userId){var o=this.getPlayerView(i);r=o.getChipBornPos()}else r=this._myPlayerView.getChipBornPos();egret.Tween.get(a).to({x:r[0],y:r[1]},800).call(function(t){egret.Tween.removeTweens(t),n._emotionContainer.contains(t)&&n._emotionContainer.removeChild(t);var i=DUtils.createMovieClipByName(e);i.frameRate=12,i.anchorOffsetX=.5*i.width,i.anchorOffsetY=.5*i.height,i.x=a.x,i.y=a.y,"jd"==e?(i.x=a.x-140,i.y=a.y-110):"dzh"==e?i.y=a.y-20:"pj"==e&&(i.x=a.x-10),n._emotionContainer.addChild(i),MovieClipUtils.playOnce(i,null)},this,[a])},t.prototype.onChatMsgResponse=function(e){var t=e.data,i=t.data,n=i.playerId,a=i.chatType,s=i.chatMsg,o=i.otherPlayerId;if(5==a)return void this.sendEmotionToPlayer(s,n,o);if(6==a){if(o==MyUserInfo.getInstance().userId)return;var r=this;egret.ExternalInterface.addCallback("playRecordEnd",function(e){var t=r.getPlayerView(e);t&&t.showRecord(!1),SoundManager.instance.isMusicOn=!0}),SoundManager.instance.isMusicOn=!1;var h=r.getPlayerView(o);h.showRecord(!0),egret.ExternalInterface.call("playRecord",o+"|"+s)}if(n==MyUserInfo.getInstance().userId)this._myPlayerView.showChatMsg(a,s);else{var h=this.getPlayerView(n);h.showChatMsg(a,s)}},t.prototype.autodissolveRoomResponse=function(e){var t=e.data;t.playerId;AlertView.getInstance().setConfirmCallBack(this.autodissolveRoomConfirm,this),AlertView.getInstance().show("由于玩家离开时间较长，房间自动解散，是否返回大厅？",AlertView.CONFIRM_MODE)},t.prototype.autodissolveRoomConfirm=function(){GameEventManager.dispatchEvent(GameEventManager.QUIT_ROOM)},t.prototype.onCompareComplete=function(e){var t=e.data;this.playerGetChip(t.winnerId)},t.prototype.onNextRound=function(){for(var e=this._otherPlayerViews.length,t=0;e>t;t++){var i=this._otherPlayerViews[t];i.setCompareFlag(!1),i.showMyTurn(!1),i.isZhuang=!1,i.updateStatus(-1)}this._giveUpBtn.setEnabled(!1),this._compareBtn.setEnabled(!1),this._1fenBtn.setEnabled(!1),this._2fenBtn.setEnabled(!1),this._3fenBtn.setEnabled(!1),this._cancelCompareBtn.visible=!1,this._compareBtn.visible=!0;var n={};n.msgType=NetAction.ready,n.msg={roomId:GameModel.instance().roomId},SocketCommand.getInstance().send(n),GameGlobal.iframeLayer.hideIFrame2(GameResult)},t.prototype.onJiesuanResponse=function(e){var t=e.data,i=t.data;GameGlobal.iframeLayer.showIFrame(JieSuanView,i)},t.prototype.onAutoCompareResponse=function(e){for(var t=e.data,i=t.data,n=i.playerList,a=n.length,s=0;a>s;s++){var o=n[s].playerId,r=n[s].status;if(o==MyUserInfo.getInstance().userId)this._myPlayerView.updateStatus(r),this._myPlayerView.updateScore(n[s].totalScore),this._myPlayerView.lookPoker(n[s].cardList);else{var h=this.getPlayerView(o);h.updateStatus(r),h.updateScore(n[s].totalScore),h.lookPoker(n[s].cardList)}}var l=i.curWinnerId;this.playerGetChip(l),this._cancelCompareBtn.visible=!1,this._compareBtn.visible=!0,GameGlobal.iframeLayer.showIFrame(GameResult);var c=GameGlobal.iframeLayer.getIFrame(GameResult);c.setData(i);var r=i.status;4==r?c.updateBtn(1):c.updateBtn(0)},t.prototype.playerGetChip=function(e){var t=this,i=this._chipContainer.numChildren,n=[];if(e==MyUserInfo.getInstance().userId)n=this._myPlayerView.getChipBornPos();else{var a=this.getPlayerView(e);n=a.getChipBornPos()}for(var s,o=0;i>o;o++)s=this._chipContainer.getChildAt(o),egret.Tween.get(s).to({x:n[0],y:n[1]},500).to({alpha:0},100).call(function(){s&&t._chipContainer.contains(s)&&t._chipContainer.removeChild(s)},this);SoundManager.instance.playSound("get-chip_mp3")},t.prototype.onCompareResponse=function(e){var t=e.data,i=t.data,n=i.stakeScore,a=i.curPlayerId,s=(i.winnerId,i.loserId);this._lastStakeScore=n;for(var o=this._otherPlayerViews.length,r=0;o>r;r++){var h=this._otherPlayerViews[r];h.touchEnabled=!1,h.setCompareFlag(!1)}if(s==MyUserInfo.getInstance().userId)this._myPlayerView.updateStatus(PlayerView.GIVEUP2);else{var h=this.getPlayerView(s);h&&h.updateStatus(PlayerView.GIVEUP2)}BiPaiView.getInstance().show(i),this.updatePlayerTurn(a)},t.prototype.updatePlayerTurn=function(e,t){void 0===t&&(t=1);for(var i=this._otherPlayerViews.length,n=0;i>n;n++){var a=this._otherPlayerViews[n];a.showMyTurn(!1)}if(this._myPlayerView.showMyTurn(!1),this._giveUpBtn.setEnabled(!1),this._compareBtn.setEnabled(!1),this._1fenBtn.setEnabled(!1),this._2fenBtn.setEnabled(!1),this._3fenBtn.setEnabled(!1),this._currentPlayerId=e,e!=MyUserInfo.getInstance().userId){var a=this.getPlayerView(e);a&&a.showMyTurn(!0)}else{this._myPlayerView.showMyTurn(!0),this._giveUpBtn.setEnabled(!0);var s=this.getActivePlayerList(),o=s.length;1>=o?this._compareBtn.setEnabled(!0):this._compareBtn.setEnabled(this._myPlayerView.isKanpai),this.updateBetRule()}},t.prototype.updateBetRule=function(){if(LogUtils.log("this._lastPlayerId = "+this._lastPlayerId+",lastStakeScoe = "+this._lastStakeScore),""!=this._lastPlayerId&&this._lastPlayerId!=MyUserInfo.getInstance().userId){this._1fenBtn.setEnabled(!0),this._2fenBtn.setEnabled(!0),this._3fenBtn.setEnabled(!0);var e=this.getPlayerView(this._lastPlayerId);if(null!=e)if(LogUtils.log("playerView.isKanpai = "+e.isKanpai),LogUtils.log("_myPlayerView.isKanpai = "+this._myPlayerView.isKanpai),e.isKanpai)if(this._myPlayerView.isKanpai)this._1fenBtn.value<this._lastStakeScore&&this._1fenBtn.setEnabled(!1),this._2fenBtn.value<this._lastStakeScore&&this._2fenBtn.setEnabled(!1),this._3fenBtn.value<this._lastStakeScore&&this._3fenBtn.setEnabled(!1);else{var t=this._lastStakeScore;t>3&&(t/=2),this._1fenBtn.value<t&&this._1fenBtn.setEnabled(!1),this._2fenBtn.value<t&&this._2fenBtn.setEnabled(!1),this._3fenBtn.value<t&&this._3fenBtn.setEnabled(!1)}else this._myPlayerView.isKanpai?(this._1fenBtn.value<2*this._lastStakeScore&&this._1fenBtn.setEnabled(!1),this._2fenBtn.value<2*this._lastStakeScore&&this._2fenBtn.setEnabled(!1),this._3fenBtn.value<2*this._lastStakeScore&&this._3fenBtn.setEnabled(!1)):(this._1fenBtn.value<this._lastStakeScore&&this._1fenBtn.setEnabled(!1),this._2fenBtn.value<this._lastStakeScore&&this._2fenBtn.setEnabled(!1),this._3fenBtn.value<this._lastStakeScore&&this._3fenBtn.setEnabled(!1))}else this._1fenBtn.setEnabled(!0),this._2fenBtn.setEnabled(!0),this._3fenBtn.setEnabled(!0)},t.prototype.onFollowResponse=function(e){var t=e.data,i=t.data,n=i.playerId,a=i.stakeScore,s=(i.stakeTimes,i.curPlayerId),o=i.totalStakeTimes;void 0!=o&&null!=o&&this._betInfoView.updateCurrentRound(o),this._lastStakeScore=a,this._lastPlayerId=n,this.betChip(n,a),SoundManager.instance.playSound("send-chip_mp3"),this.updatePlayerTurn(s,a)},t.prototype.onGiveupPokerResponse=function(e){var t=e.data,i=t.data,n=i.playerId;if(n==MyUserInfo.getInstance().userId)this._myPlayerView.updateStatus(PlayerView.GIVEUP);else{var a=this.getPlayerView(n);a.updateStatus(PlayerView.GIVEUP)}var s=i.curPlayerId;this.updatePlayerTurn(s),SoundManager.instance.playSound("fold_mp3")},t.prototype.onLookPokerResponse=function(e){var t=e.data,i=t.data,n=i.playerId,a=(i.cardType,i.cardList);if(n==MyUserInfo.getInstance().userId)this._myPlayerView.lookPoker(a),this._myPlayerView.updateStatus(PlayerView.LOOKED),this._myPlayerView.canLook=!1,this._1fenBtn.setSkin("zjhGame_json.2fenBtn","zjhGame_json.2fenBtn2"),this._1fenBtn.value=2,this._2fenBtn.setSkin("zjhGame_json.4fenBtn","zjhGame_json.4fenBtn2"),this._2fenBtn.value=4,this._3fenBtn.setSkin("zjhGame_json.6fenBtn","zjhGame_json.6fenBtn2"),this._3fenBtn.value=6,this._compareBtn.setEnabled(this._currentPlayerId==MyUserInfo.getInstance().userId);else{var s=this.getPlayerView(n);s.updateStatus(PlayerView.LOOKED),this._cancelCompareBtn.visible&&(s.setCompareFlag(!0),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchOtherPlayer,this))}this._currentPlayerId==MyUserInfo.getInstance().userId&&this.updateBetRule(),SoundManager.instance.playSound("check_mp3")},t.prototype.onReadyResponse=function(e){var t=e.data,i=t.data,n=i.playerId;if(n==MyUserInfo.getInstance().userId)this._readyBtn.visible=!1,this._1fenBtn.setSkin("zjhGame_json.1fenBtn","zjhGame_json.1fenBtn2"),this._1fenBtn.value=1,this._2fenBtn.setSkin("zjhGame_json.2fenBtn","zjhGame_json.2fenBtn2"),this._2fenBtn.value=2,this._3fenBtn.setSkin("zjhGame_json.3fenBtn","zjhGame_json.3fenBtn2"),this._3fenBtn.value=3,this._myPlayerView.updateStatus(PlayerView.READYED);else{var a=this.getPlayerView(n);a.updateStatus(PlayerView.READYED)}this._myPlayerView.hidePoker()},t.prototype.onSayPokerResponse=function(e){var t=e.data,i=t.data,n=i.roomBankerId;this._betInfoView.updateRound(i.curGame,i.totalGames),this._inviteBtn.visible=!1,this._readyBtn.visible=!1,this._betInfoView.updateRound(i.curGame,i.totalGames);for(var a=this._data.playerList,s=0;s<a.length;s++){if(a[s].playerId==MyUserInfo.getInstance().userId)this._myPlayerView.updateStatus(PlayerView.NOT_READY),this._myPlayerView.isZhuang=!1;else{var o=this.getPlayerView(a[s].playerId);o.updateStatus(PlayerView.NOT_READY),o.isZhuang=!1}this.betChip(a[s].playerId)}if(SoundManager.instance.playSound("send-chip_mp3"),n==MyUserInfo.getInstance().userId)this._myPlayerView.isZhuang=!0;else{var o=this.getPlayerView(n);o.isZhuang=!0}this._lastStakeScore=0,this._lastPlayerId="",this._currentPlayerId="";var r=i.curPlayerId;this.updatePlayerTurn(r),r==MyUserInfo.getInstance().userId?(this._giveUpBtn.setEnabled(!0),this._1fenBtn.setEnabled(!0),this._2fenBtn.setEnabled(!0),this._3fenBtn.setEnabled(!0)):(this._giveUpBtn.setEnabled(!1),this._1fenBtn.setEnabled(!1),this._2fenBtn.setEnabled(!1),this._3fenBtn.setEnabled(!1)),this._1fenBtn.setSkin("zjhGame_json.1fenBtn","zjhGame_json.1fenBtn2"),this._1fenBtn.value=1,this._2fenBtn.setSkin("zjhGame_json.2fenBtn","zjhGame_json.2fenBtn2"),this._2fenBtn.value=2,this._3fenBtn.setSkin("zjhGame_json.3fenBtn","zjhGame_json.3fenBtn2"),this._3fenBtn.value=3,egret.clearTimeout(this._fapaiTimerId),this._fapaiTimerId=egret.setTimeout(this.fapai,this,500),GameGlobal.iframeLayer.hideIFrame2(GameResult)},t.prototype.fapai=function(){this._myPlayerView.sayPoker(),this._myPlayerView.canLook=!0;for(var e=this._otherPlayerViews.length,t=0;e>t;t++){var i=this._otherPlayerViews[t];i.sayPoker()}SoundManager.instance.playSound("start_mp3")},t.prototype.betChip=function(e,t){void 0===t&&(t=1);var i=new ChipView,n=this._myPlayerView.getChipBornPos();if(e!=MyUserInfo.getInstance().userId){var a=this.getPlayerView(e);a.updateBetNum(t),n=a.getChipBornPos()}else this._myPlayerView.updateBetNum(t);i.x=n[0],i.y=n[1],this._chipContainer.addChild(i);var s=this.getRandomChipPos();egret.Tween.get(i).to({x:s[0],y:s[1]},300),i.setValue(t),this._betInfoView.addChip(t)},t.prototype.getActivePlayerList=function(){for(var e=this._otherPlayerViews.length,t=[],i=0;e>i;i++){var n=this._otherPlayerViews[i];n.isOffline()||n.getStatus()!=PlayerView.GIVEUP&&n.getStatus()!=PlayerView.GIVEUP2&&n.getStatus()!=PlayerView.WATCHER&&t.push(n)}return t},t.prototype.getRandomChipPos=function(){var e=.5*GameGlobal.stage.stageWidth,t=.5*GameGlobal.stage.stageHeight;return[e+DUtils.createRandomNum(-30,30),t+DUtils.createRandomNum(-30,30)]},t.prototype.getPlayerView=function(e){for(var t=this._otherPlayerViews.length,i=0;t>i;i++){var n=this._otherPlayerViews[i],a=n.getData();if(a.playerId.toString()==e.toString())return this._otherPlayerViews[i]}return null},t.prototype.quitConfirm=function(){var e={};e.msgType=NetAction.dissolveRoom,e.token=GameModel.instance().token,e.gameType=GameGlobal.gameType,e.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(e)},t.prototype.getPayTypeStr=function(e){var t="房主支付";switch(e){case 1:t="房主支付";break;case 2:t="AA支付"}return t},t.prototype.onTouchTap=function(e){if(e.currentTarget==this._quitBtn)AlertView.getInstance().setConfirmCallBack(this.quitConfirm,this),AlertView.getInstance().show("是否确定解散房间？",AlertView.CONFIRM_MODE);else if(e.currentTarget==this._readyBtn){var t={};t.msgType=NetAction.ready,t.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(t)}else if(e.currentTarget==this._inviteBtn){var i="",n=this.getPayTypeStr(this._data.payType);i+=this._data.hasOwnProperty("teaHouseNum")&&null!=this._data.teaHouseNum?"茶楼编号:"+this._data.teaHouseNum+",第"+this._data.tableNum+"桌,"+this._data.totalGames+"局,"+n+",速度来玩吧!":"房间号："+this._data.roomId+","+this._data.totalGames+"局,"+n+",速度来玩吧!",egret.ExternalInterface.call("shareToFriend",GameGlobal.shareTitle+"|"+i)}else if(e.currentTarget==this._giveUpBtn){var t={};t.msgType=NetAction.giveup,t.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId},SocketCommand.getInstance().send(t)}else if(e.currentTarget==this._compareBtn){this._compareBtn.visible=!1,this._cancelCompareBtn.visible=!0;for(var a=this._otherPlayerViews.length,s=this.getActivePlayerList(),o=s.length,r=0;a>r;r++){var h=s[r];h.touchEnabled=!0,(1>=o||h.isKanpai&&h.getStatus()!=PlayerView.GIVEUP&&h.getStatus()!=PlayerView.GIVEUP2)&&(h.setCompareFlag(!0),h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchOtherPlayer,this))}0==MyUserInfo.getInstance().gender?SoundManager.instance.playSound("vs_mp3"):SoundManager.instance.playSound("vs2_mp3")}else if(e.currentTarget==this._cancelCompareBtn){this._compareBtn.visible=!0,this._cancelCompareBtn.visible=!1;for(var a=this._otherPlayerViews.length,r=0;a>r;r++){var h=this._otherPlayerViews[r];h.touchEnabled=!1,h.setCompareFlag(!1),h.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchOtherPlayer,this)}}else if(e.currentTarget==this._1fenBtn){var t={};t.msgType=NetAction.follow,t.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId,curStakeScore:this._1fenBtn.value},SocketCommand.getInstance().send(t)}else if(e.currentTarget==this._2fenBtn){var t={};t.msgType=NetAction.follow,t.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId,curStakeScore:this._2fenBtn.value},SocketCommand.getInstance().send(t)}else if(e.currentTarget==this._3fenBtn){var t={};t.msgType=NetAction.follow,t.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId,curStakeScore:this._3fenBtn.value},SocketCommand.getInstance().send(t)}else if(e.currentTarget==this._chatBtn)GameGlobal.iframeLayer.showIFrame(NN_ChatView);else if(e.currentTarget==this._refreshBtn){var t={};t.msgType=NetAction.refreshRoom,t.msg={refreshType:1},t.gameType=0,SocketCommand.getInstance().send(t)}else e.currentTarget==this._setBtn?GameGlobal.iframeLayer.showIFrame(SettingView):e.currentTarget==this._helpBtn&&GameGlobal.iframeLayer.showIFrame(RuleView2)},t.prototype.onTouchOtherPlayer=function(e){var t=e.currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchOtherPlayer,this);var i=t.getData(),n=i.playerId;this._cancelCompareBtn.visible=!1,this._compareBtn.visible=!0;var a=this.getCurrentMinBet();this.betChip(MyUserInfo.getInstance().userId,a),SoundManager.instance.playSound("send-chip_mp3");var s={};s.msgType=NetAction.compare,s.msg={roomId:GameModel.instance().roomId,playerId:MyUserInfo.getInstance().userId,curStakeScore:2,otherPlayerId:n},SocketCommand.getInstance().send(s)},t.prototype.getCurrentMinBet=function(){var e=1;return e=this._1fenBtn.isEnabled?this._1fenBtn.value:this._2fenBtn.isEnabled?this._2fenBtn.value:this._3fenBtn.value},t.prototype.initFenBtns=function(){this._1fenBtn=new DButton("zjhGame_json.1fenBtn","zjhGame_json.1fenBtn2"),this.addChild(this._1fenBtn),this._1fenBtn.x=338,this._1fenBtn.y=390,this._1fenBtn.value=1,this._2fenBtn=new DButton("zjhGame_json.2fenBtn","zjhGame_json.2fenBtn2"),this.addChild(this._2fenBtn),this._2fenBtn.x=499,this._2fenBtn.y=390,this._2fenBtn.value=2,this._3fenBtn=new DButton("zjhGame_json.3fenBtn","zjhGame_json.3fenBtn2"),this.addChild(this._3fenBtn),this._3fenBtn.x=660,this._3fenBtn.y=390,this._3fenBtn.value=3},t.prototype.resize=function(){},t.READY_STATUS=1,t.GAMEING=2,t.ROUND_END=3,t.GAME_END=4,t}(BaseGameView);__reflect(ZjhBattleView.prototype,"ZjhBattleView");var HttpCommand=function(){function e(){}return e.send=function(t,i,n){function a(){egret.clearTimeout(e._timerId)}function s(t){DataLoading.getInstance().hide(),egret.clearTimeout(e._timerId);var a=t.target;a.removeEventListener(egret.Event.COMPLETE,s,this),a.removeEventListener(egret.IOErrorEvent.IO_ERROR,o,this);var r=a.response;r=JSON.parse(r.toString());var h=r.code;0!=h?AlertView.getInstance().show(r.desc,AlertView.ALERT_MODE):null!=n&&n.apply(i,[r])}function o(){DataLoading.getInstance().hide(),egret.clearTimeout(e._timerId),r.removeEventListener(egret.Event.COMPLETE,s,this),r.removeEventListener(egret.IOErrorEvent.IO_ERROR,o,this),AlertView.getInstance().show("请求接口失败：egret.IOErrorEvent.IO_ERROR",AlertView.ALERT_MODE)}void 0===n&&(n=null);var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(e.rebuild2(t),egret.HttpMethod.GET),r.send(),r.addEventListener(egret.Event.COMPLETE,s,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,o,this),DataLoading.getInstance().show(),e._timerId=egret.setTimeout(a,this,e.REQUEST_TIMEOUT)},e.rebuild2=function(e){var t=Math.random().toString(),i=e.params,n=e.action+"?",a="";if(i)for(var s in i)a+="&"+s+"="+i[s];return a=a.substring(1),""!=a?GameGlobal.HTTP_API_URL+n+a+"&code="+GameModel.instance().code+"&deviceType="+GameModel.instance().deviceType+"&v="+t:GameGlobal.HTTP_API_URL+n+"code="+GameModel.instance().code+"&deviceType="+GameModel.instance().deviceType+"&v="+t},e.rebuild=function(e){var t=(Math.random().toString(),e.params);return t=t||{},t.code=GameModel.instance().token,t.deviceType=GameModel.instance().deviceType,t
},e.cookie="",e.LOGIN="login",e.GETIP="getIpByRoomId",e.REQUEST_TIMEOUT=8e3,e._timerId=-1,e}();__reflect(HttpCommand.prototype,"HttpCommand");var CommandVo=function(){function e(e,t){void 0===e&&(e=""),void 0===t&&(t=null),this.module="",this.action="",this.params={},this.action=e,this.params=t}return e}();__reflect(CommandVo.prototype,"CommandVo");var NetAction=function(){function e(){}return e.NORMAL=0,e.enterHall=1,e.dissolveRoomSuccess=12,e.createRoom=5,e.enterRoom=6,e.ready=7,e.sayPoker=8,e.jiesuan=24,e.jiesuan2=25,e.dissolveRoom=9,e.agreeDissolveRoom=10,e.disagreeDissolveRoom=11,e.refreshRoom=13,e.backToHall=16,e.autodissolveRoom=18,e.chatMsg=19,e.hearBeat=20,e.offline=14,e.online=15,e.zhanji=2,e.feedback=3,e.notice=4,e.updateFangKa=21,e.updatePosition=23,e.playerInfo=17,e.mallList=26,e.bind=27,e.checkBind=28,e.buy=29,e.countDown=305,e.teahouse_create=80,e.teahouse_playerList=84,e.teahouse_applyList=91,e.teahouse_removeMember=85,e.teahouse_setMember=98,e.teahouse_agreeMember=83,e.teahouse_disagreeMember=83,e.teahouse_table_memberList=89,e.teahouse_table_memberList2=99,e.teahouse_enterTable=87,e.teahouse_join=88,e.teahouse_del=82,e.teahouse_quit=90,e.teahouse_list=81,e.teahouse_list2=53,e.teahouse_joinList=94,e.teahouse_scoreList=92,e.teahouse_myScoreList=93,e.teahouse_backToHall=95,e.rank_opened=52,e.rank_tuhao=50,e.rank_paishen=51,e.teahouse_winList=97,e.teahouse_set=96,e.teahouse_enter=86,e.autoCompare=301,e.follow=300,e.look=303,e.compare=302,e.giveup=304,e.readyRobBanker=100,e.robBanker=101,e.robBankerOverTime=102,e.readyStake=103,e.stake=104,e.showCard=105,e.cuopai=106,e.xieyi=10001,e}();__reflect(NetAction.prototype,"NetAction");var SocketCommand=function(){function e(){this._reConnectTime=-1,this._isConnected=!1,this._isReconnect=!1,this._lockReconnect=!1,this._hearBeatTime=-1}return e.getInstance=function(){return this._instance||(this._instance=new e)},e.prototype.onHearBeatTimer=function(){var t=this,i={};i.msgType=NetAction.hearBeat,i.gameType=0,e.getInstance().send(i),egret.clearTimeout(this._reConnectTime),this._reConnectTime=egret.setTimeout(function(){egret.clearTimeout(t._reConnectTime),t._socket.close()},this,6e3)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:!0,configurable:!0}),e.prototype.connect=function(){this._socket&&(this._socket.removeEventListener(egret.Event.CONNECT,this.onSocketConnected,this),this._socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this._socket.removeEventListener(egret.Event.CLOSE,this.onSocketClosed,this),this._socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketIOError,this)),this._socket=new egret.WebSocket,this._socket.addEventListener(egret.Event.CONNECT,this.onSocketConnected,this),this._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this._socket.addEventListener(egret.Event.CLOSE,this.onSocketClosed,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketIOError,this);var e=GameGlobal.SOCKET_IP,t=GameGlobal.SOCKET_PORT;this._socket.connect(e,t)},e.prototype.onSocketIOError=function(e){this.onSocketClosed(null)},e.prototype.send=function(e){if(this.isConnected){e.token=GameModel.instance().token,(void 0==e.gameType||null==e.gameType)&&(e.gameType=GameGlobal.gameType),LogUtils.log("send socket message::"+JSON.stringify(e));var t=JSON.stringify(e);this._socket.writeUTF(t)}},e.prototype.onSocketConnected=function(e){this._isConnected=!0,egret.clearTimeout(this._reConnectTime),egret.clearTimeout(this._hearBeatTime),this._hearBeatTime=egret.setTimeout(this.onHearBeatTimer,this,1e4),GameEventManager.dispatchEvent(GameEventManager.SOCKET_CONNECTED)},e.prototype.onSocketData=function(e){DataLoading.getInstance().hide();var t=this._socket.readUTF();LogUtils.log("receive socket message::"+t);var i=JSON.parse(t),n=i.code;if(i.hasOwnProperty("gameType")&&null!=i.gameType){var a=i.gameType;0!=a&&(GameGlobal.gameType=a)}if(i.data&&i.data.hasOwnProperty("gameType")&&null!=i.data.gameType){var a=i.data.gameType;0!=a&&(GameGlobal.gameType=a)}n==NetAction.NORMAL?GameEventManager.dispatchEvent(i.msgType.toString(),i):(console.log(i.desc,"111111111111111111111111111111"),AlertView.getInstance().show(i.desc)),egret.clearTimeout(this._reConnectTime),egret.clearTimeout(this._hearBeatTime),this._hearBeatTime=egret.setTimeout(this.onHearBeatTimer,this,1e4)},e.prototype.onSocketClosed=function(e){this._isConnected=!1,this.reconnect()},e.prototype.reconnect=function(){var e=this;DataLoading.getInstance().show(),egret.clearTimeout(this._reConnectTime),this._reConnectTime=egret.setTimeout(function(){e.connect()},this,3e3),this.connect()},e._instance=null,e}();__reflect(SocketCommand.prototype,"SocketCommand");var DateUtils=function(){function e(){}return e.formatTime=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=":");var n=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60,o=n.toString(),r=a.toString(),h=s.toString();return 10>n&&(o="0"+n),10>a&&(r="0"+a),10>s&&(h="0"+s),t?o+i+r+i+h:r+i+h},e.getDateDiff=function(t,i){var n=e.getDateDiffArr(t,i),a="";return n[0]>0&&(a+=n[0]+"天"),n[1]>0&&(a+=n[1]+"小时"),n[2]>0&&(a+=n[2]+"分"),n[3]>0&&(a+=n[3]+"秒"),a},e.getDateDiffArr=function(e,t){var i=Math.abs(t-e),n=Math.floor(i/864e5),a=i%864e5,s=Math.floor(a/36e5),o=a%36e5,r=Math.floor(o/6e4),h=o%6e4,l=Math.round(h/1e3);return[n,s,r,l]},e.dateFormat=function(e,t){void 0===t&&(t="yyyy-MM-dd hh:mm:ss");var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t},e}();__reflect(DateUtils.prototype,"DateUtils");var DUtils=function(){function e(){}return e.hitTestRect=function(e,t){return e.y<t.bottom&&e.bottom>t.y&&e.x<t.right&&e.right>t.x},e.getArrayByPage=function(e,t,i){if(void 0===i&&(i=5),null==e)return null;var n=(t-1)*i,a=n+i;return a=Math.min(a,e.length),e.slice(n,a)},e.formatNumber=function(e){for(var t=e.toString(),i=t.split(""),n=new Array,a=new Array,s=i.length-1;s>=0;s--)a.length<3?(a.push(i[s]),0==s&&n.push(a)):(n.push(a),a=[],a.push(i[s]),0==s&&n.push(a));for(var o=new Array,r=0;r<n.length;r++){var h=n[r];if(r!=n.length-1){var l=",";h.push(l)}for(var c=0;c<h.length;c++)o.push(h[c])}for(var d="",s=o.length-1;s>=0;s--)d+=o[s];return d},e.createSimpleButton=function(t,i,n,a,s){void 0===s&&(s="");var o=new egret.Sprite;return null!=s?o.addChild(e.createBitmapByName(s)):(o.graphics.beginFill(0,0),o.graphics.drawRect(0,0,n,a),o.graphics.endFill()),o.x=t,o.y=i,o.touchEnabled=!0,o},e.createTextField=function(e,t,i,n,a,s,o,r){void 0===s&&(s=""),void 0===o&&(o=!1),void 0===r&&(r=egret.TextFieldType.INPUT);var h=new egret.TextField;return h.fontFamily=GameGlobal.DEFAULT_FONT_NAME,h.textAlign=egret.HorizontalAlign.LEFT,h.x=e,h.y=t,h.size=a,h.multiline=o,-1!=i&&(h.width=i),-1!=n&&(h.height=n),h.text=s,h},e.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},e.createMovieClipByName=function(e){var t=new egret.MovieClip,i=RES.getRes(e+"_json"),n=RES.getRes(e+"_png"),a=new egret.MovieClipDataFactory(i,n);return t=new egret.MovieClip(a.generateMovieClipData(e))},e.createSpriteSheetByName=function(e,t){var i=new egret.Bitmap,n=RES.getRes(e);return i.texture=n.getTexture(t),i},e.getRequestParamByName=function(t){var i=new Object;return i=e.getRequestParams(),i[t]},e.getRequestParams=function(){var e=document.location.search,t=new Object;if(-1!=e.indexOf("?"))for(var i=e.substr(1),n=i.split("&"),a=0;a<n.length;a++)t[n[a].split("=")[0]]=n[a].split("=")[1];return t},e.randArray=function(e){e.sort(function(){return.5-Math.random()})},e.createRandomNum=function(e,t){void 0===e&&(e=0);var i=Math.floor(Math.random()*(t-e+1))+e;return i},e.isNative=function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},e}();__reflect(DUtils.prototype,"DUtils");var GameUtls=function(){function e(){}return e.sitId2LR=function(e,t){if(e==t)return 0;if(6==e)return t;if(5==e){if(6==t)return 1;if(1==t)return 2;if(2==t)return 3;if(3==t)return 4;if(4==t)return 5}else if(4==e){if(5==t)return 1;if(6==t)return 2;if(1==t)return 3;if(2==t)return 4;if(3==t)return 5}else if(3==e){if(4==t)return 1;if(5==t)return 2;if(6==t)return 3;if(1==t)return 4;if(2==t)return 5}else if(2==e){if(3==t)return 1;if(4==t)return 2;if(5==t)return 3;if(6==t)return 4;if(1==t)return 5}else{if(2==t)return 1;if(3==t)return 2;if(4==t)return 3;if(5==t)return 4;if(6==t)return 5}},e.PLAYER_SEAT_POS=[[949,310],[816,103],[480,46],[120,102],[6,310]],e}();__reflect(GameUtls.prototype,"GameUtls");var GifPlayer=function(e){function t(){var t=e.call(this)||this;return t._frameIndex=1,t._lastTime=0,t._fpsTimer=1e3/24,t._intervalId=-1,t._frameTotal=15,t._prefix="",t._playCount=-1,t.initView(),t}return __extends(t,e),t.prototype.setFrameTotal=function(e){this._frameTotal=e},t.prototype.setFramePrefix=function(e){this._prefix=e},t.prototype.play=function(e){void 0===e&&(e=-1),this._playCount=e,this.stop(),this._frameIndex=0,this.onInterval(),egret.clearInterval(this._intervalId),this._intervalId=egret.setInterval(this.onInterval,this,this._fpsTimer)},t.prototype.stop=function(){egret.clearInterval(this._intervalId)},t.prototype.initView=function(){this._img=new egret.Bitmap,this._img.texture=RES.getRes(this._prefix+"1_png"),this.addChild(this._img)},t.prototype.onInterval=function(){this._frameIndex++,this._frameIndex>this._frameTotal&&(this._frameIndex=1,1==this._playCount&&(null!=this.parent&&this.parent.removeChild(this),egret.clearInterval(this._intervalId))),this._frameIndex<10?this._img.texture=RES.getRes(this._prefix+this._frameIndex+"_png"):this._img.texture=RES.getRes(this._prefix+this._frameIndex+"_png")},t}(egret.Sprite);__reflect(GifPlayer.prototype,"GifPlayer");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function a(e){t.call(n,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var LogUtils=function(){function e(){}return e.log=function(e,t){void 0===t&&(t="black");var i=new Date,n=i.getMinutes(),a=n.toString();console.log(a+":"+i.getSeconds()+":"+i.getMilliseconds()+" %c["+e+"]","color:"+t)},e}();__reflect(LogUtils.prototype,"LogUtils");var MovieClipUtils=function(){function e(){}return e.playOnce=function(e,t){void 0===t&&(t=null),null==t&&(t=this._onPlayOnceEnd),e.gotoAndPlay(1),this._all.put(e,t),1==this._all.size()&&EnterFrameManager.addEnterFrameHandler(this._enterFrameHandler,this)},e._enterFrameHandler=function(){for(var e in this._all.keys){var t=this._all.keys[e];if(t.currentFrame==t.totalFrames){t.stop();var i=this._all.get(t);i&&i(t),this._all.remove(t)}}0==this._all.size()&&EnterFrameManager.removeEnterFrameHandler(this._enterFrameHandler)},e._onPlayOnceEnd=function(e){null!=e.parent&&e.parent.removeChild(e)},e.remove=function(e,t){void 0===t&&(t=!1);var i=this._all.remove(e);t&&i instanceof Function&&i(e)},e._all=new HashMap,e}();__reflect(MovieClipUtils.prototype,"MovieClipUtils");var StringUtils;!function(e){function t(e){for(var t=0,i=e.length,n=-1,a=0;i>a;a++)n=e.charCodeAt(a),t+=n>=0&&128>=n?1:2;return t}function i(e,t,i){for(var n=e;n.length<i;)n=t+n;return n}function n(e){if(null==e)return!1;var t=/^[\u4e00-\u9fa5]+$/;return t.test(e)}function a(e,t){void 0===t&&(t=!1);var i=0,n=0,a="";for(t&&e.charCodeAt(0)>=48&&e.charCodeAt(0)<=57&&(e="+"+e),i=e.length-1;i>=0;i--)a=e.charAt(i)+a,e.charCodeAt(i)>=48&&e.charCodeAt(i)<=57?e.charCodeAt(i-1)>=48&&e.charCodeAt(i-1)<=57&&(n++,3==n&&(a=","+a,n=0)):n=0;return a}function s(e,t){for(var i=t.length,n=0;i>n;n++)e=e.replace("{"+n+"}",t[n]);return e}function o(e,t,i){return void 0===i&&(i=!1),i?e.toLowerCase()==t.toLowerCase():e==t}function r(e){return e.replace(/\r\n/gm,"\n")}function h(e){return l(c(e))}function l(e){return e.replace(/^\s*/,"")}function c(e){return e.replace(/\s*$/,"")}e.getStringLen=t,e.padLeft=i,e.isZH_CNString=n,e.changToMoney=a,e.format=s,e.isEqual=o,e.fixNewline=r,e.trim=h,e.ltrim=l,e.rtrim=c}(StringUtils||(StringUtils={}));var AlertView=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.setConfirmCallBack=function(e,t){this._confirmCallBackFun=e,this._thisObj=t},t.prototype.setCancelCallBack=function(e,t){this._cancelCallBackFun=e,this._thisObj=t},t.prototype.show=function(e,i){void 0===i&&(i=t.CONFIRM_MODE),this._messageTF.text=e,GameGlobal.stage.addChild(this),i==t.ALERT_MODE?(this._confirmBtn2.visible=!0,this._cancelBtn.visible=this._confirmBtn.visible=!1):(this._confirmBtn2.visible=!1,this._cancelBtn.visible=this._confirmBtn.visible=!0)},t.prototype.hide=function(){this.stage&&GameGlobal.stage.removeChild(this),this._confirmCallBackFun=null,this._cancelCallBackFun=null},t.prototype.initView=function(){var e=this;this._bg=new egret.Shape,this._bg.graphics.beginFill(0,.5),this._bg.graphics.drawRect(0,0,GameGlobal.stage.stageWidth,GameGlobal.stage.stageHeight),this._bg.graphics.endFill(),this.addChild(this._bg);var t=new egret.Sprite;this.addChild(t),this._kuang=new egret.Bitmap,this._kuang.texture=RES.getRes("alert_bg_png"),t.addChild(this._kuang),this._messageTF=new egret.TextField,this._messageTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._messageTF.multiline=!0,this._messageTF.height=152,this._messageTF.width=548,this._messageTF.wordWrap=!0,this._messageTF.textAlign=egret.HorizontalAlign.CENTER,this._messageTF.size=25,this._messageTF.textColor=16777215,this._messageTF.y=77,this._messageTF.x=25,this._messageTF.text="系统提示",t.addChild(this._messageTF),this._messageTF.lineSpacing=8,this._confirmBtn=new egret.Bitmap,this._confirmBtn.texture=RES.getRes("hall_json.confirmBtn"),this._confirmBtn.x=83,this._confirmBtn.y=234,t.addChild(this._confirmBtn),this._confirmBtn.touchEnabled=!0,this._confirmBtn2=new egret.Bitmap,this._confirmBtn2.texture=RES.getRes("hall_json.confirmBtn"),this._confirmBtn2.y=234,t.addChild(this._confirmBtn2),this._confirmBtn2.touchEnabled=!0,this._confirmBtn2.visible=!1,this._cancelBtn=new egret.Bitmap,this._cancelBtn.texture=RES.getRes("hall_json.cancelBtn"),this._cancelBtn.x=350,this._cancelBtn.y=234,t.addChild(this._cancelBtn),this._cancelBtn.touchEnabled=!0,this._cancelBtn.visible=!1,this._confirmBtn2.x=.5*(t.width-this._confirmBtn2.width),t.x=GameGlobal.stageW-t.width>>1,t.y=GameGlobal.stageH-t.height>>1,this._confirmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){null!=e._confirmCallBackFun&&e._confirmCallBackFun.call(e._thisObj),e.hide()},this),this._cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){null!=e._cancelCallBackFun&&e._cancelCallBackFun.call(e._thisObj),e.hide()},this),this._confirmBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){null!=e._confirmCallBackFun&&e._confirmCallBackFun.call(e._thisObj),e.hide()},this),this.touchEnabled=!0},t.ALERT_MODE=1,t.CONFIRM_MODE=2,t._instance=null,t}(egret.Sprite);__reflect(AlertView.prototype,"AlertView");var BaseCardGroup=function(e){function t(){var t=e.call(this)||this;return t._cardViews=[],t._cardNum=5,t.initView(),t}return __extends(t,e),t.prototype.setPokerData=function(e,t){if(void 0===t&&(t=-1),null!=e){for(var i=e.length,n=[],a=0;i>a;a++){var s=new Card(e[a].cardValue,e[a].cardSuit);n.push(s)}i=this._cardViews.length;for(var a=0;i>a;a++){var o=this._cardViews[a];o.data=null,a<n.length&&(o.data=n[a])}}},t.prototype.setPokerSize=function(e,t){void 0===t&&(t=82);for(var i=this._cardViews.length,n=0;i>n;n++){var a=this._cardViews[n];a.scaleX=a.scaleY=e,a.x=n*t}},t.prototype.showPokerValue=function(e,t){void 0===t&&(t=!1);for(var i=this._cardViews.length,n=0;i>n;n++){var a=this._cardViews[n];a.showValue(e,t)}},t.prototype.resetCards=function(){for(;this.numChildren>0;)this.removeChildAt(0);this._cardViews=[];for(var e,t=0;t<this._cardNum;t++)e=new CardView,e.x=124*t,this.addChild(e),this._cardViews.push(e)},t.prototype.initView=function(){},t}(egret.Sprite);__reflect(BaseCardGroup.prototype,"BaseCardGroup");var BaseItemClickRenderer=function(e){function t(){var t=e.call(this)||this;return t.touchCache={},t.SCALE_ROAT=1.1,t.once(eui.UIEvent.CREATION_COMPLETE,t.onCreateComplete,t),t}return __extends(t,e),t.prototype.onCreateComplete=function(e){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.itemTouchBegin,this),this.setLanguage()},t.prototype.setLanguage=function(){},t.prototype.addButton=function(e,t){void 0===t&&(t=!1),this.touchCache[e.hashCode]||(this.touchCache[e.hashCode]=[e.x,e.y,e.scaleX,e.scaleY,t])},t.prototype.removeButton=function(e){this.touchCache[e.hashCode]&&delete this.touchCache[e.hashCode]},t.prototype.itemTouchBegin=function(e){this.startx=e.stageX,this.starty=e.stageY;var t=e.target,i=this.touchCache[t.hashCode];i&&(this.addEventListener(egret.TouchEvent.TOUCH_END,this.itemTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.itemTouchCancel,this),i[4]&&(t.scaleX=i[2]*this.SCALE_ROAT,t.scaleY=i[3]*this.SCALE_ROAT,t.x=i[0]-((this.SCALE_ROAT-1)*t.width>>1),t.y=i[1]-((this.SCALE_ROAT-1)*t.height>>1)))},t.prototype.itemTouchEnd=function(e){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.itemTouchEnd,this);var t=this.startx-e.stageX,i=this.starty-e.stageY,n=e.target,a=this.touchCache[n.hashCode];a&&(a[4]&&(n.x=a[0],n.y=a[1],n.scaleX=a[2],n.scaleY=a[3]),20>t&&t>-20&&20>i&&i>-20&&this.click(n))},t.prototype.itemTouchCancel=function(e){this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.itemTouchCancel,this);var t=(this.startx-e.stageX,this.starty-e.stageY,e.target),i=this.touchCache[t.hashCode];i&&i[4]&&(t.x=i[0],t.y=i[1],t.scaleX=i[2],t.scaleY=i[3])},t.prototype.click=function(e){},t}(eui.ItemRenderer);__reflect(BaseItemClickRenderer.prototype,"BaseItemClickRenderer");var BasePlayerDetailView=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.setData=function(e){void 0===e&&(e=null),this._data=e;var t="";this._ipTF.text="",this._distanceTF.text="";var i="";if(null==e)i=MyUserInfo.getInstance().userName,this._userIdTF.text=MyUserInfo.getInstance().userId,this._ipTF.text=MyUserInfo.getInstance().city,t=MyUserInfo.getInstance().faceUrl,this._distanceTF.text="",this._xhImg.visible=this._pjImg.visible=this._jdImg.visible=this._dzhImg.visible=this._hcImg.visible=!1;else{i=e.nickName,this._userIdTF.text="ID："+e.playerId,t=e.headImgUrl,GameEventManager.removeEvent(NetAction.playerInfo.toString(),this.onPlayerInfoResponse,this),GameEventManager.addEvent(NetAction.playerInfo.toString(),this.onPlayerInfoResponse,this);var n={};n.msgType=NetAction.playerInfo,n.token=GameModel.instance().token,n.msg={otherPlayerId:e.playerId},SocketCommand.getInstance().send(n),e.playerId==MyUserInfo.getInstance().userId?this._xhImg.visible=this._pjImg.visible=this._jdImg.visible=this._dzhImg.visible=this._hcImg.visible=!1:this._xhImg.visible=this._pjImg.visible=this._jdImg.visible=this._dzhImg.visible=this._hcImg.visible=!0}var a=StringUtils.getStringLen(i);a>8&&(i=i.substr(0,8)+"..."),this._nickNameTF.text=i,this._faceImg.load(t)},t.prototype.onPlayerInfoResponse=function(e){var t=e.data,i=t.data;this._ipTF.text=i.address,this._distanceTF.text=i.distance},t.prototype.showComplete=function(){this._bg=DUtils.createBitmapByName("playerInfoBg_png"),this.addChild(this._bg),this._faceImg=new DImage(105,108,"nnGame_json.testface2"),this.addChild(this._faceImg),this._faceImg.x=55,this._faceImg.y=42,this._nickNameTF=new egret.TextField,this._nickNameTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._nickNameTF.textColor=16777215,this._nickNameTF.size=29,this._nickNameTF.bold=!0,this._nickNameTF.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this._nickNameTF),this._nickNameTF.x=192,this._nickNameTF.y=35,this._nickNameTF.text="--",this._userIdTF=new egret.TextField,this._userIdTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._userIdTF.textColor=16777215,this._userIdTF.size=25,this._userIdTF.bold=!0,this._userIdTF.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this._userIdTF),this._userIdTF.x=194,this._userIdTF.y=81,this._ipTF=new egret.TextField,this._ipTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._ipTF.textColor=16777215,this._ipTF.size=25,this._ipTF.bold=!0,this._ipTF.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this._ipTF),this._ipTF.x=194,this._ipTF.y=118,this._distanceTF=new egret.TextField,this._distanceTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._distanceTF.textColor=16777215,this._distanceTF.size=25,this._distanceTF.bold=!0,this._distanceTF.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this._distanceTF),this._distanceTF.x=194,this._distanceTF.y=155,this._xhImg=new DButton("emotion_json.xh"),this._xhImg.x=35,this._xhImg.y=208,this.addChild(this._xhImg),this._pjImg=new DButton("emotion_json.pj"),this._pjImg.x=133,this._pjImg.y=202,this.addChild(this._pjImg),this._jdImg=new DButton("emotion_json.jd"),this._jdImg.x=221,this._jdImg.y=204,this.addChild(this._jdImg),this._dzhImg=new DButton("emotion_json.dzh"),this._dzhImg.x=294,this._dzhImg.y=205,this.addChild(this._dzhImg),this._hcImg=new DButton("emotion_json.hc"),this._hcImg.x=372,this._hcImg.y=213,this.addChild(this._hcImg),this._closeBtn=new DButton("hall_json.closeBtn"),this.addChild(this._closeBtn),this._closeBtn.x=385,this._closeBtn.y=-29,this.iframeWidth=this._bg.width,this.iframeHeight=this._bg.height;var e=new egret.Shape;e.graphics.beginFill(0,.5),e.graphics.drawRect(0,0,GameGlobal.stage.stageWidth,GameGlobal.stage.stageHeight),e.graphics.endFill(),this.addChildAt(e,0),e.x=-(GameGlobal.stage.stageWidth-this.iframeWidth)>>1,e.y=-(GameGlobal.stage.stageHeight-this.iframeHeight)>>1,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._xhImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._pjImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._jdImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._dzhImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this._hcImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.hide=function(){GameEventManager.removeEvent(NetAction.playerInfo.toString(),this.onPlayerInfoResponse,this)},t.prototype.onTouchTap=function(e){if(e.currentTarget==this._closeBtn)GameGlobal.iframeLayer.hideIFrame2(t);else{var i="xh";e.currentTarget==this._xhImg||(e.currentTarget==this._pjImg?i="pj":e.currentTarget==this._jdImg?i="jd":e.currentTarget==this._dzhImg?i="dzh":e.currentTarget==this._hcImg&&(i="hc"));var n={};n.msgType=NetAction.chatMsg,n.msg={chatType:5,chatMsg:i,otherPlayerId:this._data.playerId},SocketCommand.getInstance().send(n),GameGlobal.iframeLayer.hideIFrame2(t)}},t}(IFrameBase);__reflect(BasePlayerDetailView.prototype,"BasePlayerDetailView");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var CardView=function(e){function t(){var t=e.call(this)||this;return t._view=new egret.Bitmap,t._view.texture=RES.getRes("poker5_json.cardBg"),t.addChild(t._view),t._view.anchorOffsetX=.5*t._view.width,t._view.anchorOffsetY=.5*t._view.height,t._view.x=.5*t._view.width,t._view.y=.5*t._view.height,t.touchEnabled=!0,t}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,null==this._data&&(this._view.texture=RES.getRes("poker5_json.cardBg"))},enumerable:!0,configurable:!0}),t.prototype.showValue=function(e,t){var i=this;if(void 0===t&&(t=!1),null!=this._data)if(egret.Tween.removeTweens(this._view),e)if(t)this._view.scaleX=-1,egret.Tween.get(this._view).to({scaleX:1},500).call(function(){var e=i.getPokerResName(i._data.getNum(),i._data.getColor());i._view.texture=RES.getRes(e+".card"+i._data.getNum()+"_"+i._data.getColor())},this);else{var n=this.getPokerResName(this._data.getNum(),this._data.getColor());this._view.texture=RES.getRes(n+".card"+this._data.getNum()+"_"+this._data.getColor())}else this._view.texture=RES.getRes("poker5_json.cardBg")},t.prototype.getPokerResName=function(e,t){var i="poker1_json";return i=3>=e?"poker1_json":6>=e?"poker2_json":9>=e?"poker3_json":12>=e?"poker4_json":"poker5_json"},t}(egret.Sprite);__reflect(CardView.prototype,"CardView");var CountDownView=function(e){function t(){var t=e.call(this)||this;return t._leftTime=10,t.initView(),t}return __extends(t,e),t.prototype.start=function(e){void 0===e&&(e=10),this._leftTime=e,this._tf.text=this._leftTime.toString(),this._timer.stop(),this._timer.reset(),this._timer.start(),this.visible=!0},t.prototype.stop=function(){this._timer.stop(),this._timer.reset(),this._timer.start(),this.visible=!1},t.prototype.initView=function(){this._icon=new egret.Bitmap,this._icon.texture=RES.getRes("game_json.bull_clock"),this.addChild(this._icon),this._tf=new egret.TextField,this._tf.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._tf.size=28,this._tf.textColor=16777215,this._tf.textAlign=egret.HorizontalAlign.CENTER,this._tf.width=this._icon.width,this.addChild(this._tf),this._tf.x=3,this._tf.y=16,this._tf.text="0",this.visible=!1,this._timer=new egret.Timer(1e3),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandle,this)},t.prototype.onTimerHandle=function(e){this._leftTime--,this._tf.text=this._leftTime.toString(),this._leftTime<=0&&this.stop()},t}(egret.Sprite);__reflect(CountDownView.prototype,"CountDownView");var GameLoadingView=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.show=function(){GameGlobal.stage.addChild(this)},t.prototype.hide=function(){GameGlobal.stage.contains(this)&&GameGlobal.stage.removeChild(this)},t.prototype.initView=function(){this.touchEnabled=!0;var e=new egret.Shape;e.graphics.beginFill(0),e.graphics.drawRect(0,0,GameGlobal.stageW,GameGlobal.stageH),e.graphics.endFill(),this.addChild(e),this._progressBar=new DProgressBar,this._progressBar.setValue(0),this.addChild(this._progressBar),this._progressBar.y=(GameGlobal.stage.stageHeight-this._progressBar.height>>1)+50,this._progressBar.x=GameGlobal.stage.stageWidth-this._progressBar.width>>1,this._loadingText=new egret.TextField,this._loadingText.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._loadingText.size=28,this._loadingText.textAlign=egret.HorizontalAlign.CENTER,this._loadingText.width=this._progressBar.width,this._loadingText.text="拼命加载中，请稍后...",this.addChild(this._loadingText),this._loadingText.textColor=16777215,this._loadingText.x=this._progressBar.x,this._loadingText.y=this._progressBar.y-50},t.prototype.setProgress=function(e,t){this._progressBar.setValue(e,t)},t}(egret.Sprite);__reflect(GameLoadingView.prototype,"GameLoadingView");var MailView=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.showComplete=function(){},t}(IFrameBase);__reflect(MailView.prototype,"MailView");var MallView=function(e){function t(){var t=e.call(this)||this;return t._data=null,t.init(),t}return __extends(t,e),t.prototype.show=function(){for(var e,t=12,i=0;t>i;i++)e=new MallItemTile,e.x=i%3*161,e.y=175*Math.floor(i/3),this._listContainer.addChild(e),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTile,this);this._scrollView.setScrollPosition(0,0)},t.prototype.hide=function(){GameEventManager.removeEvent(NetAction.mallList.toString(),this.onMallListResponse,this)},t.prototype.onMallListResponse=function(e){var t=e.data,i=t.data;this.updateMallList(i)},t.prototype.updateMallList=function(e){for(;this._listContainer.numChildren>0;)this._listContainer.removeChildAt(0);for(var t,i=e.length,n=0;i>n;n++)t=new MallItemTile,t.setData(e[n]),t.x=n%3*161,t.y=175*Math.floor(n/3),this._listContainer.addChild(t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTile,this);this._scrollView.setScrollPosition(0,0)},t.prototype.onTouchTile=function(e){var t=e.currentTarget;this._data=t.getData(),GameEventManager.addEvent(NetAction.checkBind.toString(),this.onCheckBindResponse,this);var i={};i.msgType=NetAction.checkBind,i.gameType=0,SocketCommand.getInstance().send(i)},t.prototype.onCheckBindResponse=function(e){GameEventManager.removeEvent(NetAction.checkBind.toString(),this.onCheckBindResponse,this),GameEventManager.addEvent(NetAction.buy.toString(),this.onBuyResponse,this);var t={};t.msgType=NetAction.buy,t.gameType=0,t.msg={productId:this._data.productId},SocketCommand.getInstance().send(t)},t.prototype.onBuyResponse=function(e){var t=e.data,i=t.data,n=JSON.stringify(i);egret.ExternalInterface.call("pay",n)},t.prototype.unifiedOrderResponse=function(e){var t=e.data,i=JSON.stringify(t);egret.ExternalInterface.call("pay",i)},t.prototype.onTouchTap=function(e){GameGlobal.iframeLayer.hideIFrame2(t)},t.prototype.showComplete=function(){this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("hall_json.panel_bg"),this.addChild(this._bg),this._bg.scale9Grid=new egret.Rectangle(20,66,120,70),this._bg.width=684,this._bg.height=431,this._bg.x=266,this._bg.y=46,this._titleImg=new egret.Bitmap,this._titleImg.texture=RES.getRes("ui_json.mall_title"),this.addChild(this._titleImg),this._titleImg.x=this._bg.width-this._titleImg.width>>1,this._titleImg.x+=266,this._titleImg.y+=46;var e=DUtils.createBitmapByName("role4_png");this.addChild(e),this._listContainer=new egret.DisplayObjectContainer,this._scrollView=new egret.ScrollView,this._scrollView.setContent(this._listContainer),this._scrollView.width=this.width,this._scrollView.height=336,this.addChild(this._scrollView),this._scrollView.horizontalScrollPolicy="off",this._scrollView.x=432,this._scrollView.y=115,this._closeBtn=new DButton("hall_json.closeBtn"),this.addChild(this._closeBtn),this._closeBtn.x=903,this._closeBtn.y=30,this.iframeWidth=this._bg.width+266,this.iframeHeight=478;var t=new egret.Shape;t.graphics.beginFill(0,.5),t.graphics.drawRect(0,0,GameGlobal.stage.stageWidth,GameGlobal.stage.stageHeight),t.graphics.endFill(),this.addChildAt(t,0),t.x=-(GameGlobal.stage.stageWidth-this.iframeWidth)>>1,t.y=-(GameGlobal.stage.stageHeight-this.iframeHeight)>>1,this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t}(IFrameBase);__reflect(MallView.prototype,"MallView");var MallItemTile=function(e){function t(){var t=e.call(this)||this;return t.initView(),t}return __extends(t,e),t.prototype.setData=function(e){this._data=e,this._countTF.text="房卡"+e.roomCardNum+"张",this._priceTF.text="￥"+e.showPrice+"元"},t.prototype.getData=function(){return this._data},t.prototype.onTouchTap=function(e){this.dispatchEvent(new DEvent("buyGoods"))},t.prototype.initView=function(){this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("hall_json.mallItemBg"),this.addChild(this._bg),this._countTF=new egret.TextField,this._countTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._countTF.textColor=16777215,this._countTF.size=16,this.addChild(this._countTF),this._countTF.textAlign=egret.HorizontalAlign.CENTER,this._countTF.width=112,this._countTF.text="房卡10张",this._countTF.x=3,this._countTF.y=3,this._buyBtn=new DButton("hall_json.button-yellow"),this.addChild(this._buyBtn),this._buyBtn.x=3,this._buyBtn.y=115,this._priceTF=new egret.TextField,this._priceTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._priceTF.textColor=16777215,this._priceTF.size=26,this._priceTF.bold=!0,this.addChild(this._priceTF),this._priceTF.textAlign=egret.HorizontalAlign.CENTER,this._priceTF.width=104,this._priceTF.height=42,this._priceTF.text="10元",this._priceTF.x=3,this._priceTF.y=123,this.touchChildren=!1,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)
},t}(egret.Sprite);__reflect(MallItemTile.prototype,"MallItemTile");var MallView2=function(e){function t(){var t=e.call(this)||this;return t.skinName="MallSkin",t.name="MallView",t}return __extends(t,e),t.prototype.tweenShow=function(){e.prototype.tweenShow.call(this),this.bindButton(this.copyBtn1),this.bindButton(this.copyBtn2)},t.prototype.touchBindButtonHandler=function(i){e.prototype.touchBindButtonHandler.call(this,i),i==this.copyBtn1?egret.ExternalInterface.call("copyToclipboard",t.WECHAT_NUM):i==this.copyBtn2&&egret.ExternalInterface.call("copyToclipboard",t.PHONE_NUM)},t.WECHAT_NUM="hellosunni",t.PHONE_NUM="杏趣社区",t}(IFrameBase);__reflect(MallView2.prototype,"MallView2");var NoticeView=function(e){function t(){var t=e.call(this)||this;return t._notices=[],t._noticeIndex=0,t.initView(),t}return __extends(t,e),t.prototype.addNotice=function(e){this._notices.push(e),1==this._notices.length&&this.nextNotice(),this.visible=!0},t.prototype.init=function(){this.visible=!1,this._noticeIndex=0,this._notices=[],egret.Tween.removeTweens(this._noticeTF),this._noticeTF.x=this._bg.width+5},t.prototype.nextNotice=function(){var e=this;this._noticeIndex>=this._notices.length&&(this._noticeIndex=0);var t=this._notices[this._noticeIndex],i=2e4;this._noticeTF.text=t,egret.Tween.removeTweens(this._noticeTF),egret.Tween.get(this._noticeTF).to({x:47-this._noticeTF.textWidth},i).call(function(){e._noticeTF.x=e._bg.width+5,e._noticeIndex++,e.nextNotice()},this)},t.prototype.initView=function(){this._bg=new egret.Bitmap,this._bg.texture=RES.getRes("notice_bg2_png"),this.addChild(this._bg);var e=new egret.Shape;e.graphics.beginFill(0),e.graphics.drawRect(0,0,1096,this._bg.height),this.addChild(e),e.x=50,this._noticeTF=new egret.TextField,this._noticeTF.fontFamily=GameGlobal.DEFAULT_FONT_NAME,this._noticeTF.textColor=16777215,this._noticeTF.size=21,this._noticeTF.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this._noticeTF),this._noticeTF.text="",this._noticeTF.x=this._bg.width+5,this._noticeTF.y=11,this._noticeTF.mask=e,this.visible=!1},t}(egret.Sprite);__reflect(NoticeView.prototype,"NoticeView");var RuleView=function(e){function t(){var t=e.call(this)||this;return t._ruleArr=["游戏用牌为一副牌除大小王以外，共计52张。","玩家人数为2人至5人，每人随机发5张牌。所有的大小比较中过程均是庄家和闲家比较，闲家和闲家之间不进行比较。","玩家必须将发到手中的5张牌分成两组，进行大小比较。第一组牌为3张，第二组牌为2张。\n玩家把5张牌分为两组后，需要各自和庄家进行大小比较。","第一组3张牌的比较规则：要求玩家必须拿且只拿3张牌组成10、20、30的整数（加法运算）。数字A-10的扑克牌数字代表其大小，JQK统一以10计算。若庄家和闲家有那么三张牌能凑成10或20或30的整数，我们称之为有牛，那么则进行第2组两张牌的大小比较。若庄家或闲家有某人无法使用3张牌凑成10或20或30的整数，我们称之为没牛，同时该玩家判定为输。","第二组牌的比较则把剩下的两张牌按照加法计算，10的整数倍数最大，1最小，若大于10小于20则取个位数计算。数字越大则牌型越大，数字越小则牌型越小。若第2组牌数字为1我们称之为牛丁，若第2组数字为10或20我们称之为牛牛，其他以牛二、牛三等名称称呼。牌型从小到大排序为：没牛-牛丁-牛二……牛八-牛九-牛牛-三条-顺子-同花-葫芦-四炸-同花顺-五花牛-五小牛。","若庄家和闲家都无法使用3张牌凑成10或20或30的整数，即庄闲两家均无牛，则此时进行5张牌中最大一张牌的比较，大小次序为K-Q-J-10-9……A，若最大一张牌也相同则根据花色进行比较，大小次序为黑桃、红桃、梅花、方片。","炸弹——即5张牌中有4张一样的牌，此时无需有牛。若庄家闲家都是四炸牌型，则比较4张一样的牌的大小。","五花牛（金牛）——花指的是JQK，五花牛指的是手上的5张牌全为JQK的特殊牛牛牌型。若庄家闲家都是五花牛牌型，则比较最大一张牌的大小，若最大一张牌的大小一样则按照花色比较。","五小牛——即五张牌都小余5，且牌点总数小余或等于10。","若5张牌既符合四炸又符合五花牛则按照大的计算牌型。","倍数：","炸弹牛-7倍","五小牛-6倍","金牛（五花牛）-5倍","牛牛-4倍","牛九-3倍","牛八-2倍","牛1至牛7-1倍","无牛--1倍"],t.skinName="RuleSkin",t.name="RuleView",t}return __extends(t,e),t.prototype.show=function(){this.bindButton(this.closeBtn)},t.prototype.childrenCreated=function(){},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t),this.ruleTF.text="";for(var i=this._ruleArr.length,n=0;i>n;n++)this.ruleTF.appendText(this._ruleArr[n]+"\n\n");this.ruleTF.height=this.ruleTF.textHeight+10},t.prototype.touchBindButtonHandler=function(t){e.prototype.touchBindButtonHandler.call(this,t),t==this.closeBtn&&this.close()},t}(IFrameBase);__reflect(RuleView.prototype,"RuleView");var SelfDetailInfoView=function(e){function t(){var t=e.call(this)||this;return t.skinName="PlayerDetailInfoSkin",t.name="SelfDetailInfoView",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._face=new DImage(124,124),this.mainView.addChild(this._face),this._face.defaultImg="hall_json.testface2",this._face.x=120,this._face.y=91,this.nickNameTF.text="昵称："+MyUserInfo.getInstance().getFormatUserName(14),this.idTF.text="ID："+MyUserInfo.getInstance().userId,this.ipTF.text="IP："+MyUserInfo.getInstance().ip,this._face.load(MyUserInfo.getInstance().faceUrl)},t.prototype.createComplete=function(t){e.prototype.createComplete.call(this,t)},t.prototype.show=function(){},t}(IFrameBase);__reflect(SelfDetailInfoView.prototype,"SelfDetailInfoView");